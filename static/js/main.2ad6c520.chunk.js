(this["webpackJsonp@fmfi-uk-1-ain-412/fol-graphexplorer"]=this["webpackJsonp@fmfi-uk-1-ain-412/fol-graphexplorer"]||[]).push([[0],{312:function(e,t,n){e.exports={reactDiagram:"DiagramSystem_reactDiagram__3RoSQ"}},313:function(e,t,n){e.exports=n(605)},605:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(54),i=n.n(o);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=n(39),c=n(5),u=n(6),l=n(24),d=n(8),m=n(9),p=n(612),h=function(e,t){return{type:"SET_CONSTANT_VALUE",constantName:t,value:e}},g=function(e,t){return{type:"SET_PREDICATE_VALUE_TEXT",value:e,predicateName:t}},f=function(e,t,n){return{type:"SET_PREDICATE_VALUE_TABLE",value:e,predicateName:t,checked:n}},v=function(e,t){return{type:"SET_FUNCTION_VALUE_TEXT",value:e,functionName:t}},b=function(e,t){return{type:"SET_FUNCTION_VALUE_TABLE",value:e,functionName:t}},y=function(){return{type:"LOCK_DOMAIN"}},E=function(e){return{type:"LOCK_CONSTANT_VALUE",constantName:e}},N=function(e){return{type:"LOCK_PREDICATE_VALUE",predicateName:e}},k=function(e){return{type:"LOCK_FUNCTION_VALUE",functionName:e}},O=function(e,t){return{type:"TOGGLE_EDIT_TABLE",itemType:e,name:t}},P=function(e,t){return{type:"TOGGLE_EDIT_DATABASE",itemType:e,name:t}},T=function(e,t){return{type:"IMPORT_DIAGRAM_STATE",state:e,focusOnBodyFunc:t}},C="FUNCTION",S="PREDICATE",j="FORMULA",A="TERM",M={FORMULA:"\ud835\udf4b",TERM:"\ud835\udf49"},w=n(98),x=n(30),D=n(42),F=n(301),R=n(25),_=n.n(R),L=n(620),I=n(619),V=function(e){var t=e.subject,n=e.children,a=Object(w.a)(e,["subject","children"]);return r.a.createElement(F.a,Object.assign({style:{padding:"0.2rem 0.4rem"},variant:"outline-info",title:"Help".concat(t?" on ".concat(t):"")},a),r.a.createElement(_.a,{name:"fas fa-question"}),n?r.a.createElement(r.a.Fragment,null,"\xa0",n):null)};var z=function(e){var t=e.subject,n=e.placement,a=void 0===n?"auto":n,o=e.show,i=e.onToggle,s=e.children,c=e.label,u=e.size,l=void 0===u?"sm":u,d=r.a.createElement(L.a,{id:"help-".concat(t),className:"mw-100 overflow-auto shadow-sm",style:{width:"30rem",maxHeight:"90vh"}},r.a.createElement(L.a.Content,null,s));return r.a.createElement(I.a,{trigger:"click",placement:a,overlay:d,show:o,onToggle:i},r.a.createElement(V,{subject:t,active:o,onClick:function(){return i(!o)},size:l},c))},B=n(303),U=n(618),G=n(611),Y=function(e){var t=e.lockFn,n=e.locked;return r.a.createElement(F.a,{variant:"outline-secondary",active:n,onClick:function(){return t()},title:n?"Unlock":"Lock"},r.a.createElement(_.a,{name:n?"unlock":"lock"}))},W=function(e){var t=e.onClick,n=e.enabled;return r.a.createElement(F.a,{onClick:function(){return t()},variant:"outline-secondary",active:n,title:"Table view"},r.a.createElement(_.a,{name:"fas fa-table"}))},Q=function(e){var t=e.onClick,n=e.enabled;return r.a.createElement(F.a,{onClick:function(){return t()},variant:"outline-secondary",active:n,title:"Database table view"},r.a.createElement(_.a,{name:"fas fa-server"}))},H=function(e){var t=e.onChange,n=e.onLock,a=e.textData,o=e.label,i=e.teacherMode,s=e.id,c=e.toggleTable,u=e.toggleDatabase,l=e.arity,d=e.domain,m=e.databaseEnabled,p=e.tableEnabled,h=e.errorProperty;return r.a.createElement(G.a,{size:"sm",className:"has-validation"},r.a.createElement(G.a.Prepend,null,r.a.createElement(G.a.Text,null,o)),r.a.createElement(U.a.Control,{isInvalid:h&&h.length>0,id:s,type:"text",onChange:function(e){return t(e)},value:a.value,disabled:a.locked}),r.a.createElement(G.a.Append,null,r.a.createElement(G.a.Text,null,"}")),c?0===l||l>2||0===d.size?null:r.a.createElement(G.a.Append,null,r.a.createElement(W,{onClick:function(){return c()},enabled:p})):null,u?l<1||0===d.size?null:r.a.createElement(G.a.Append,null,r.a.createElement(Q,{onClick:function(){return u()},enabled:m})):null,i?r.a.createElement(Y,{lockFn:function(){return n()},locked:a.locked}):null,r.a.createElement(U.a.Control.Feedback,{type:"invalid"},h))};var K=function(e){var t=e.labelText,n=e.onChangeSetFunction,a=e.onLockFunction,o=e.textData,i=e.textInputLabel,s=e.idName,c=e.errorProperty,u=e.teacherMode;return r.a.createElement(p.a,null,r.a.createElement(B.a,{lg:12},r.a.createElement(U.a.Group,null,r.a.createElement(U.a.Label,null,t),r.a.createElement(H,{errorProperty:c,onChange:function(e){return n(e.target.value)},onLock:function(){return a()},textData:o,label:i,teacherMode:u,id:s}))))},J=function(e){var t=e.lockFn,n=e.locked,a=e.subject,o=void 0===a?"":a;return r.a.createElement(F.a,{style:{},variant:"secondary",size:"sm",title:(n?"Edit ":"Finish editing ")+o,className:"py-0 mr-2",onClick:t},r.a.createElement(_.a,{name:n?"fas fa-edit":"far fa-check"}),r.a.createElement("span",null,"\xa0",n?"Edit":"Done"))},q=r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"A first-order language is defined in this section."),r.a.createElement("p",null,"The Edit/Done button toggles between editing the language and viewing it in a more compact form."),r.a.createElement("p",{className:"mb-0"},"Syntactic requirements:"),r.a.createElement("ul",{className:"mb-0"},r.a.createElement("li",null,"Symbols in all sets are ",r.a.createElement("strong",null,"comma-separated"),"."),r.a.createElement("li",null,"Each predicate and function symbol must be followed by a slash (",r.a.createElement("code",null,"/"),") and arity (the number of arguments the symbol takes, a positive integer):"," ",r.a.createElement("strong",null,r.a.createElement("code",null,"symbol/arity")),".")));var X=function(e){var t=Object(a.useState)(!1),n=Object(x.a)(t,2),o=n[0],i=n[1];return r.a.createElement(D.a,{className:"mb-3"},r.a.createElement(D.a.Header,{as:"h5",className:"d-flex justify-content-between"},r.a.createElement("span",null,"Language \ud835\udcdb"),r.a.createElement("div",{className:"d-flex justify-content-left"},r.a.createElement(J,{lockFn:function(){return e.lockLanguageComponent()},locked:e.language.lockedComponent,subject:"language"}),r.a.createElement(z,{subject:"language",children:q,onToggle:i,show:o}))),r.a.createElement(D.a.Body,null,function(e){return e.language.lockedComponent?r.a.createElement("p",null,r.a.createElement("span",null,"\ud835\udcd2",r.a.createElement("sub",null,"\ud835\udcdb")," = {")," ",e.language.constants.parsed.join(", ")," }"):r.a.createElement(K,{labelText:"Individual constant",errorProperty:e.language.constants.errorMessage,onChangeSetFunction:e.setConstants,onLockFunction:e.lockConstants,textData:e.language.constants,textInputLabel:r.a.createElement("span",null,"\ud835\udcd2",r.a.createElement("sub",null,"\ud835\udcdb")," = {"),teacherMode:e.teacherMode,idName:"language-editor-constants"})}(e),function(e){return e.language.lockedComponent?r.a.createElement("p",null,r.a.createElement("span",null,"\ud835\udcdf",r.a.createElement("sub",null,"\ud835\udcdb")," = {")," ",e.language.predicates.parsed.map((function(e){return e.name+"/"+e.arity})).join(", ")," }"):r.a.createElement(K,{labelText:"Predicate symbols",errorProperty:e.language.predicates.errorMessage,onChangeSetFunction:e.setPredicates,onLockFunction:e.lockPredicates,textData:e.language.predicates,textInputLabel:r.a.createElement("span",null,"\ud835\udcdf",r.a.createElement("sub",null,"\ud835\udcdb")," = {"),teacherMode:e.teacherMode,idName:"language-editor-predicates"})}(e),function(e){return e.language.lockedComponent?r.a.createElement("p",null,r.a.createElement("span",null,"\ud835\udcd5",r.a.createElement("sub",null,"\ud835\udcdb")," = {")," ",e.language.functions.parsed.map((function(e){return e.name+"/"+e.arity})).join(", ")," }"):r.a.createElement(K,{labelText:"Function symbols",errorProperty:e.language.functions.errorMessage,onChangeSetFunction:e.setFunctions,onLockFunction:e.lockFunctions,textData:e.language.functions,textInputLabel:r.a.createElement("span",null,"\ud835\udcd5",r.a.createElement("sub",null,"\ud835\udcdb")," = {"),teacherMode:e.teacherMode,idName:"language-editor-functions"})}(e)))},Z={setConstants:function(e){return{type:"SET_CONSTANTS",value:e}},setPredicates:function(e){return{type:"SET_PREDICATES",value:e}},setFunctions:function(e){return{type:"SET_FUNCTIONS",value:e}},lockConstants:function(){return{type:"LOCK_CONSTANTS"}},lockPredicates:function(){return{type:"LOCK_PREDICATES"}},lockFunctions:function(){return{type:"LOCK_FUNCTIONS"}},lockLanguageComponent:function(){return{type:"LOCK_LANGUAGE_COMPONENT"}}},$=Object(s.b)((function(e){return{language:e.language,teacherMode:e.common.teacherMode}}),Z)(X),ee=r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"An assignment of individual variables (i.e., a partial map from individual variables to the domain\xa0\ud835\udc37) is defined in this section."),r.a.createElement("p",null,"Any alphanumeric symbol that is not an individual constant, predicate, or function symbol is considered a variable."),r.a.createElement("p",{className:"mb-0"},"Elements of the assignment are comma-separated ordered pairs. Each pair can be written as ",r.a.createElement("code",null,"(variable, element)"),"or ",r.a.createElement("code",null,"variable \u21a6 element"),". The maps-to symbol\xa0",r.a.createElement("code",null,"\u21a6")," can also be written as"," ",r.a.createElement("code",null,"->"),", ",r.a.createElement("code",null,"|->"),", ",r.a.createElement("code",null,"\\mapsto"),", or\xa0",r.a.createElement("code",null,"\u27fc"),".")),te=function(e){var t=Object(a.useState)(!1),n=Object(x.a)(t,2),o=n[0],i=n[1];return r.a.createElement(D.a,{className:"mb-3"},r.a.createElement(D.a.Header,{as:"h5",className:"d-flex justify-content-between"},r.a.createElement("span",null,"Variable assignment"),r.a.createElement(z,{subject:"language",children:ee,onToggle:i,show:o})),r.a.createElement(D.a.Body,null,r.a.createElement(p.a,null,r.a.createElement(B.a,{lg:12},r.a.createElement(U.a.Group,null,r.a.createElement(U.a.Label,null,"Assignment of individual variables"),r.a.createElement(H,{errorProperty:e.variables.errorMessage,onChange:function(t){return e.onInputChange(t.target.value)},onLock:function(){return e.lockInput()},textData:e.variables,label:r.a.createElement("span",null,"\ud835\udc52 = {"),teacherMode:e.teacherMode,id:"editor-variables"}))))))},ne={onInputChange:function(e){return{type:"SET_VARIABLES_VALUE",value:e}},lockInput:function(){return{type:"LOCK_VARIABLES"}}},ae=Object(s.b)((function(e){return{teacherMode:e.common.teacherMode,variables:e.structure.variables}}),ne)(te);var re=function(e){var t=e.structure,n=e.setDomain,a=e.lockDomain,o=e.teacherMode;return r.a.createElement(B.a,null,r.a.createElement(K,{onChangeSetFunction:n,errorProperty:t.domain.errorMessage,textInputLabel:r.a.createElement("span",null,r.a.createElement("var",null,"D")," = {"),onLockFunction:a,textData:t.domain,teacherMode:o,idName:"language-editor-domain",labelText:"Domain"}))},oe=n(31);function ie(e){var t=e.isInvalid,n=e.className,a=void 0===n?"":n,o=Object(w.a)(e,["isInvalid","className"]);return a=""===a?"custom-select":"".concat(a," custom-select"),t&&(a+=" is-invalid"),r.a.createElement("select",Object.assign({className:a},o))}function se(e){var t=e.structure,n=e.setConstantValue,a=e.structureObject,o=e.teacherMode,i=e.lockConstantValue;return r.a.createElement(B.a,{lg:12},r.a.createElement(U.a,null,r.a.createElement(U.a.Label,null,"Interpretation of individual constants"),Object.keys(t.constants).map((function(e){return r.a.createElement(U.a.Group,{key:e},r.a.createElement(G.a,{size:"sm",className:"has-validation"},r.a.createElement(G.a.Prepend,null,r.a.createElement(G.a.Text,{id:"constant-"+e},r.a.createElement("var",null,"i"),"(",e,") = ")),r.a.createElement(ie,{value:t.constants[e].value,id:"constant-"+e,onChange:function(t){return n(t.target.value,e)},disabled:t.constants[e].locked,isInvalid:t.constants[e].errorMessage.length>0},r.a.createElement("option",{key:"",value:""},"Vyber hodnotu ..."),Object(oe.a)(a.domain).map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),o?r.a.createElement(G.a.Append,null,r.a.createElement(Y,{lockFn:function(){return i(e)},locked:t.constants[e].locked})):null,r.a.createElement(U.a.Control.Feedback,{type:"invalid"},t.constants[e].errorMessage)))}))))}var ce=n(613);function ue(e){var t=Object(oe.a)(e.domain),n=function(n){return r.a.createElement("td",{key:n,className:"checkComponent"},e.type===S?r.a.createElement("input",{type:"checkbox",onChange:function(t){return e.onInputChange(n,e.name,t.target.checked)},checked:e.value.findIndex((function(e){return JSON.stringify(e)===JSON.stringify(n)}))>-1,disabled:e.disabled}):function(e,t,n,a,o,i){var s=t[JSON.stringify(n)];return s||(s=""),r.a.createElement("select",{onChange:function(t){return o(n.concat([t.target.value]),e)},value:s},r.a.createElement("option",{value:""},""),a.map((function(e){return r.a.createElement("option",{key:e,disabled:i,value:e},e)})))}(e.name,e.value,n,t,e.onInputChange,e.disabled))},a=r.a.createElement("tr",null,r.a.createElement("td",null,""),t.map((function(e){return n([e])}))),o=t.map((function(e){return r.a.createElement("tr",{key:e},r.a.createElement("th",{className:"interpretationHead"},e),t.map((function(t){return n([e,t])})))}));return r.a.createElement(ce.a,{bordered:!0,responsive:!0,size:"sm",className:"small"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"interpretationHead"},e.name),t.map((function(e){return r.a.createElement("th",{key:e,className:"interpretationHead"},e)})))),r.a.createElement("tbody",null,1===parseInt(e.arity)?a:o))}var le=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleChange=a.handleChange.bind(Object(l.a)(a)),a}return Object(u.a)(n,[{key:"handleChange",value:function(e){this.setState({value:e.target.value}),function(e,t,n){n.selectionElement[e]=t;for(var a=0;a<n.selectionElement.length;a++)if(!n.selectionElement[a].length>0)return;var r=n.selectionElement.slice();n.onInputChange(r,n.name,!0),n.selectionElement.fill("")}(this.props.index,e.target.value,this.props.props)}},{key:"render",value:function(){var e=this;return r.a.createElement("td",null,r.a.createElement("select",{onChange:function(t){return e.handleChange(t)},value:this.props.props.selectionElement[this.props.index]},r.a.createElement("option",{value:""},""),this.props.domain.map((function(t){return r.a.createElement("option",{key:t,disabled:e.props.props.disabled,value:t},t)}))))}}]),n}(r.a.Component);function de(e){var t=Object(oe.a)(e.domain);void 0===e.selectionElement&&(e=Object.assign({selectionElement:Array(parseInt(e.arity))},e)).selectionElement.fill("");var n,a=function(){return r.a.createElement("tr",null,e.selectionElement.map((function(n,a){return r.a.createElement(le,{key:"select-component"+a,domain:t,index:a,props:e})})))},o=function(){return r.a.createElement("thead",null,r.a.createElement("tr",null,Object(oe.a)(Array(parseInt(e.arity))).map((function(e,t){return r.a.createElement("th",{key:"m"+(t+1),className:"interpretationHead"},r.a.createElement("var",null,"m"),r.a.createElement("sub",null,t+1))}))))};return Array.isArray(e.value)?r.a.createElement(ce.a,{bordered:!0,responsive:!0,size:"sm",className:"small"},o(),(n=e.value,r.a.createElement("tbody",null,n.map((function(n,a){return r.a.createElement("tr",{key:"database-predicate-row"+a},n.map((function(a,o){return r.a.createElement("td",{key:"database-predicate-column"+o},function(e,t,n,a,o,i,s,c){return r.a.createElement("select",{onChange:function(t){return function(e,t,n,a,r){t!==n[a]&&(e(n,r,!1),""!==t&&(n[a]=t,e(n,r,!0)))}(o,t.target.value,n,c,e)},value:s},r.a.createElement("option",{value:""},""),a.map((function(e){return r.a.createElement("option",{key:e,disabled:i,value:e},e)})))}(e.name,e.value,Object(oe.a)(n),t,e.onInputChange,e.disabled,a,o))})))})),a()))):r.a.createElement(ce.a,{bordered:!0,responsive:!0},o(),r.a.createElement("tbody",null,a()))}var me=function(e){var t=e.structure,n=e.predicates,a=e.setPredicateValueText,o=e.lockPredicateValue,i=e.toggleTable,s=e.toggleDatabase,c=e.domain,u=e.setPredicateValueTable,l=e.structureObject,d=e.teacherMode,m=e.lengthOfCol;return r.a.createElement(B.a,{lg:m},r.a.createElement(U.a.Label,null,"Interpretation of predicate symbols"),n.map((function(e){return r.a.createElement(U.a.Group,{key:e},r.a.createElement(H,{errorProperty:t.predicates[e].errorMessage,onChange:function(t){return a(t.target.value,e)},onLock:function(){return o(e)},textData:t.predicates[e],label:r.a.createElement("span",null,r.a.createElement("var",null,"i"),"(",e.split("/")[0],") = {"),teacherMode:d,id:"predicate-"+e,toggleTable:function(){return i(S,e)},toggleDatabase:function(){return s(S,e)},databaseEnabled:t.predicates[e].databaseEnabled,tableEnabled:t.predicates[e].tableEnabled,arity:parseInt(e.split("/")[1]),domain:c}),t.predicates[e].tableEnabled&&c.size>0?r.a.createElement(ue,{name:e,domain:l.domain,arity:l.language.predicates.get(e.split("/")[0]),value:l.iPredicate.get(e)?l.iPredicate.get(e):[],onInputChange:u,type:S,disabled:t.predicates[e].locked}):null,t.predicates[e].databaseEnabled&&c.size>0?r.a.createElement(de,{name:e,domain:l.domain,arity:l.language.predicates.get(e.split("/")[0]),value:l.iPredicate.has(e)?l.iPredicate.get(e):{},onInputChange:u,disabled:t.predicates[e].locked,type:S}):null)})))};var pe=function(e){var t=Object(oe.a)(e.domain),n=Object.values(t),a=r.a.createElement("tbody",null,function e(t,n){if(1===n)return t.map((function(e){return[e]}));var a=[],r=e(t,n-1);return t.forEach((function(e){r.forEach((function(t){a.push([e].concat(t))}))})),a}(n,e.arity).map((function(n,a){return r.a.createElement("tr",{key:"database-function-row"+a},n.map((function(e,t){return r.a.createElement("td",{key:"database-function-row-"+a+"-item-"+t},e)})),r.a.createElement("td",null,function(e,t,n,a,o,i){var s=t[JSON.stringify(n)];return s||(s=""),r.a.createElement("select",{onChange:function(t){return o(n.concat([t.target.value]),e)},value:s},r.a.createElement("option",{value:""},""),a.map((function(e){return r.a.createElement("option",{key:e,disabled:i,value:e},e)})))}(e.name,e.value,Object(oe.a)(n),t,e.onInputChange,e.disabled)))}))),o=r.a.createElement("th",null,e.symbol+"(",Object(oe.a)(Array(e.arity-1)).map((function(e,t){return r.a.createElement("span",{key:"database-function-header-parameter-"+t},r.a.createElement("var",null,"m"),r.a.createElement("sub",null,t+1),", ")})),r.a.createElement("span",{key:"database-function-header-parameter-last"},r.a.createElement("var",null,"m"),r.a.createElement("sub",null,e.arity)),")");return r.a.createElement(ce.a,{bordered:!0,responsive:!0,size:"sm",className:"small"},r.a.createElement("thead",null,r.a.createElement("tr",null,Object(oe.a)(Array(e.arity)).map((function(e,t){return r.a.createElement("th",{key:"database-function-header"+t},r.a.createElement("var",null,"m"),r.a.createElement("sub",null,t+1))})),o)),a)};var he=function(e){var t=e.functions,n=e.structure,a=e.setFunctionValueText,o=e.lockFunctionValue,i=e.toggleTable,s=e.toggleDatabase,c=e.teacherMode,u=e.domain,l=e.structureObject,d=e.setFunctionValueTable,m=e.lengthOfCol;return r.a.createElement(B.a,{lg:m},r.a.createElement(U.a.Label,null,"Interpretation of function symbols"),t.map((function(e){return r.a.createElement(U.a.Group,{key:e},r.a.createElement(H,{errorProperty:n.functions[e].errorMessage,onChange:function(t){return a(t.target.value,e)},onLock:function(){return o(e)},textData:n.functions[e],label:r.a.createElement("span",null,r.a.createElement("var",null,"i"),"(",e.split("/")[0],") = {"),teacherMode:c,id:"function-"+e,toggleTable:function(){return i(C,e)},toggleDatabase:function(){return s(C,e)},databaseEnabled:n.functions[e].databaseEnabled,tableEnabled:n.functions[e].tableEnabled,arity:parseInt(e.split("/")[1]),domain:u}),n.functions[e].tableEnabled&&u.size>0?r.a.createElement(ue,{name:e,domain:l.domain,arity:l.language.functions.get(e.split("/")[0]),value:l.iFunction.has(e)?l.iFunction.get(e):{},onInputChange:d,disabled:n.functions[e].locked,type:C}):null,n.functions[e].databaseEnabled&&u.size>0?r.a.createElement(pe,{name:e,domain:l.domain,arity:l.language.functions.get(e.split("/")[0]),symbol:e.split("/")[0],value:l.iFunction.has(e)?l.iFunction.get(e):{},onInputChange:d,disabled:n.functions[e].locked,type:C}):null)})))},ge=r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"A first-order structure for language \ud835\udcdb is defined in this section. When the language is modified, inputs for interpretations of symbols are updated accordingly."),r.a.createElement("p",{className:"mb-0"},"Syntactic requirements:"),r.a.createElement("ul",{className:"mb-0"},r.a.createElement("li",null,"Elements in all sets (the domain, interpretations of predicates and functions) are comma-separated."),r.a.createElement("li",null,"Strings of any Unicode characters except spaces, comma, and parentheses can be used as domain elements."),r.a.createElement("li",null,"An individual constant is interpreted a domain element picked from a menu."),r.a.createElement("li",null,"A unary predicate symbol is interpreted as a set of domain elements."),r.a.createElement("li",null,"An ",r.a.createElement("var",null,"n"),"-ary predicate symbol for ",r.a.createElement("var",null,"n"),"\xa0>\xa01 is interpreted as a set of ",r.a.createElement("var",null,"n"),"-tuples of domain elements. Each ",r.a.createElement("var",null,"n"),"-tuple is written as"," ",r.a.createElement("code",null,"(elem",r.a.createElement("sub",null,"1"),", \u2026, elem",r.a.createElement("sub",null,r.a.createElement("var",null,"n")),")"),"."),r.a.createElement("li",null,"An ",r.a.createElement("var",null,"n"),"-ary function symbol is interpreted as a set of (",r.a.createElement("var",null,"n"),"+1)-tuples of domain elements, each written as"," ",r.a.createElement("code",null,"(arg",r.a.createElement("sub",null,"1"),", \u2026, arg",r.a.createElement("sub",null,r.a.createElement("var",null,"n")),", value)"),".")));var fe=function(e){var t=e.structure,n=e.setDomain,o=e.lockDomain,i=e.teacherMode,s=e.setConstantValue,c=e.structureObject,u=e.lockConstantValue,l=e.setPredicateValueText,d=e.lockPredicateValue,m=e.toggleTable,h=e.toggleDatabase,g=e.domain,f=e.setPredicateValueTable,v=e.setFunctionValueText,b=e.lockFunctionValue,y=e.setFunctionValueTable,E=Object.keys(t.constants),N=Object.keys(t.predicates),k=Object.keys(t.functions),O=Object(a.useState)(!1),P=Object(x.a)(O,2),T=P[0],C=P[1];return r.a.createElement(D.a,{className:"mb-3"},r.a.createElement(D.a.Header,{as:"h5",className:"d-flex justify-content-between"},r.a.createElement("span",null,"Structure \ud835\udcdc = (",r.a.createElement("var",null,"D"),", ",r.a.createElement("var",null,"i"),")"),r.a.createElement(z,{subject:"language",children:ge,onToggle:C,show:T})),r.a.createElement(D.a.Body,null,r.a.createElement(p.a,null,r.a.createElement(re,{structure:t,setDomain:n,lockDomain:o,teacherMode:i,lengthOfCol:12})),0===E.length?null:r.a.createElement(p.a,null,r.a.createElement(se,{structure:t,teacherMode:i,constants:E,lockConstantValue:u,setConstantValue:s,structureObject:c,lengthOfCol:12})),0===N.length?null:r.a.createElement(p.a,null,r.a.createElement(me,{structureObject:c,structure:t,toggleDatabase:h,teacherMode:i,domain:g,lockPredicateValue:d,predicates:N,setPredicateValueTable:f,setPredicateValueText:l,toggleTable:m,lengthOfCol:12})),0===k.length?null:r.a.createElement(p.a,null,r.a.createElement(he,{toggleTable:m,toggleDatabase:h,domain:g,teacherMode:i,structure:t,structureObject:c,functions:k,lockFunctionValue:b,setFunctionValueTable:y,setFunctionValueText:v,lengthOfCol:12}))))},ve=n(96),be="Language \ud835\udcdb already contains the constant",ye="Language \ud835\udcdb already contains the function symbol",Ee="Language \ud835\udcdb already contains the predicate symbol",Ne=function e(t,n,a,r,o){var i=this;Object(c.a)(this,e),this.language=t,this.domain=new Set,this.iConstant=new Map,this.iPredicate=new Map,this.iFunction=new Map,n.forEach((function(e){i.domain.add(e)})),this.language.constants.forEach((function(e){i.iConstant.set(e,a[e].value)})),this.language.functions.forEach((function(e,t){var n=t+"/"+e;i.iFunction.set(n,{}),void 0!==o[n]&&o[n].parsed.forEach((function(e){var t=e.slice(0,e.length-1),a=e[e.length-1];i.iFunction.get(n)[JSON.stringify(t)]=a}))})),this.language.predicates.forEach((function(e,t){var n=t+"/"+e;i.iPredicate.set(n,[]),void 0!==r[n]&&r[n].parsed.forEach((function(e){i.iPredicate.get(n).push(e)}))}))},ke=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];Object(c.a)(this,e),this.constants=new Set(t),this.functions=new Map(n.map((function(e){var t=e.name,n=e.arity;return[t,parseInt(n)]}))),this.predicates=new Map(a.map((function(e){var t=e.name,n=e.arity;return[t,parseInt(n)]})))}return Object(u.a)(e,[{key:"getLanguage",value:function(){var e=this,t=new Set([].concat(Object(oe.a)(this.constants),Object(oe.a)(this.functions.keys()),Object(oe.a)(this.predicates.keys())));return{isConstant:function(t){return e.constants.has(t)},isFunction:function(t){return e.functions.has(t)},isPredicate:function(t){return e.predicates.has(t)},isVariable:function(e){return!t.has(e)}}}},{key:"checkFunctionArity",value:function(e,t,n){var a=this.functions.get(e);t.length!==a&&n.expected("".concat(a," argument").concat(1==a?"":"s"," to ").concat(e))}},{key:"checkPredicateArity",value:function(e,t,n){var a=this.predicates.get(e);t.length!==a&&n.expected("".concat(a," argument").concat(1==a?"":"s"," to ").concat(e))}},{key:"hasConstant",value:function(e){return this.constants.has(e)}},{key:"hasPredicate",value:function(e){return this.hasInSet(e,this.predicates)}},{key:"hasFunction",value:function(e){return this.hasInSet(e,this.functions)}},{key:"hasInSet",value:function(e,t){var n=e.split("/");return 2!==n.length?t.has(n[0]):!isNaN(parseInt(n[1]))&&(t.has(n[0])&&t.get(n[0]).toString()===n[1].toString())}},{key:"getPredicate",value:function(e){return parseInt(this.predicates.get(e))}}]),e}(),Oe=Object(ve.a)([function(e){return e.language.constants.parsed},function(e){return e.language.functions.parsed},function(e){return e.language.predicates.parsed}],(function(e,t,n){return new ke(e,t,n)})),Pe=Object(ve.a)([Oe,function(e){return e.structure.constants},function(e){return e.structure.functions},function(e){return e.structure.predicates},function(e){return e.structure.domain.parsed}],(function(e,t,n,a,r){return new Ne(e,r,t,a,n)})),Te={setDomain:function(e){return{type:"SET_DOMAIN",value:e}},setConstantValue:h,setPredicateValueText:g,setPredicateValueTable:f,setFunctionValueText:v,setFunctionValueTable:b,toggleTable:O,toggleDatabase:P,lockDomain:y,lockConstantValue:E,lockPredicateValue:N,lockFunctionValue:k},Ce=Object(s.b)((function(e){return{language:e.language,structure:e.structure,structureObject:Pe(e),teacherMode:e.common.teacherMode,domain:Pe(e).domain,diagramModel:e.diagramModel}}),Te)(fe),Se=n(27),je=n(75),Ae=function(e){var t,n=e.onClickAddFunction,a=e.addType;return r.a.createElement(F.a,{variant:"success",title:"Add a new ".concat((t=a,t.toLowerCase())),onClick:function(){return n(a)}},r.a.createElement(_.a,{name:"plus"}),"\xa0Add")},Me=function(e){var t=e.onClick,n=e.gameEnabled,a=e.disabled;return r.a.createElement(F.a,{size:"sm",onClick:function(){return t()},variant:"outline-secondary",active:n,disabled:a,title:"".concat(n?"End":"Start"," Henkin-Hintikka game")},r.a.createElement(_.a,{name:"fas fa-gamepad"}))},we=n(18),xe=n(84);function De(){var e=Object(we.a)(["\n  max-height: 95vh;\n  height: 500px;\n"]);return De=function(){return e},e}var Fe=xe.a.div.attrs({className:"d-flex flex-column\n              position-relative\n              w-100\n              m-0 p-3\n              border"})(De());function Re(){var e=Object(we.a)(["\n  height: 85%;\n  flex: 1 1 auto;\n  display: flex;\n  flex-direction: column-reverse;\n  margin-bottom: 2%;\n  overflow: auto;\n"]);return Re=function(){return e},e}var _e=xe.a.div(Re()),Le=function(e){return r.a.createElement(_e,null,r.a.createElement("div",{className:"d-inline-flex flex-column"},e.children))},Ie=n(614),Ve=n(615),ze=n(158),Be=function(e,t){return"".concat(e,"\xa0\u2208 i(").concat(t,")")},Ue=function(e,t){return"".concat(e,"\xa0\u2209 i(").concat(t,")")},Ge=function(e,t){return"".concat(e,"\xa0= ").concat(t)},Ye=function(e,t){return"".concat(e,"\xa0\u2260 ").concat(t)},We=function(e,t){return"Assign the domain element\xa0".concat(t," to the variable\xa0").concat(e)};function Qe(){var e=Object(we.a)(["\n  font-size: 0.875rem;\n  border-radius: 1rem 0 1rem 1rem;\n"]);return Qe=function(){return e},e}function He(){var e=Object(we.a)(["\n  font-size: 0.875rem;\n  background: #eee;\n  border-radius: 0 1rem 1rem 1rem;\n"]);return He=function(){return e},e}var Ke=xe.a.div.attrs({className:"".concat("d-inline-block mb-2 p-2"," text-body")})(He()),Je=xe.a.div.attrs({className:"".concat("d-inline-block mb-2 p-2"," text-white bg-primary")})(Qe()),qe=function(e){var t=e.onClick,n=e.children,o=Object(a.useState)(!1),i=Object(x.a)(o,2),s=i[0],c=i[1];return r.a.createElement("div",{className:"d-flex flex-row-reverse w-100",onMouseEnter:function(){return c(!0)},onMouseLeave:function(){return c(!1)}},r.a.createElement(Je,null,n),s?r.a.createElement(F.a,{onClick:function(){return t()},size:"sm",className:"text-primary bg-transparent border-0 p-2 mb-2"},r.a.createElement("strong",null,"Change")):null)},Xe=function(){function e(){Object(c.a)(this,e)}return Object(u.a)(e,[{key:"toString",value:function(){}},{key:"eval",value:function(e,t){return null}},{key:"substitute",value:function(e,t,n){}},{key:"getVariables",value:function(){return[]}}]),e}(),Ze=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"toString",value:function(){return""}},{key:"createCopy",value:function(){return new n}},{key:"getType",value:function(e){return""}},{key:"getSubFormulas",value:function(){return[]}},{key:"substitute",value:function(e,t,n){}},{key:"getSubFormulasCommitment",value:function(e){return[]}},{key:"getVariables",value:function(){return[]}}]),n}(Xe),$e=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){var a,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Object(c.a)(this,n),(a=t.call(this)).name=e,a.terms=r,a}return Object(u.a)(n,[{key:"eval",value:function(e,t){var n=[];this.terms.forEach((function(a){n.push(a.eval(e,t))}));var a=e.language.predicates.get(this.name);if(void 0===e.iPredicate.get(this.name+"/"+a))throw"The interpretation of the predicate symbol\xa0".concat(this.name," is not defined");return e.iPredicate.get(this.name+"/"+a).findIndex((function(e){return JSON.stringify(e)===JSON.stringify(n)}))>-1}},{key:"toString",value:function(){for(var e=this.name+"(",t=0;t<this.terms.length;t++)t>0&&(e+=", "),e+=this.terms[t].toString();return e+=")"}},{key:"createCopy",value:function(){return new n(this.name,this.terms.map((function(e){return e.createCopy()})))}},{key:"getType",value:function(e){return"ATOM"}},{key:"getSubFormulas",value:function(){return[]}},{key:"substitute",value:function(e,t,a){return new n(this.name,this.terms.map((function(n){return n.substitute(e,t,a)})))}},{key:"getSubFormulasCommitment",value:function(e){return[]}},{key:"getVariables",value:function(){return this.terms.flatMap((function(e){return e.getVariables()}))}}]),n}(Ze),et=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e,a){var r;return Object(c.a)(this,n),(r=t.call(this)).subLeft=e,r.subRight=a,r}return Object(u.a)(n,[{key:"eval",value:function(e,t){var n=this.subLeft.eval(e,t),a=this.subRight.eval(e,t);return!n||a}},{key:"toString",value:function(){return"(".concat(this.subLeft.toString()," \u2192 ").concat(this.subRight.toString(),")")}},{key:"createCopy",value:function(){return new n(this.subLeft.createCopy(),this.subRight.createCopy())}},{key:"getType",value:function(e){return e?"PLAYER_OPERATOR":"GAME_OPERATOR"}},{key:"getSubFormulas",value:function(){return[this.subLeft,this.subRight]}},{key:"substitute",value:function(e,t,a){return new n(this.subLeft.substitute(e,t,a),this.subRight.substitute(e,t,a))}},{key:"getSubFormulasCommitment",value:function(e){return[!e,e]}},{key:"getVariables",value:function(){return this.subLeft.getVariables().concat(this.subRight.getVariables())}}]),n}(Ze),tt=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,e)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.formula,n=e.index,a=e.goBack,o=t.gameHistory,i=t.variableIndex,s=o.length-1,c=o[s],u=function(e){return function(t,n){return r.a.createElement(Ke,{key:"".concat(e,"gmb").concat(n)},t)}},l=function(e){return function(t,o){return r.a.createElement(qe,{key:"".concat(e,"umb").concat(o),onClick:function(){return a(n,e)}},t)}};return r.a.createElement(Fe,{className:"rounded"},r.a.createElement(Le,null,o.flatMap((function(e,t){return[e.gameMessages.map(u(t)),e.userMessages.map(l(t))]})),this.generateMessage(c,i).map(u(s))),r.a.createElement(U.a.Group,null,this.getChoice(c,i)),this.showVariables(c))}},{key:"showVariables",value:function(e){return this.props.formula.showVariables?0==e.gameVariables.size?r.a.createElement("p",null,"\ud835\udc52 = {\xa0}"):r.a.createElement("p",null,"\ud835\udc52 = { ",Array.from(e.gameVariables).map((function(e){var t=Object(x.a)(e,2);return t[0]+"\xa0\u21a6\xa0"+t[1]})).join(", ")," }"):null}},{key:"toggleVariables",value:function(){var e=this,t=this.props.formula.showVariables?"Hide":"Show";return r.a.createElement(F.a,{size:"sm",variant:"outline-secondary",className:"rounded mr-3",onClick:function(){return e.props.getVariables(e.props.index)}},t," current assignment")}},{key:"chooseCommitment",value:function(e){var t=this;return r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(F.a,{size:"sm",variant:"outline-primary",className:"rounded mr-3",onClick:function(){return t.props.setGameCommitment(t.props.index,!0,e,["True"])}},"True"),r.a.createElement(F.a,{size:"sm",variant:"outline-primary",className:"rounded mr-3",onClick:function(){return t.props.setGameCommitment(t.props.index,!1,e,["False"])}},"False"))}},{key:"chooseFormula",value:function(e,t,n,a){var o=this,i=this.getCommitmentText(t),s=this.getCommitmentText(n),c=e.currentFormula.getSubFormulas(),u=Object(x.a)(c,2),l=u[0],d=u[1],m=[l.toString()+" is "+i],p=[d.toString()+" is "+s];return r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(F.a,{size:"sm",variant:"outline-primary",className:"rounded mr-3",onClick:function(){return o.props.setGameNextFormula(o.props.index,l,t,a,m)}},m),r.a.createElement(F.a,{size:"sm",variant:"outline-primary",className:"rounded mr-3",onClick:function(){return o.props.setGameNextFormula(o.props.index,d,n,a,p)}},p),this.toggleVariables())}},{key:"chooseDomainValue",value:function(e,t,n){var a=this,o="n"+n;return r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(Ie.a,{size:"sm",variant:"outline-primary",className:"rounded mr-3",alignRight:!0,as:Ve.a,title:"Select a domain element"},this.props.domain.map((function(e,n){return r.a.createElement(ze.a.Item,{size:"sm",key:n,eventKey:n,onClick:function(){return a.props.setGameDomainChoice(a.props.index,e,t,[We(o,e)])}},e)}))),this.toggleVariables())}},{key:"chooseOk",value:function(e){var t=this;return r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(F.a,{size:"sm",variant:"outline-primary",className:"rounded mr-3",onClick:function(){return t.props.continueGame(t.props.index,e,["Continue"])}},"Continue"),this.toggleVariables())}},{key:"chooseEndGame",value:function(){var e=this;return r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(F.a,{size:"sm",variant:"outline-primary",className:"rounded mr-3",onClick:function(){return e.props.endGame(e.props.index)}},"Finish game"),this.toggleVariables())}},{key:"getChoice",value:function(e,t){var n=this.generateMessage(e,t);if(null===e.gameCommitment)return this.chooseCommitment(n);switch(e.currentFormula.getType(e.gameCommitment)){case"ATOM":return this.chooseEndGame();case"PLAYER_OPERATOR":var a=e.currentFormula.getSubFormulasCommitment(e.gameCommitment);return this.chooseFormula(e,a[0],a[1],n);case"PLAYER_QUANTIFIER":return this.chooseDomainValue(e,n,t);case"GAME_OPERATOR":case"GAME_QUANTIFIER":return this.chooseOk(n)}}},{key:"generateMessage",value:function(e,t){var n="n"+t,a=[];if(null===e.gameCommitment)return a.push((o=e.currentFormula,"What is your initial assumption about the truth/satisfaction\n    of the formula ".concat(o," by the valuation\xa0\ud835\udc52 in the structure\xa0\u2133?"))),a;var o,i=this.props.structureObject,s=e.currentFormula.getSubFormulas(),c=e.currentFormula.getSubFormulasCommitment(e.gameCommitment);switch(a.push(function(e,t){return"You assume that the formula ".concat(e," is ").concat(t,".")}(e.currentFormula.toString(),this.getCommitmentText(e.gameCommitment))),e.currentFormula.getType(e.gameCommitment)){case"ATOM":var u=this.props.formula.gameHistory[1];return e.gameCommitment===e.currentFormula.eval(i,e.gameVariables)?(a.push(function(e,t,n){return[r.a.createElement("strong",{key:0},"You win!"),"\xa0\ud83c\udf89 The formula ".concat(e," is indeed ").concat(t,", since ").concat(n,".")]}(e.currentFormula,this.getCommitmentText(e.gameCommitment),this.getWinningEvaluatedFormula(e.currentFormula,i,e.gameVariables,e.gameCommitment))),a.push(function(e,t){return"Your initial assumption that the formula ".concat(e," is ").concat(t,"\n    was correct.")}(u.currentFormula,this.getCommitmentText(u.gameCommitment)))):(a.push(function(e,t,n){return[r.a.createElement("strong",{key:0},"You loose!"),"\xa0\ud83d\ude1e The formula ".concat(e," is ").concat(t,", since ").concat(n,".")]}(e.currentFormula,this.getCommitmentText(!e.gameCommitment),this.getLoosingEvaluatedFormula(e.currentFormula,i,e.gameVariables,e.gameCommitment))),u.currentFormula.eval(i,u.gameVariables)===u.gameCommitment?a.push(function(e,t){return[r.a.createElement("strong",{key:0},"You could have won, though."),"\xa0\ud83e\udd14 Your initial assumption\n        that the formula ".concat(e," is ").concat(t," was correct.\n        Find incorrect intermediate answers and correct them!")]}(u.currentFormula,this.getCommitmentText(u.gameCommitment))):a.push(function(e,t){return"Your initial assumption that the formula ".concat(e," is ").concat(t,"\n    was incorrect.")}(u.currentFormula,this.getCommitmentText(u.gameCommitment)))),a;case"PLAYER_OPERATOR":return a.push("Which of the following is the case?"),a.push(function(e,t){return"1. The subformula ".concat(e," is ").concat(t,".")}(s[0],this.getCommitmentText(c[0]))),a.push(function(e,t){return"2. The subformula ".concat(e," is ").concat(t,".")}(s[1],this.getCommitmentText(c[1]))),a;case"GAME_OPERATOR":return a.push(function(e,t){return"Then ".concat(e," is ").concat(t,".")}(e.nextMove.formula,this.getCommitmentText(e.nextMove.commitment))),a;case"PLAYER_QUANTIFIER":var l=e.currentFormula.subFormula.substitute(e.currentFormula.variableName,n);return a.push(function(e,t,n){return"Which domain element should be assigned to the variable\xa0".concat(e,"\n    in order to make formula ").concat(t," ").concat(n,"?")}(n,l,this.getCommitmentText(e.gameCommitment))),a;case"GAME_QUANTIFIER":return a.push(function(e,t,n,a){return"Then the formula ".concat(t," is also ").concat(e,",\n    when we assign the element\xa0").concat(a," to the variable\xa0").concat(n,".")}(this.getCommitmentText(e.nextMove.commitment),e.nextMove.formula,e.nextMove.variables[0],e.nextMove.variables[1])),a}}},{key:"getWinningEvaluatedFormula",value:function(e,t,n,a){return e instanceof $e?a?Be(this.getEvaluatedPredicateFormula(e,t,n),e.name):Ue(this.getEvaluatedPredicateFormula(e,t,n),e.name):a?Ge(e.subLeft.eval(t,n),e.subRight.eval(t,n)):Ye(e.subLeft.eval(t,n),e.subRight.eval(t,n))}},{key:"getLoosingEvaluatedFormula",value:function(e,t,n,a){return e instanceof $e?a?Ue(this.getEvaluatedPredicateFormula(e,t,n),e.name):Be(this.getEvaluatedPredicateFormula(e,t,n),e.name):a?Ye(e.subLeft.eval(t,n),e.subRight.eval(t,n)):Ge(e.subLeft.eval(t,n),e.subRight.eval(t,n))}},{key:"getEvaluatedPredicateFormula",value:function(e,t,n){var a=e.terms.map((function(e){return e.eval(t,n)})).join(", ");return e.terms.length>1?"(".concat(a,")"):a}},{key:"getCommitmentText",value:function(e){return e?"true":"false"}},{key:"getRandom",value:function(e){return Math.floor(Math.random()*e)}}]),n}(r.a.Component),nt={setGameCommitment:function(e,t,n,a){return{type:"SET_GAME_COMMITMENT",index:e,commitment:t,gameMessages:n,userMessages:a}},setGameDomainChoice:function(e,t,n,a){return{type:"SET_GAME_DOMAIN_CHOICE",index:e,value:t,gameMessages:n,userMessages:a}},continueGame:function(e,t,n,a){return{type:"CONTINUE_GAME",index:e,gameMessages:t,userMessages:n}},endGame:function(e){return{type:"END_GAME",index:e}},setGameNextFormula:function(e,t,n,a,r){return{type:"SET_GAME_NEXT_FORMULA",index:e,formula:t,commitment:n,gameMessages:a,userMessages:r}},goBack:function(e,t){return{type:"GO_BACK",index:e,historyIndex:t}},getVariables:function(e){return{type:"GET_VARIABLES",index:e}}},at=Object(s.b)((function(e,t){return{structureObject:Pe(e)}}),nt)(tt),rt=r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"The truth of closed first-order formulas in the structure\xa0\ud835\udcdc and the satisfaction of open first-order formulas by the valuation of variables\xa0\ud835\udc52 in\xa0\ud835\udcdc can be examined in this section."),r.a.createElement("p",null,"The desired/expected truth or satisfaction can be selected from the \u22a8/\u22ad menu below a formula. Structure Explorer checks the correctness of your selection."),r.a.createElement("p",{className:"mb-0"},"Syntactic requirements:"),r.a.createElement("ul",{className:"mb-0"},r.a.createElement("li",null,"All non-logical symbols used in formulas must come from the language \ud835\udcdb and must be used according to their type and arity. All other alphanumerical symbols are treated as variables."),r.a.createElement("li",null,"Formulas must be properly parenthesized."),r.a.createElement("li",null,"The following notation of logical symbols is accepted:",r.a.createElement(ce.a,{size:"sm",striped:!0,className:"my-2 border-bottom"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Symbol"),r.a.createElement("th",null,"Notation"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Equality"),r.a.createElement("td",null," =, \u2250")),r.a.createElement("tr",null,r.a.createElement("td",null,"Non-equality"),r.a.createElement("td",null," !=, ","<>",", /=, \u2260")),r.a.createElement("tr",null,r.a.createElement("td",null,"Negation"),r.a.createElement("td",null," \\neg, \\lnot, -, !, ~, \xac")),r.a.createElement("tr",null,r.a.createElement("td",null,"Conjunction"),r.a.createElement("td",null," \\wedge, \\land, &&, &, /\\, \u2227")),r.a.createElement("tr",null,r.a.createElement("td",null,"Disjunction"),r.a.createElement("td",null," \\vee, \\lor, ||, |, \\/, \u2228")),r.a.createElement("tr",null,r.a.createElement("td",null,"Implication"),r.a.createElement("td",null," \\to, \\limpl, ","->",", \u2192")),r.a.createElement("tr",null,r.a.createElement("td",null,"Equivalence"),r.a.createElement("td",null," \\lequiv, \\leftrightarrow, ","<->",", \u2194\ufe0e")),r.a.createElement("tr",null,r.a.createElement("td",null,"Existential quantifier"),r.a.createElement("td",null," \\exists, \\e, \\E, \u2203")),r.a.createElement("tr",null,r.a.createElement("td",null,"General quantifier"),r.a.createElement("td",null," \\forall, \\a, \\A, \u2200"))))),r.a.createElement("li",null,"The priority of logical symbols:",r.a.createElement("ol",{className:"my-0"},r.a.createElement("li",null,"\u2250, \u2260 (highest priority)"),r.a.createElement("li",null,"\xac, \u2200, \u2203"),r.a.createElement("li",null,"\u2227 (left-associative, i.e., A \u2227 B \u2227 C \u2261 ((A \u2227 B) \u2227 C))"),r.a.createElement("li",null,"\u2228 (left-associative)"),r.a.createElement("li",null,"\u2192 (right-associative, i.e., A \u2192 B \u2192 C \u2261 (A \u2192 (B \u2192 C)))"),r.a.createElement("li",null,"\u2194\ufe0e (non-associative, lowest priority)"))))),ot=r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Denotations of first-order terms in the structure \ud835\udcdc for the valuation of variables \ud835\udc52 can be examined in this section."),r.a.createElement("p",null,"The desired/expected denotation can be selected from the menu below the term. Structure Explorer checks the correctness of your selection."),r.a.createElement("p",{className:"mb-0"},"Syntactic requirements:"),r.a.createElement("ul",{className:"mb-0"},r.a.createElement("li",null,"All individual constants and function symbols used in the terms must come from the language \ud835\udcdb and must be used according to their type and arity. All other alphanumerical symbols are treated as variables."),r.a.createElement("li",null,"Terms must be properly parenthesized.")));function it(e,t){return[{items:e,expressionType:j,answers:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("option",{key:"unselected",value:""},"\u22a8/\u22ad?"),r.a.createElement("option",{key:"true",value:"true"},"\u22a8"),r.a.createElement("option",{key:"false",value:"false"},"\u22ad"))},help:rt,panelTitle:"Truth of formulas in \ud835\udcdc"},{items:t,expressionType:A,answers:function(e){return function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("option",{value:""},"Select a domain element\u2026"),e.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))}(e)},help:ot,panelTitle:"Denotation of terms in \ud835\udcdc"}]}var st=function(e){var t,n=Object(a.useState)((t={},Object(je.a)(t,j,!1),Object(je.a)(t,A,!1),t)),o=Object(x.a)(n,2),i=o[0],s=o[1];return r.a.createElement(r.a.Fragment,null,it(e.formulas,e.terms).map((function(t){return r.a.createElement(D.a,{className:"mb-3",key:t.expressionType},r.a.createElement(D.a.Header,{as:"h5",className:"d-flex justify-content-between"},r.a.createElement("span",null,t.panelTitle),r.a.createElement(z,{subject:t.expressionType.toLowerCase(),show:i[t.expressionType],onToggle:(n=[t.expressionType],function(e){return s((function(t){return Object(Se.a)({},t,Object(je.a)({},n,e))}))})},t.help)),r.a.createElement(D.a.Body,null,t.items.map((function(n,a){return r.a.createElement(U.a,{key:"expression-form-"+a},r.a.createElement(U.a.Group,null,r.a.createElement(G.a,{size:"sm",className:"mb-1 has-validation"},r.a.createElement(G.a.Prepend,null,r.a.createElement(G.a.Text,{id:t.expressionType.toLowerCase()+"-"+a},M[t.expressionType],r.a.createElement("sub",null,a+1))),r.a.createElement(U.a.Control,{type:"text",value:n.value,onChange:function(n){return e.onInputChange(n.target.value,a,t.expressionType)},id:t.expressionType.toLowerCase()+"-"+a,disabled:n.inputLocked,isInvalid:n.errorMessage.length>0,onFocus:function(){e.diagramModel.clearSelection()}}),r.a.createElement(G.a.Append,null,r.a.createElement(F.a,{variant:"outline-danger",onClick:function(){return e.removeExpression(t.expressionType,a)}},r.a.createElement(_.a,{name:"fas fa-trash"})),e.teacherMode?r.a.createElement(Y,{lockFn:function(){return e.lockExpressionValue(t.expressionType,a)},locked:n.inputLocked}):null),r.a.createElement(U.a.Control.Feedback,{type:"invalid"},n.errorMessage)),r.a.createElement(U.a.Row,{className:"align-items-center"},r.a.createElement(B.a,{xs:"auto",className:"mb-1"},r.a.createElement(G.a,{size:"sm"},r.a.createElement(G.a.Prepend,null,r.a.createElement(G.a.Text,{as:"label",for:t.expressionType.toLowerCase()+"-answer-"+a},t.expressionType===A?r.a.createElement(r.a.Fragment,null,M[t.expressionType],r.a.createElement("sub",null,a+1),r.a.createElement("sup",null,"\ud835\udcdc"),"[\ud835\udc52] ="):"\ud835\udcdc")),r.a.createElement(U.a.Control,{as:"select",value:n.answerValue,onChange:function(n){return e.setExpressionAnswer(t.expressionType,n.target.value,a)},id:t.expressionType.toLowerCase()+"-answer-"+a,disabled:n.answerLocked,className:"custom-select"},t.answers(e.domain)),t.expressionType===A?null:r.a.createElement(G.a.Append,null,r.a.createElement(G.a.Text,{id:t.expressionType.toLowerCase()+"-answer-"+a},"\ud835\udf4b",r.a.createElement("sub",null,a+1),"[\ud835\udc52]")),e.teacherMode?r.a.createElement(G.a.Append,null,r.a.createElement(Y,{lockFn:function(){return e.lockExpressionAnswer(t.expressionType,a)},locked:n.answerLocked})):null)),r.a.createElement(B.a,{className:"pr-0 text-nowrap mb-1"},""!==n.answerValue?n.answerValue===n.expressionValue?r.a.createElement("strong",{className:"text-success pr-0"},r.a.createElement(_.a,{name:"check"}),r.a.createElement("span",{className:"d-none d-sm-inline"},"\xa0Correct")):r.a.createElement("strong",{className:"text-danger"},r.a.createElement(_.a,{name:"times"}),r.a.createElement("span",{className:"d-none d-sm-inline"},"\xa0Incorrect")):null),r.a.createElement(B.a,{className:"pr-0 mb-1"},t.expressionType===j?r.a.createElement(Me,{onClick:function(){return e.initiateGame(a)},gameEnabled:n.gameEnabled,disabled:n.errorMessage.length>0||""===n.value}):null)),n.gameEnabled&&0===n.errorMessage.length?r.a.createElement(at,{index:a,formula:n,domain:e.domain}):null))})),r.a.createElement(Ae,{onClickAddFunction:e.addExpression,addType:t.expressionType})));var n})))},ct={onInputChange:function(e,t,n){return{type:"CHECK_SYNTAX",value:e,index:t,expressionType:n}},addExpression:function(e){return{type:"ADD_EXPRESSION",expressionType:e}},removeExpression:function(e,t){return{type:"REMOVE_EXPRESSION",expressionType:e,index:t}},setExpressionAnswer:function(e,t,n){return{type:"SET_EXPRESSION_ANSWER",expressionType:e,answer:t,index:n}},lockExpressionValue:function(e,t){return{type:"LOCK_EXPRESSION_VALUE",expressionType:e,expressionIndex:t}},lockExpressionAnswer:function(e,t){return{type:"LOCK_EXPRESSION_ANSWER",expressionType:e,expressionIndex:t}},initiateGame:function(e){return{type:"INITIATE_GAME",index:e}}},ut=Object(s.b)((function(e,t){return{formulas:e.expressions.formulas,terms:e.expressions.terms,domain:Object(oe.a)(Pe(e).domain),teacherMode:e.common.teacherMode,diagramModel:t.diagramModel}}),ct)(st),lt=n(305),dt=n.n(lt),mt=function(e){e.minSize;var t=Object(w.a)(e,["minSize"]);return r.a.createElement("div",t)},pt=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={width:window.innerWidth},a.updateDimensions=function(){a.setState({width:window.innerWidth})},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.syncMathState(),window.addEventListener("resize",this.updateDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions)}},{key:"isSplitVertically",value:function(){return this.state.width>991.9}},{key:"paneMinSize",value:function(){return this.isSplitVertically()?"240px":"80px"}},{key:"render",value:function(){return r.a.createElement(dt.a,{split:this.isSplitVertically()?"vertical":"horizontal",allowResize:!0,className:"split-pane",resizerStyle:{background:"white"},paneStyle:{background:"white"}},r.a.createElement(mt,{minSize:this.paneMinSize(),className:"overflow-auto vh-pane-left"},r.a.createElement($,null),r.a.createElement(Ce,null),r.a.createElement(ae,null)),r.a.createElement(mt,{minSize:this.paneMinSize(),className:"overflow-auto vh-pane-right"},r.a.createElement(ut,{diagramModel:this.props.diagramModel})))}}]),n}(r.a.Component),ht={syncMathState:function(){return{type:"SYNC_MATH_STATE"}}},gt=Object(s.b)((function(){return{}}),ht)(pt),ft=n(616),vt=n(617);var bt=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={loading:!1,fileData:null},a._onGenerate=a._onGenerate.bind(Object(l.a)(a)),a._donePreparing=a._donePreparing.bind(Object(l.a)(a)),a._onDownload=a._onDownload.bind(Object(l.a)(a)),a}return Object(u.a)(n,[{key:"_onGenerate",value:function(){this.setState({loading:!0,fileData:null}),this.props.genFile(this._donePreparing)}},{key:"_donePreparing",value:function(e){this.setState({loading:!1,fileData:e})}},{key:"_onDownload",value:function(){var e=this.props.fileData||(this.props.async?this.state.fileData:this.props.genFile());if(!e)return!1;var t=new Blob([e.contents],{type:e.mime});!function(e,t){var n=document.createElement("a");"string"===typeof n.download?(document.body.appendChild(n),n.download=t,n.href=e,n.click(),document.body.removeChild(n)):window.location.replace(e)}(URL.createObjectURL(t),e.filename),this.props.onDownloaded&&this.props.onDownloaded()}},{key:"render",value:function(){if(!this.props.genFile&&!this.props.fileData)return r.a.createElement("em",null,"Invalid configuration for download button");var e=this.props.style,t="DownloadButton "+(this.props.className||"");if(this.props.fileData||!this.props.async||this.state.fileData){var n=this.props.downloadTitle;return"function"===typeof n&&(n=n(this.props.fileData||this.state.fileData)),r.a.createElement("button",{style:e,title:this.props.title,onClick:this._onDownload,className:t},r.a.createElement(_.a,{name:"fas fa-save"}),"\xa0Export")}return this.state.loading?r.a.createElement("button",{style:e,className:t+" DownloadButton-loading"},this.props.loadingTitle):r.a.createElement("button",{style:e,onClick:this._onGenerate,className:t+" DownloadButton-generate"},this.props.generateTitle)}}]),n}(r.a.Component);bt.defaultProps={async:!1,downloadTitle:"Download",generateTitle:"Generate file",loadingTitle:"Loading..."};var yt=bt,Et=function(e){var t=e.modalShowState,n=e.setModalShowState,a=e.setExerciseNameState,o=e.exportState;return r.a.createElement(vt.a,{dialogClassName:"no-border-radius",show:t,onHide:function(){return n(!1)}},r.a.createElement(vt.a.Header,null,r.a.createElement(vt.a.Title,null,"Export exercise")),r.a.createElement(vt.a.Body,null,r.a.createElement("div",{className:"form-inline"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"exercise-name"},"Exercise name: "),r.a.createElement("input",{type:"text",className:"form-control",id:"exercise-name",placeholder:"structure",onChange:function(e){return a(e.target.value)}})))),r.a.createElement(vt.a.Footer,null,r.a.createElement(yt,{genFile:o,title:"Save",className:"btn btn-success"}),r.a.createElement(F.a,{variant:"secondary",title:"Cancel",onClick:function(){return n(!1)}},r.a.createElement(_.a,{name:"fas fa-window-close"}),"\xa0Cancel")))},Nt=r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Vrcholy sa do grafu umiest\u0148uj\xfa tahan\xedm alebo klikan\xedm na ikonu z panelu. Pri \u0165ahan\xed je mo\u017en\xe9 ur\u010di\u0165 presn\xfa polohu vrcholu, pri kliknut\xed bude ma\u0165 vrchol n\xe1hodn\xfa poz\xedciu. V grafe je mo\u017en\xe9 umiestni\u0165 4 typy vrcholov. Prv\xfd typ vrcholu predstavuje prvok dom\xe9ny. Druh\xfd predstavuje kon\u0161tantu. Tret\xed predstavuje tern\xe1rny (3) vz\u0165ah. \u0160tvrt\xfd predstavuje quatern\xe1rny (4) vz\u0165ah."),r.a.createElement("p",null,"Graf sa ovl\xe1da dvomi re\u017eimami. Pohybovac\xed re\u017eim (",r.a.createElement("code",null,"P"),") dovo\u013euje pres\xfava\u0165 alebo maza\u0165 jednotliv\xe9 vrcholy. Pre ostatn\xe9 akcie ako s\xfa prid\xe1vanie predik\xe1tov a funkci\xed, zmena mien vrcholov alebo na vytv\xe1ranie hr\xe1n sl\xfa\u017ei Editovac\xed re\u017eim (",r.a.createElement("code",null,"E"),"). Medzi t\xfdmito re\u017eimami sa d\xe1 meni\u0165 stla\u010den\xedm pr\xedslu\u0161n\xfdch tla\u010didiel alebo stla\u010den\xedm kl\xe1ves ",r.a.createElement("code",null,"P")," a ",r.a.createElement("code",null,"E"),". Okrem toho je mo\u017en\xe9 vyu\u017ei\u0165 kl\xe1vesu",r.a.createElement("code",null,";"),",ktorou je mo\u017en\xe9 prep\xedna\u0165 medzi jednotliv\xfdmi re\u017eimami. Nad\xedden\xedm my\u0161ou nad prvky grafu sa v\xe1m zobraz\xed n\xe1poveda k n\xedm (resp. hl\xe1\u0161ka pre\u010do nejde dan\xe1 akcia vykona\u0165)."),r.a.createElement("p",null,"Dvojklikom na n\xe1zov vrcholu sa prepne n\xe1zov na input okno. Do tohto okna je mo\u017en\xe9 zada\u0165 nov\xfd n\xe1zov. Nov\xfd n\xe1zov mus\xed spl\u0148a\u0165 podmienky, teda nesmie obsahova\u0165 zak\xe1zan\xe9 znaky. V pr\xedpade pou\u017eitia zak\xe1zan\xfdch vz\u0165ahov sa input okno rozsvieti na \u010derveno. Medzery v input okne s\xfa ignorovan\xe9 a berie sa slovo beznich. N\xe1zov sa akceptuje vybrat\xedm in\xe9ho prvky grafu alebo kliknut\xedm do pl\xe1tna. Okrem toho je mo\u017en\xe9 meno akceptova\u0165 aj tla\u010didlom ",r.a.createElement("code",null,"ENTER"),". V pr\xedpade ak pou\u017e\xedvate\u013e chce zru\u0161i\u0165 premenovanie a vr\xe1ti\u0165 p\xf4vodn\xe9 meno tak na to sl\xfa\u017ei tla\u010didlo ",r.a.createElement("code",null,"ESC"),". To ist\xe9 sa stane aj ked sa pou\u017e\xedvate\u013e pok\xfasi ulo\u017ei\u0165 zl\xe9 meno - vr\xe1ti sa p\xf4vodn\xe9 meno."),r.a.createElement("p",null,"Kon\u0161tanta smie ma\u0165 maxim\xe1lne jeden uzol. Ak pou\u017e\xedvate\u013e sa pok\xfasi pripoji\u0165 nov\xfdm uzlom in\xfd vrchol predstavuj\xfaci prvok dom\xe9ny tak sa p\xf4vodn\xfd uzol zma\u017ee. Uzol kon\u0161tanty je mo\u017en\xe9 pripoji\u0165 iba do vrcholu, ktor\xfd predstavuje prvok dom\xe9ny."),r.a.createElement("p",null,"Miesto, kde sa nach\xe1dza n\xe1zov vrcholu sl\xfa\u017ei na vytv\xe1ranie a tahanie uzlov. Bin\xe1rne vz\u0165ahy medzi dvomi vrcholmi sa vytv\xe1raj\xfa \u0165ahan\xedm uzlu z jedn\xe9ho vrcholu do druh\xe9ho. Bin\xe1rn\xfd vz\u0165ah do seba sam\xe9ho je mo\u017en\xe9 vytvori\u0165 \u0165ahan\xedm uzlu z n\xe1zvu vrcholu do tla\u010didla na otv\xe1ranie/zatv\xe1ranie rozba\u013eovacej ponuky."),r.a.createElement("p",null,"Graf nedovoluje prida\u0165 funkciu do vrcholu ak by mal nasta\u0165 stav, \u017ee funkcia by bola viackr\xe1t definovan\xe1 pre rovnak\xe9 parametre. V takom pr\xedpade bu\u010f nejde v\xf4bec dan\xfa funkciu prida\u0165 a tla\u010didlo na pridanie je vypnut\xe9 alebo ak ide o bin\xe1rny vz\u0165ah tak v \u0148om m\xf4\u017ee nasta\u0165 stav, \u017ee zaradenej funkci\xed v zozname nejde zmeni\u0165 smer (resp. je mo\u017en\xe9 vybera\u0165 iba z obmedzen\xe9ho po\u010dtu smerov). \u0160tandardne sa v bin\xe1rnom vz\u0165ahu pri pridan\xed predik\xe1tu alebo funkcie prid\xe1 tento prvok v oboch smeroch. Ak v r\xe1mci funkcie nie je mo\u017en\xe9 prida\u0165 obidva smery, tak sa prid\xe1 ten, ktor\xfd je dostupn\xfd. Pre tern\xe1rne a v\xe4\u010d\u0161ie vrcholy plat\xed, \u017ee nejde vytvori\u0165 dva tak\xe9to vrcholy, ktor\xe9 by mali rovnak\xfa kombin\xe1ciu parametrov. V takom pr\xedpade ak sa pou\u017e\xedvate\u013e pok\xfasi spoji\u0165 posledn\xfd uzol, tak tento uzol bude zmazan\xfd. N\xe1sledne pokia\u013e m\xe1me tern\xe1rny a v\xe4\u010d\u0161\xed vrchol (vrchol predstavuj\xfaci v\xe4\u010d\u0161\xed vz\u0165ah) a s\xfa v \u0148om zadefinovan\xe9 nejak\xe9 funkcie, ale nie s\xfa spojen\xe9 v\u0161etky miesta, kde smeruj\xfa uzly, tak v takom pr\xedpade ak by mal pri spojen\xed v\u0161etk\xfdch uz\u013eov vznikn\xfa\u0165 probl\xe9m, \u017ee funkcie je definovan\xe1 viackr\xe1t pre dan\xe9 parametre, tak sa funkcia vyma\u017ee zo zoznamu tohto vrcholu.")),kt=function(e){e.setCollapseHelpGraphButton,e.collapseHelpGraphButton;var t=Object(a.useState)(!1),n=Object(x.a)(t,2),o=n[0],i=n[1];return r.a.createElement(z,{subject:"language",label:"Graph help",children:Nt,onToggle:i,show:o,size:"md"})},Ot=function(e){var t=e.clearGraphSelection,n=e.exportState,a=e.setExerciseNameState,o=e.modalShowState,i=e.diagramToggledState,s=(e.teacherModeState,e.setDiagramToggledState),c=e.setModelShowState,u=e.importState;e.setTeacherModeState;return r.a.createElement(ft.a,null,r.a.createElement(Ve.a,{className:"mr-2"},r.a.createElement(F.a,{variant:"outline-primary",title:"Switch to set view",className:i?"":" active",onClick:function(){s(!1)}},r.a.createElement("strong",null,"{\xa0}"),r.a.createElement("span",{className:"d-none d-sm-inline"},"\xa0Sets")),r.a.createElement(F.a,{variant:"outline-primary",title:"Switch to graph view",className:i?" active":"",onClick:function(){return s(!0)}},r.a.createElement(_.a,{name:"fas fa-project-diagram"}),r.a.createElement("span",{className:"d-none d-sm-inline"},"\xa0Graph"))),r.a.createElement(Ve.a,{className:"mr-2"},r.a.createElement(F.a,{size:"md",variant:"secondary",title:"Export this exercise",onClick:function(){c(!0),t()}},r.a.createElement(_.a,{name:"fas fa-file-export"}),r.a.createElement("span",{className:"d-none d-sm-inline"},"\xa0Export")),r.a.createElement(F.a,{variant:"secondary",title:"Import an exercise",onClick:function(){return document.getElementById("uploadInput").click()}},r.a.createElement(_.a,{name:"fas fa-file-import"}),r.a.createElement("input",{id:"uploadInput",type:"file",name:"jsonFile",onChange:function(e){u(e)},hidden:!0,style:{display:"none"}}),r.a.createElement("span",{className:"d-none d-sm-inline"},"\xa0Import"))),i?r.a.createElement(Ve.a,{className:"mr-2"},r.a.createElement(kt,null)):null,r.a.createElement(Et,{exportState:n,modalShowState:o,setExerciseNameState:a,setModalShowState:c}))},Pt=n(15);function Tt(){var e=Object(we.a)(["\nbackground: white !important;\n"]);return Tt=function(){return e},e}var Ct=Pt.default.div(Tt()),St=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return a.createElement(Ct,null,this.props.children)}}]),n}(a.Component);function jt(){var e=Object(we.a)(["\n\t\tcursor: pointer;\n\t\twidth:65%;\n\t\tmargin: auto;\n\t\tmargin-top:0.8em;\n\t\tmargin-bottom:0.8em;\n\t"]);return jt=function(){return e},e}var At=Pt.default.div(jt()),Mt=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,e)}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return a.createElement(At,{title:this.props.title,color:this.props.color,draggable:!0,onDragStart:function(t){t.dataTransfer.setData("storm-graph_view-node",JSON.stringify(e.props.model))},onClick:function(t){e.props.clickFunction(e.props.element,JSON.stringify(e.props.model),e.props.reduxProps)},className:"tray-item"},this.props.children)}}]),n}(a.Component),wt=n(28);function xt(){var e=Object(we.a)(["\n\t\theight: 100%;\n\t\tbackground-color:white !important;\n\t\tbackground-size: 50px 50px;\n\t\tdisplay: flex;\n\t\t/*border: 1px solid black;*/\n\n\t\t> * {\n\t\t\theight: 100%;\n\t\t\twidth: 100%;\n\t\t}\n\t\tbackground-image: linear-gradient(\n\t\t\t\t0deg,\n\t\t\t\ttransparent 24%,\n\t\t\t\t"," 25%,\n\t\t\t\t"," 26%,\n\t\t\t\ttransparent 27%,\n\t\t\t\ttransparent 74%,\n\t\t\t\t"," 75%,\n\t\t\t\t"," 76%,\n\t\t\t\ttransparent 77%,\n\t\t\t\ttransparent\n\t\t\t),\n\t\t\tlinear-gradient(\n\t\t\t\t90deg,\n\t\t\t\ttransparent 24%,\n\t\t\t\t"," 25%,\n\t\t\t\t"," 26%,\n\t\t\t\ttransparent 27%,\n\t\t\t\ttransparent 74%,\n\t\t\t\t"," 75%,\n\t\t\t\t"," 76%,\n\t\t\t\ttransparent 77%,\n\t\t\t\ttransparent\n\t\t\t);\n\t"]);return xt=function(){return e},e}var Dt=Pt.default.div(xt(),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.color})),Ft=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return a.createElement(Dt,{background:this.props.background||"rgb(60, 60, 60)",color:this.props.color||"rgba(0,0,0, 0.15)"},this.props.children)}}]),n}(a.Component),Rt=n(20),_t=n(37),Lt=n(41),It=n(26),Vt=n.n(It),zt=n(22),Bt=n.n(zt),Ut=n(36),Gt=n(53),Yt=r.a.createElement(_.a,{name:"fas fa-plus"}),Wt=r.a.createElement(_.a,{name:"fas fa-times"}),Qt="T",Ht=n(49);function Kt(e,t,n,a){var r=Oe(n.store.getState());if(r.constants&&r.constants.has(e))return!1;var o="P"===a?r.functions:r.predicates;if(o&&o.has(e))return!1;var i="P"===a?r.predicates:r.functions;if(i){var s,c=Object(Rt.a)(i.entries());try{for(c.s();!(s=c.n()).done;){var u=Object(x.a)(s.value,2),l=u[0],d=u[1];if(l===e)return d.toString()===t}}catch(m){c.e(m)}finally{c.f()}}return!0}function Jt(e,t,n,a){var r=Pe(a.store.getState()).iFunction;if(r.has(n))for(var o=0,i=Object.entries(r.get(n));o<i.length;o++){var s=Object(x.a)(i[o],2),c=s[0],u=s[1];if(c===JSON.stringify(e))return u!==t}return!1}function qt(e,t){t.getModel().clearSelection(),e.setSelected(!0),t.repaintCanvas()}function Xt(e,t,n){try{if(""==e.trim()||e.includes(","))throw Error("no or multiple identifiers");return n(e),t(!1),!1}catch(a){return t(!0),!0}}function Zt(e,t,n,a,r){var o=a.store.getState().diagramState;e!==t?0!==t.length?function(e,t,n){return e.has(t)?(n(!0),!0):(n(!1),!1)}("unbinary"===r?o.domainNodes:o.constantNodes,t,n)||("unbinary"===r?function(e,t){Xt(e,t,Ht.parseDomain)}(t,n):function(e,t){Xt(e,t,Ht.parseConstants)}(t,n)):n(!0):n(!1)}function $t(e,t,n,a){var r,o=new Set,i=Oe(t.store.getState()),s="P"===a?i.predicates:i.functions,c=Object(Rt.a)(s.entries());try{for(c.s();!(r=c.n()).done;){var u=Object(x.a)(r.value,2),l=u[0];u[1].toString()!==e||n.has(l)||o.add(l)}}catch(d){c.e(d)}finally{c.f()}return o}function en(e,t,n){var a,r=0,o=Oe(n.store.getState()),i="P"===t?o.predicates:o.functions,s=Object(Rt.a)(i.entries());try{for(s.s();!(a=s.n()).done;){var c=Object(x.a)(a.value,2),u=c[0];c[1].toString()===e&&r<u.length&&(r=u.length)}}catch(l){s.e(l)}finally{s.f()}return r}function tn(e,t,n,a,r,o){if(e){var i=en(r,"P",n.getReduxProps()),s=0;"0"!==o&&(s=en(o,"F",n.getReduxProps())),a<i&&(a=i),a<s&&(a=s),t>a&&(a=t)}return a}var nn=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;return Object(c.a)(this,n),(e=t.call(this,Object(Se.a)({},a,{offsetY:0,type:"binary",reduxProps:r,name:o}))).predicates=void 0,e.functions=void 0,e.editable=void 0,e.changeCounter=void 0,e.predicates=new Map,e.functions=new Map,e.editable=!0,e.changeCounter=0,e.registerEvents(),e}return Object(u.a)(n,[{key:"registerEvents",value:function(){var e=this;this.registerListener({entityRemoved:function(){e.removeLabelFromMathView()}})}},{key:"getSourceDomainNode",value:function(){return this.getParent().getSourcePort().getNode()}},{key:"getTargetDomainNode",value:function(){return this.getParent().getTargetPort().getNode()}},{key:"getNodeCombinationKey",value:function(){return[this.getSourceDomainNode().getNodeName(),this.getTargetDomainNode().getNodeName()].join(",")}},{key:"getReversedNodeCombinationKey",value:function(){return[this.getTargetDomainNode().getNodeName(),this.getSourceDomainNode().getNodeName()].join(",")}},{key:"clearPredicates",value:function(){this.getPredicates().clear()}},{key:"clearFunctions",value:function(){this.getFunctions().clear()}},{key:"removeLabelFromMathView",value:function(){var e,t=Object(Rt.a)(this.predicates.entries());try{for(t.s();!(e=t.n()).done;){var n=Object(x.a)(e.value,2),a=n[0],r=n[1];this.getReduxProps().removeBinaryPredicate(a,this.getParent().getSourcePort().getNode().getNodeName(),this.getParent().getTargetPort().getNode().getNodeName(),r)}}catch(l){t.e(l)}finally{t.f()}var o,i=Object(Rt.a)(this.functions.entries());try{for(i.s();!(o=i.n()).done;){var s=Object(x.a)(o.value,2),c=s[0],u=s[1];this.getReduxProps().removeUnaryFunction(c,this.getParent().getSourcePort().getNode().getNodeName(),this.getParent().getTargetPort().getNode().getNodeName(),u)}}catch(l){i.e(l)}finally{i.f()}}},{key:"setLabel",value:function(e){this.options.label=e}},{key:"getName",value:function(){return this.options.name}},{key:"getPredicates",value:function(){return this.predicates}},{key:"getFunctions",value:function(){return this.functions}},{key:"setLockedParent",value:function(e){this.getParent().setLocked(e)}},{key:"getReduxProps",value:function(){return this.getOptions().reduxProps}},{key:"addPredicate",value:function(e){e=e.replace(/\s/g,""),this.predicates.has(e)||(this.addBinaryPredicateToSet(e),this.getReduxProps().addBinaryPredicate(e,this.getParent().getSourcePort().getNode().getNodeName(),this.getParent().getTargetPort().getNode().getNodeName(),this.predicates.get(e)))}},{key:"addFunction",value:function(e){if(e=e.replace(/\s/g,""),!this.functions.has(e)){this.addUnaryFunctionToSet(e);var t=Jt(this.getNodeParameters("F"),this.getFunctionValue("F"),e+"/1",this.getReduxProps()),n=Jt(this.getNodeParameters(Qt),this.getFunctionValue(Qt),e+"/1",this.getReduxProps());t?this.setLanguageElementDirection(e,Qt,this.functions):n&&this.setLanguageElementDirection(e,"F",this.functions),this.getReduxProps().addUnaryFunction(e,this.getParent().getSourcePort().getNode().getNodeName(),this.getParent().getTargetPort().getNode().getNodeName(),this.functions.get(e))}}},{key:"addBinaryPredicateToSet",value:function(e){this.predicates.set(e,"F"),this.increaseChangeCounter()}},{key:"addUnaryFunctionToSet",value:function(e){this.functions.set(e,"F"),this.increaseChangeCounter()}},{key:"addUnaryFunctionToSetWithDirection",value:function(e,t){this.functions.set(e,t),this.increaseChangeCounter()}},{key:"addBinaryPredicateToSetWithDirection",value:function(e,t){this.predicates.set(e,t),this.increaseChangeCounter()}},{key:"increaseChangeCounter",value:function(){this.changeCounter+=1}},{key:"isEditable",value:function(){return this.editable}},{key:"removeBinaryPredicateFromSet",value:function(e){this.predicates.delete(e),this.increaseChangeCounter()}},{key:"removeUnaryFunctionFromSet",value:function(e){this.functions.delete(e),this.increaseChangeCounter()}},{key:"removeFunction",value:function(e){this.functions.has(e)&&(this.getReduxProps().removeUnaryFunction(e,this.getParent().getSourcePort().getNode().getNodeName(),this.getParent().getTargetPort().getNode().getNodeName(),this.functions.get(e)),this.removeUnaryFunctionFromSet(e))}},{key:"removePredicate",value:function(e){this.predicates.has(e)&&(this.getReduxProps().removeBinaryPredicate(e,this.getParent().getSourcePort().getNode().getNodeName(),this.getParent().getTargetPort().getNode().getNodeName(),this.predicates.get(e)),this.removeBinaryPredicateFromSet(e))}},{key:"changeDirection",value:function(e,t,n){"B"===t?n.set(e,"F"):"F"===t?n.set(e,Qt):n.set(e,"B")}},{key:"setLanguageElementDirection",value:function(e,t,n){n.set(e,t)}},{key:"getNodeParameters",value:function(e){return"F"===e?[this.getSourceDomainNode().getNodeName()]:e===Qt?[this.getTargetDomainNode().getNodeName()]:null}},{key:"getFunctionValue",value:function(e){return"F"===e?this.getTargetDomainNode().getNodeName():e===Qt?this.getSourceDomainNode().getNodeName():null}},{key:"changeDirectionOfBinaryRelation",value:function(e,t,n){var a="P"===n?this.getPredicates():this.getFunctions();if("P"===n)this.changeDirection(e,t,a);else for(var r=t;;){if(this.changeDirection(e,r,a),(r=a.get(e))===t)return void this.setLanguageElementDirection(e,t,a);if(!("B"!==r?Jt(this.getNodeParameters(r),this.getFunctionValue(r),e+"/1",this.getReduxProps()):Jt(this.getNodeParameters("F"),this.getFunctionValue("F"),e+"/1",this.getReduxProps())||Jt(this.getNodeParameters(Qt),this.getFunctionValue(Qt),e+"/1",this.getReduxProps())))break}this.increaseChangeCounter(),this.getReduxProps().changeDirectionOfBinaryRelation(e,this.getParent().getSourcePort().getNode().getNodeName(),this.getParent().getTargetPort().getNode().getNodeName(),a.get(e),n)}},{key:"changeEditableState",value:function(e){this.editable=e}},{key:"deserialize",value:function(e){Object(Lt.a)(Object(_t.a)(n.prototype),"deserialize",this).call(this,e),this.options.label=e.data.label,this.editable=e.data.editable,this.changeCounter=e.data.changeCounter}},{key:"serialize",value:function(){return Object(Se.a)({},Object(Lt.a)(Object(_t.a)(n.prototype),"serialize",this).call(this),{label:this.options.label,editable:this.editable,changeCounter:this.changeCounter})}}]),n}(Ut.LabelModel),an=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:It.PortModelAlignment.LEFT;return Object(c.a)(this,n),t.call(this,{type:"nary",name:e,alignment:a})}return Object(u.a)(n,[{key:"createLinkModel",value:function(){return 0===this.getMaximumLinks()?null:new ln}},{key:"canLinkToPort",value:function(e){return e.getNode()instanceof mn&&e.getName()!==Yt}}]),n}(It.PortModel),rn=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,{type:"constant",name:e,alignment:It.PortModelAlignment.BOTTOM})}return Object(u.a)(n,[{key:"createLinkModel",value:function(){return 0===this.getMaximumLinks()?null:(this.getParentCanvasModel().clearSelection(),new ln)}},{key:"canLinkToPort",value:function(e){if(this.getParent()===e.getParent())return!1;if("constant"===e.getParent().getOptions().type)return!1;if(e instanceof an)return!1;if(e.getName()===Yt)return!1;var t,n=Object(Rt.a)(Bt.a.values(this.getLinks()));try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.getSourcePort()===this&&a.getTargetPort()===e)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}}]),n}(It.PortModel),on=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;return Object(c.a)(this,n),"string"===typeof a&&(a={name:a,previousName:a,color:r,reduxProps:o}),(e=t.call(this,Object(Se.a)({type:"constant",name:"Untitled",color:"rgb(92,192,125)"},a))).mainPort=void 0,e.editable=void 0,e.mainPort=e.setUpConstantPort(),e.editable=o.editable,e.registerEvents(),e}return Object(u.a)(n,[{key:"setUpConstantPort",value:function(){var e=new rn("*");return this.addPort(e),e}},{key:"removeAllLinks",value:function(){var e,t=Object(Rt.a)(Bt.a.values(this.getMainPort().getLinks()));try{for(t.s();!(e=t.n()).done;){e.value.remove()}}catch(n){t.e(n)}finally{t.f()}}},{key:"getReduxProps",value:function(){return this.options.reduxProps}},{key:"isEditable",value:function(){return this.editable}},{key:"changeEditableState",value:function(e){this.editable=e}},{key:"setConstantValueInMathView",value:function(e){this.options.reduxProps.setConstantValueFromLink(this.getNodeName(),e)}},{key:"removeNodeFromMathView",value:function(){this.options.reduxProps.removeConstantNode(this.getNodeName())}},{key:"registerEvents",value:function(){var e=this;this.registerListener({entityRemoved:function(t){var n,a=Object(Rt.a)(Bt.a.values(e.getMainPort().getLinks()));try{for(a.s();!(n=a.n()).done;){var r=n.value;r instanceof ln&&r.setCallReduxFunc(!1)}}catch(o){a.e(o)}finally{a.f()}e.removeNodeFromMathView()}})}},{key:"getMainPort",value:function(){return this.mainPort}},{key:"getNodeName",value:function(){return this.options.name}},{key:"renameNode",value:function(e){this.options.name=e}},{key:"removePort",value:function(e){var t,n=Object(Rt.a)(Bt.a.values(e.getLinks()));try{for(n.s();!(t=n.n()).done;){t.value.remove()}}catch(a){n.e(a)}finally{n.f()}this.ports[e.getName()]&&(this.ports[e.getName()].setParent(null),delete this.ports[e.getName()])}},{key:"serialize",value:function(){return Object(Se.a)({},Object(Lt.a)(Object(_t.a)(n.prototype),"serialize",this).call(this),{editable:this.editable})}},{key:"deserialize",value:function(e){Object(Lt.a)(Object(_t.a)(n.prototype),"deserialize",this).call(this,e),this.editable=e.data.editable}}]),n}(It.NodeModel),sn=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(c.a)(this,n),(e=t.call(this,Object(Se.a)({},a))).changeCounter=void 0,e.editable=void 0,e.predicates=void 0,e.functions=void 0,e.parameterPorts=void 0,e.parameterPortsArray=void 0,e.appendPort=void 0,e.changeCounter=0,e.predicates=new Set,e.functions=new Set,e.parameterPorts=new Map,e.parameterPortsArray=new Array(e.getNumberOfPorts()),e.editable=e.getReduxProps().editable,e.registerEvents(),e.registerParameterPorts(),e.registerAppendPort(),e}return Object(u.a)(n,[{key:"registerParameterPorts",value:function(){for(var e=[It.PortModelAlignment.LEFT,It.PortModelAlignment.RIGHT,It.PortModelAlignment.TOP,It.PortModelAlignment.BOTTOM],t=0;t<this.getNumberOfPorts();t++){var n=this.addPort(new an("port"+t,e[t]));this.parameterPorts.set(n,null),this.parameterPortsArray[t]=n}}},{key:"getNodeNameCombination",value:function(){for(var e=[],t=0;t<this.parameterPortsArray.length;t++){var n=this.parameterPorts.get(this.parameterPortsArray[t]);if(!n)return null;e.push(n.getNodeName())}return e}},{key:"getNodeParameters",value:function(){for(var e=[],t=0;t<this.parameterPortsArray.length;t++){var n=this.parameterPorts.get(this.parameterPortsArray[t]);if(!n)return null;t!==this.parameterPortsArray.length-1&&e.push(n.getNodeName())}return e}},{key:"getFunctionValue",value:function(){return this.getNodeNameCombination()?this.parameterPorts.get(this.parameterPortsArray[this.parameterPortsArray.length-1]).getNodeName():null}},{key:"getValueOfPort",value:function(e){return this.parameterPorts.has(e)?this.parameterPorts.get(e):null}},{key:"getValueNameOfPort",value:function(e){return this.parameterPorts.has(e)?this.parameterPorts.get(e).getNodeName():null}},{key:"removeValueFromPort",value:function(e){this.parameterPorts.set(e,null)}},{key:"setValueToPort",value:function(e,t){this.parameterPorts.set(e,t)}},{key:"increaseChangeCounter",value:function(){this.changeCounter+=1}},{key:"getNumberOfPorts",value:function(){return this.getOptions().numberOfPorts}},{key:"clearPredicates",value:function(){this.predicates=new Set,this.increaseChangeCounter()}},{key:"clearFunctions",value:function(){this.functions=new Set,this.increaseChangeCounter()}},{key:"getPredicates",value:function(){return this.predicates}},{key:"getFunctions",value:function(){return this.functions}},{key:"removePort",value:function(e){var t,n=Object(Rt.a)(Bt.a.values(e.getLinks()));try{for(n.s();!(t=n.n()).done;){t.value.remove()}}catch(a){n.e(a)}finally{n.f()}this.ports[e.getName()]&&(this.ports[e.getName()].setParent(null),delete this.ports[e.getName()])}},{key:"serialize",value:function(){return Object(Se.a)({},Object(Lt.a)(Object(_t.a)(n.prototype),"serialize",this).call(this),{changeCounter:this.changeCounter,editable:this.editable})}},{key:"getPortByIndex",value:function(e){return e<0||e>=this.getNumberOfPorts()?null:this.parameterPortsArray[e]}},{key:"deserialize",value:function(e){Object(Lt.a)(Object(_t.a)(n.prototype),"deserialize",this).call(this,e),this.changeCounter=e.date.changeCounter,this.editable=e.data.editable}},{key:"registerEvents",value:function(){var e=this;this.registerListener({entityRemoved:function(){e.removeNodeFromMathView(),e.removeNodeFromGraphView()}})}},{key:"removeNodeFromGraphView",value:function(){throw new Error("This method should be implemented in child")}},{key:"changeEditableState",value:function(e){this.editable=e}},{key:"getNodeName",value:function(){return this.getOptions().name}},{key:"getAppendPort",value:function(){return this.appendPort}},{key:"renameNode",value:function(e){this.getOptions().name=e}},{key:"isEditable",value:function(){return this.editable}},{key:"addPredicateToSet",value:function(e){this.predicates.add(e),this.increaseChangeCounter()}},{key:"addFunctionToSet",value:function(e){this.functions.add(e),this.increaseChangeCounter()}},{key:"removePredicateFromSet",value:function(e){this.predicates.delete(e),this.increaseChangeCounter()}},{key:"removeFunctionFromSet",value:function(e){this.functions.delete(e),this.increaseChangeCounter()}},{key:"addPredicate",value:function(e){e=e.replace(/\s/g,""),this.predicates.has(e)||(this.addPredicateToSet(e),this.addElementToMathView(e,"P"))}},{key:"addFunction",value:function(e){e=e.replace(/\s/g,""),this.functions.has(e)||(this.addFunctionToSet(e),this.addElementToMathView(e,"F"))}},{key:"removePredicate",value:function(e){this.predicates.has(e)&&this.removeElementFromMathView(e,"P"),this.removePredicateFromSet(e)}},{key:"removeFunction",value:function(e){this.functions.has(e)&&this.removeElementFromMathView(e,"F"),this.removeFunctionFromSet(e)}},{key:"removeNodeFromMathView",value:function(){var e,t=Object(Rt.a)(this.getPredicates());try{for(t.s();!(e=t.n()).done;){var n=e.value;this.removeElementFromMathView(n,"P")}}catch(i){t.e(i)}finally{t.f()}var a,r=Object(Rt.a)(this.getFunctions());try{for(r.s();!(a=r.n()).done;){var o=a.value;this.removeElementFromMathView(o,"F")}}catch(i){r.e(i)}finally{r.f()}}},{key:"representNodeInMathView",value:function(){var e,t=Object(Rt.a)(this.getPredicates());try{for(t.s();!(e=t.n()).done;){var n=e.value;this.addElementToMathView(n,"P")}}catch(l){t.e(l)}finally{t.f()}var a,r=new Set,o=Object(Rt.a)(this.getFunctions());try{for(o.s();!(a=o.n()).done;){var i=a.value;Jt(this.getNodeParameters(),this.getFunctionValue(),i+"/"+(this.getNumberOfPorts()-1).toString(),this.getReduxProps())?r.add(i):this.addElementToMathView(i,"F")}}catch(l){o.e(l)}finally{o.f()}var s,c=Object(Rt.a)(r);try{for(c.s();!(s=c.n()).done;){var u=s.value;this.removeFunctionFromSet(u)}}catch(l){c.e(l)}finally{c.f()}}},{key:"addElementToMathView",value:function(e,t){throw new Error("This method should be implemented in child")}},{key:"removeElementFromMathView",value:function(e,t){throw new Error("This method should be implemented in child")}},{key:"getReduxProps",value:function(){return this.getOptions().reduxProps}},{key:"registerAppendPort",value:function(){var e=new an(Yt);e.setMaximumLinks(0),this.addPort(e),this.appendPort=e}}]),n}(It.NodeModel),cn=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(c.a)(this,n),t.call(this,Object(Se.a)({type:"ternary"},e))}return Object(u.a)(n,[{key:"removeElementFromMathView",value:function(e,t){("P"===t?this.getReduxProps().removeTernaryPredicate:this.getReduxProps().removeBinaryFunction)(e,this.getNodeNameCombination())}},{key:"addElementToMathView",value:function(e,t){("P"===t?this.getReduxProps().addTernaryPredicate:this.getReduxProps().addBinaryFunction)(e,this.getNodeNameCombination())}},{key:"removeNodeFromGraphView",value:function(){this.getReduxProps().removeTernaryNode(this.getNodeName())}}]),n}(sn),un=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(c.a)(this,n),t.call(this,Object(Se.a)({type:"quaternary"},e))}return Object(u.a)(n,[{key:"removeElementFromMathView",value:function(e,t){("P"===t?this.getReduxProps().removeQuaternaryPredicate:this.getReduxProps().removeTernaryFunction)(e,this.getNodeNameCombination())}},{key:"addElementToMathView",value:function(e,t){("P"===t?this.getReduxProps().addQuaternaryPredicate:this.getReduxProps().addTernaryFunction)(e,this.getNodeNameCombination())}},{key:"removeNodeFromGraphView",value:function(){this.getReduxProps().removeQuaternaryNode(this.getNodeName())}}]),n}(sn),ln=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Object(c.a)(this,n),(e=t.call(this,Object(Se.a)({type:"binary",width:a.width||3,color:a.color||"gray",selectedColor:a.selectedColor||"rgb(0,192,255)",curvyness:0},a))).label=void 0,e.callReduxFunc=void 0,e.changeCounter=void 0,e.changeCounter=0,e.callReduxFunc=r;var o=Object(l.a)(e),i=function(e,t){if(Object.keys(e.getLinks()).length>1)for(var n=0,a=Object.values(e.getLinks());n<a.length;n++){var r=a[n];r!==t&&r.remove()}},s=function(e,t,n){for(var a=0,r=Object.values(t.getNodes());a<r.length;a++){var o=r[a];if((o instanceof cn||o instanceof un)&&n!==o&&JSON.stringify(o.getNodeNameCombination())===JSON.stringify(e))return!0}return!1};return e.registerListener({targetPortChanged:function(e){if(null!==o.getTargetPort()){var t=o.getSourcePort().getNode(),n=o.getTargetPort().getNode();if(t instanceof mn&&n instanceof mn)return t===n&&(o.getOptions().curvyness=85,t.canSelectNode=!1),o.label=new nn({},t.getOptions().reduxProps,t.getNodeName()+" - "+n.getNodeName()),void o.addLabel(o.label);if(t instanceof mn&&n instanceof on||n instanceof mn&&t instanceof on){var a=t instanceof on?t:n instanceof on?n:null,r=t instanceof mn?t:n instanceof mn?n:null,c=a.getMainPort();if(null===c||void 0===c)throw new Error("Constant port can not be null, probably problem in initialization");i(c,o),o.isCallReduxFunc()?a.setConstantValueInMathView(r.getNodeName()):o.setCallReduxFunc(!0)}else if(t instanceof mn&&(n instanceof cn||n instanceof un)||(t instanceof cn||t instanceof un)&&n instanceof mn){var u=t instanceof mn?t:n instanceof mn?n:null,l=t instanceof cn||t instanceof un?t:n instanceof cn||n instanceof un?n:null,d=o.getSourcePort()instanceof an?o.getSourcePort():o.getTargetPort()instanceof an?o.getTargetPort():null,m=l.getNodeNameCombination();l&&m&&l.removeNodeFromMathView(),i(d,o),l.setValueToPort(d,u);var p=l.getNodeNameCombination();p&&(s(p,o.getSourcePort().getNode().getParent(),l)?o.remove():l.representNodeInMathView())}}},entityRemoved:function(e){if(o.isCallReduxFunc()&&o.getTargetPort()){var t=o.getSourcePort().getNode(),n=o.getTargetPort().getNode(),a=t instanceof on?t:n instanceof on?n:null,r=t instanceof cn||t instanceof un?t:n instanceof cn||n instanceof un?n:null;if(a)a.setConstantValueInMathView("");else if(r){var i=n===r?o.getTargetPort():o.getSourcePort();r.getNodeNameCombination()&&(r.removeNodeFromMathView(),r.removeValueFromPort(i))}else o.label&&o.label.remove()}}}),e}return Object(u.a)(n,[{key:"setCurvyness",value:function(e){this.getOptions().curvyness=e}},{key:"increaseChangeCounter",value:function(){this.changeCounter+=1}},{key:"setCallReduxFunc",value:function(e){this.callReduxFunc=e}},{key:"isCallReduxFunc",value:function(){return this.callReduxFunc}},{key:"calculateControlOffset",value:function(e){return e.getOptions().alignment===Ut.PortModelAlignment.RIGHT?[this.options.curvyness,0]:e.getOptions().alignment===Ut.PortModelAlignment.LEFT?[-this.options.curvyness,0]:e.getOptions().alignment===Ut.PortModelAlignment.TOP?[0,-this.options.curvyness]:[0,this.options.curvyness]}},{key:"getLabel",value:function(){return this.label}},{key:"getSVGPath",value:function(){if(2==this.points.length){var e,t,n=new Gt.BezierCurve;if(n.setSource(this.getFirstPoint().getPosition()),n.setTarget(this.getLastPoint().getPosition()),n.setSourceControl(this.getFirstPoint().getPosition().clone()),n.setTargetControl(this.getLastPoint().getPosition().clone()),this.sourcePort)(e=n.getSourceControl()).translate.apply(e,Object(oe.a)(this.calculateControlOffset(this.getSourcePort())));if(this.targetPort)(t=n.getTargetControl()).translate.apply(t,Object(oe.a)(this.calculateControlOffset(this.getTargetPort())));return n.getSVGCurve()}}},{key:"clearLabels",value:function(){if(this.label){var e=new nn({},this.label.getReduxProps());e.changeCounter=this.label.changeCounter,e.predicates=this.label.predicates,e.editable=this.label.editable,this.label.setParent(null),delete this.label,this.labels=[],this.label=e}}},{key:"serialize",value:function(){return Object(Se.a)({},Object(Lt.a)(Object(_t.a)(n.prototype),"serialize",this).call(this),{width:this.options.width,color:this.options.color,curvyness:this.options.curvyness,selectedColor:this.options.selectedColor,changeCounter:this.changeCounter})}},{key:"deserialize",value:function(e){Object(Lt.a)(Object(_t.a)(n.prototype),"deserialize",this).call(this,e),this.options.color=e.data.color,this.options.width=e.data.width,this.options.curvyness=e.data.curvyness,this.options.selectedColor=e.data.selectedColor,this.changeCounter=e.data.changeCounter}},{key:"addLabel",value:function(e){if(e instanceof Ut.LabelModel)return Object(Lt.a)(Object(_t.a)(n.prototype),"addLabel",this).call(this,e);var t=new nn;return t.setLabel(e),Object(Lt.a)(Object(_t.a)(n.prototype),"addLabel",this).call(this,t)}},{key:"setWidth",value:function(e){this.options.width+=e,this.fireEvent({width:e},"widthChanged")}},{key:"setColor",value:function(e){this.options.color=e,this.fireEvent({color:e},"colorChanged")}},{key:"remove",value:function(){this.sourcePort&&this.sourcePort.removeLink(this),this.targetPort&&this.targetPort.removeLink(this),Object(Lt.a)(Object(_t.a)(n.prototype),"remove",this).call(this)}}]),n}(Ut.LinkModel),dn=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,{type:"unbinary",name:e,alignment:It.PortModelAlignment.LEFT})}return Object(u.a)(n,[{key:"setPortAlignment",value:function(e){this.getOptions().alignment=e}},{key:"createLinkModel",value:function(){return 0===this.getMaximumLinks()?null:new ln}},{key:"removeBadLink",value:function(){var e,t=Object(Rt.a)(Bt.a.values(this.getLinks()));try{for(t.s();!(e=t.n()).done;){var n=e.value;null!==n.getSourcePort()&&null===n.getTargetPort()&&n.remove()}}catch(a){t.e(a)}finally{t.f()}}},{key:"canLinkToPort",value:function(e){var t,n=Object(Rt.a)(Bt.a.values(this.getLinks()));try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.getSourcePort()===this&&a.getTargetPort()===e||a.getSourcePort()===e&&a.getTargetPort()===this)return this.getParent().canSelectNode=!1,!1}}catch(r){n.e(r)}finally{n.f()}return this.getParent()===e.getParent()?this!==e:e.getName()!==Yt&&(e.getParent().getOptions().type,!0)}},{key:"addLink",value:function(e){this.links[e.getID()]=e}}]),n}(It.PortModel),mn=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;return Object(c.a)(this,n),"string"===typeof a&&(a={name:a,color:r,reduxProps:o}),(e=t.call(this,Object(Se.a)({type:"unbinary",name:"Untitled",color:"rgb(92,192,125)"},a))).changeCounter=void 0,e.unaryPredicates=void 0,e.appendPort=void 0,e.mainPort=void 0,e.editable=void 0,e.canSelectNode=void 0,e.addTemplatePorts(),e.registerEvents(),e.changeCounter=0,e.unaryPredicates=new Set,e.canSelectNode=!0,e.editable=o.editable,e}return Object(u.a)(n,[{key:"addPredicate",value:function(e){this.addUnaryPredicate(e)}},{key:"getReduxProps",value:function(){return this.getOptions().reduxProps}},{key:"getPredicates",value:function(){return this.unaryPredicates}},{key:"getMainPort",value:function(){return this.mainPort}},{key:"isEditable",value:function(){return this.editable}},{key:"changeEditableState",value:function(e){this.editable=e}},{key:"addTemplatePorts",value:function(){var e=new dn(Yt);this.appendPort=e,e.setMaximumLinks(0),this.addPort(e),e=new dn("MAINPORT"),this.mainPort=e,this.addPort(e)}},{key:"registerEvents",value:function(){var e=this;this.registerListener({entityRemoved:function(){e.removeNodeFromMathView()}})}},{key:"clearPredicates",value:function(){this.unaryPredicates=new Set,this.increaseChangeCounter()}},{key:"getUnaryPredicates",value:function(){return this.unaryPredicates}},{key:"increaseChangeCounter",value:function(){this.changeCounter+=1}},{key:"addUnaryPredicateToSet",value:function(e){this.unaryPredicates.add(e),this.increaseChangeCounter()}},{key:"addUnaryPredicate",value:function(e){e=e.replace(/\s/g,""),this.unaryPredicates.has(e)||(this.getReduxProps().addUnaryPredicate(e,this.getNodeName()),this.addUnaryPredicateToSet(e))}},{key:"removeUnaryPredicate",value:function(e){this.unaryPredicates.has(e)&&(this.removeUnaryPredicateFromSet(e),this.getReduxProps().removeUnaryPredicate(e,this.getNodeName()))}},{key:"removeNodeFromMathView",value:function(){var e,t=Object(Rt.a)(this.unaryPredicates);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.getReduxProps().removeUnaryPredicate(n,this.getNodeName())}}catch(a){t.e(a)}finally{t.f()}this.getReduxProps().removeDomainNode(this.getNodeName())}},{key:"removeUnaryPredicateFromSet",value:function(e){this.unaryPredicates.delete(e),this.increaseChangeCounter()}},{key:"getNodeName",value:function(){return this.getOptions().name}},{key:"getAppendPort",value:function(){return this.appendPort}},{key:"renameNode",value:function(e){this.getOptions().name=e}},{key:"removePort",value:function(e){var t,n=Object(Rt.a)(Bt.a.values(e.getLinks()));try{for(n.s();!(t=n.n()).done;){t.value.remove()}}catch(a){n.e(a)}finally{n.f()}this.ports[e.getName()]&&(this.ports[e.getName()].setParent(null),delete this.ports[e.getName()])}},{key:"serialize",value:function(){return Object(Se.a)({},Object(Lt.a)(Object(_t.a)(n.prototype),"serialize",this).call(this),{changeCounter:this.changeCounter,appendPort:this.appendPort,editable:this.editable})}},{key:"deserialize",value:function(e){Object(Lt.a)(Object(_t.a)(n.prototype),"deserialize",this).call(this,e),this.changeCounter=e.date.changeCounter,this.appendPort=e.data.appendPort,this.editable=e.data.editable}}]),n}(It.NodeModel);function pn(){var e=Object(we.a)(["\n        font-size: 11px;\n        flex:auto;\n\t\theight: ","px;\n\t\tbackground: rgba(white, 0.1);\n\t\ttext-align:center;\n\t\t\n\t\t&:hover {\n\t\t\tbackground: rgba(256, 256, 256, 0.6);\n\t\t}\n\t\tcursor:pointer;\n\t"]);return pn=function(){return e},e}function hn(){var e=Object(we.a)(["\n\t\tpadding: 0 5px;\n\t\tflex-grow: 1;\n"]);return hn=function(){return e},e}function gn(){var e=Object(we.a)(["\n\t\tdisplay: flex;\n\t\tmargin-top: 1px;\n\t\talign-items: center;\n\t\twidth:100%;\n"]);return gn=function(){return e},e}var fn=Pt.default.div(gn()),vn=(Pt.default.div(hn()),Pt.default.div(pn(),(function(e){return e.height})));a.Component;function bn(){var e=Object(we.a)(["\n\t\tmin-width: 2em;\n\t\twidth: 100%;\n\t\theight: 20px;\n\t\tbackground: rgba(white, 0.1);\n\t\tcolor: black;\n\t\ttext-align:center;\n\t"]);return bn=function(){return e},e}function yn(){var e=Object(we.a)(["\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\tflex: 1 0 0;\n\t"]);return yn=function(){return e},e}function En(){var e=Object(we.a)(["\n\t\twidth: 100%;\n\t\tflex-grow: 1;\n\t\tpadding: 3px 3px;\n\t"]);return En=function(){return e},e}function Nn(){var e=Object(we.a)(["\n\t\twidth: auto;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tflex: 1 0 0;\n\t"]);return Nn=function(){return e},e}function kn(){var e=Object(we.a)(["\n\t\twidth: 100%;\n\t\tflex-grow: 1;\n\t\tpadding: 3px 3px;\n\t\tfont-size:11px;\n\t\ttext-align:center;\n\t\tcursor: context-menu;\n\t"]);return kn=function(){return e},e}function On(){var e=Object(we.a)(["\n\t\tdisplay: flex;\n\t\tbackground-image: linear-gradient(rgba(256, 256, 256, 0.9), rgba(256, 256, 256, 0.9));\n\t"]);return On=function(){return e},e}function Pn(){var e=Object(we.a)(["\n\t\twidth: 100%;\n\t\tpointer-events: ",";\n\t\tcursor: ",";\n\t\tbackground-color: green;\n\t\tborder-radius: 5px;\n\t\tfont-family: sans-serif;\n\t\tfont-weight: bold;\n\t\tcolor: black;\n\t\toverflow: visible;\n\t\tfont-size: 13px;\n\t\tborder: solid 2px black;\n\t"]);return Pn=function(){return e},e}var Tn=Pt.default.div(Pn(),(function(e){return e.pointerEvents}),(function(e){return e.cursor})),Cn=Pt.default.div(On()),Sn=Pt.default.div(kn()),jn=Pt.default.div(Nn()),An=Pt.default.div(En()),Mn=Pt.default.div(yn()),wn=Pt.default.div(bn()),xn=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).textInput=void 0,r.generateAvailableLanguageElement=function(e,t){var n;return"F"===t&&(n="2"!==r.props.arity?Jt(r.props.model.getNodeParameters(),r.props.model.getFunctionValue(),e+"/"+(parseInt(r.props.arity)-1).toString(),r.props.model.getReduxProps()):Jt(r.props.model.getNodeParameters("F"),r.props.model.getFunctionValue("F"),e+"/"+(parseInt(r.props.arity)-1).toString(),r.props.model.getReduxProps())&&Jt(r.props.model.getNodeParameters(Qt),r.props.model.getFunctionValue(Qt),e+"/"+(parseInt(r.props.arity)-1).toString(),r.props.model.getReduxProps())),a.createElement(Mn,{key:e},a.createElement(wn,null,e),a.createElement(F.a,{className:"btn-graph",variant:"P"===t?"outline-success":n?"outline-danger":"outline-success",disabled:"F"===t&&n,title:"F"===t&&n?"Funkcia nem\xf4\u017ee by\u0165 viackr\xe1t definovan\xe1 pre rovnak\xfd(\xe9) parameter(tre)":"Pridaj "+("P"===t?"predik\xe1t":"funkciu"),onClick:function(){"P"===t?r.props.model.addPredicate(e):n||r.props.model.addFunction(e),r.props.engine.repaintCanvas()}},a.createElement(_.a,{name:"fas fa-plus"})))},r.generatePredicateComponent=r.generatePredicateComponent.bind(Object(l.a)(r)),r.generateFunctionComponent=r.generateFunctionComponent.bind(Object(l.a)(r)),r.setStateBadNameForLanguageElement=r.setStateBadNameForLanguageElement.bind(Object(l.a)(r)),r.clearTextInput=r.clearTextInput.bind(Object(l.a)(r)),r.state={badNameForLanguageElement:!0,canAddAsFunction:!0,canAddAsPredicate:!0,inputTitle:"Zadaj n\xe1zov pre predik\xe1t alebo funkciu",predicateButtonTitle:"Pridaj nov\xfd predik\xe1t",functionButtonTitle:"Pridaj nov\xfa funkciu"},r}return Object(u.a)(n,[{key:"setStateBadNameForPredFunc",value:function(e){return t=e,n=this.setStateBadNameForLanguageElement,Xt(t,n,Ht.parseConstants)?(this.setState({inputTitle:"Zadan\xfd n\xe1zov nie je v spr\xe1vnom tvare"}),!0):(this.setState({inputTitle:"Zadaj n\xe1zov pre predik\xe1t alebo funkciu"}),!1);var t,n}},{key:"generatePredicateComponent",value:function(e){return this.generateAvailableLanguageElement(e,"P")}},{key:"setStateBadNameForLanguageElement",value:function(e){this.setState({badNameForLanguageElement:e})}},{key:"generateFunctionComponent",value:function(e){return this.generateAvailableLanguageElement(e,"F")}},{key:"setLockedParentIfNeeded",value:function(e){this.props.model instanceof nn&&this.props.model.setLockedParent(e)}},{key:"componentDidMount",value:function(){this.props.model instanceof nn&&(this.props.model.getParent().increaseChangeCounter(),this.props.engine.repaintCanvas())}},{key:"componentWillUnmount",value:function(){this.props.model.getReduxProps().focusOnBodyElement()}},{key:"setCanUseForGivenType",value:function(e,t){Kt(t,"P"===e?this.props.arity:(parseInt(this.props.arity)-1).toString(),this.props.model.getReduxProps(),e)?"P"===e?this.setState({canAddAsPredicate:!0,predicateButtonTitle:"Pridaj nov\xfd predik\xe1t"}):(this.setState({canAddAsFunction:!0,functionButtonTitle:"Pridaj nov\xfa funkciu"}),"2"!==this.props.arity?Jt(this.props.model.getNodeParameters(),this.props.model.getFunctionValue(),this.textInput.value+"/"+(parseInt(this.props.arity)-1).toString(),this.props.model.getReduxProps())&&this.setState({canAddAsFunction:!1,functionButtonTitle:"Funkcia nem\xf4\u017ee by\u0165 viackr\xe1t definovan\xe1 pre rovnak\xfd(\xe9) parameter(tre)"}):Jt(this.props.model.getNodeParameters("F"),this.props.model.getFunctionValue("F"),this.textInput.value+"/"+(parseInt(this.props.arity)-1).toString(),this.props.model.getReduxProps())&&Jt(this.props.model.getNodeParameters(Qt),this.props.model.getFunctionValue(Qt),this.textInput.value+"/"+(parseInt(this.props.arity)-1).toString(),this.props.model.getReduxProps())&&this.setState({canAddAsFunction:!1,functionButtonTitle:"Funkcia nem\xf4\u017ee by\u0165 viackr\xe1t definovan\xe1 pre rovnak\xfd(\xe9) parameter(tre)"})):"P"===e?this.setState({canAddAsPredicate:!1,predicateButtonTitle:"Predik\xe1t nejde prida\u0165, predik\xe1t alebo funkcia s dan\xfdm menom u\u017e existuje pre in\xfd typ alebo pre in\xfa aritu"}):this.setState({canAddAsFunction:!1,functionButtonTitle:"Funkciu nejde prida\u0165, predik\xe1t alebo funkcia s dan\xfdm menom u\u017e existuje pre in\xfd typ alebo pre in\xfa aritu"})}},{key:"clearTextInput",value:function(){this.textInput.value="",this.setState({badNameForLanguageElement:!0,canAddAsFunction:!0,canAddAsPredicate:!0}),this.props.engine.repaintCanvas()}},{key:"addGivenInputElement",value:function(e){if(!this.setStateBadNameForPredFunc(this.textInput.value.replace(/\s/g,""))&&Kt(this.textInput.value,"P"===e?this.props.arity:(parseInt(this.props.arity)-1).toString(),this.props.model.getReduxProps(),e)){if("P"===e)this.props.model.addPredicate(this.textInput.value);else{if(!this.state.canAddAsFunction)return;this.props.model.addFunction(this.textInput.value)}this.clearTextInput()}}},{key:"render",value:function(){var e=this,t=parseInt(this.props.arity)-1;return a.createElement(Tn,{pointerEvents:this.props.model.isEditable()?"auto":"none",cursor:this.props.model.isEditable()?"pointer":"move"},a.createElement(Cn,null,a.createElement(jn,null,a.createElement(Sn,{title:"Zoznam pou\u017eite\u013en\xfdch predik\xe1tov pre aritu "+this.props.arity},"Pred"),Bt.a.map(Array.from($t(this.props.arity,this.props.model.getReduxProps(),this.props.model.getPredicates(),"P")),this.generatePredicateComponent),0!==t?a.createElement(Sn,{title:"Zoznam pou\u017eite\u013en\xfdch funkci\xed pre aritu "+t},"Func"):null,0!==t?Bt.a.map(Array.from($t((parseInt(this.props.arity)-1).toString(),this.props.model.getReduxProps(),this.props.model.getFunctions(),"F")),this.generateFunctionComponent):null,a.createElement(An,null,a.createElement(Mn,{key:"lastPredicateOption"},a.createElement("input",{title:this.state.inputTitle,onChange:function(t){var n=t.target.value.replace(/\s/g,"");e.props.setStateInputElementTextLength(t.target.value.length),e.setStateBadNameForPredFunc(n),e.setCanUseForGivenType("P",n),"1"!==e.props.arity&&e.setCanUseForGivenType("F",n)},ref:function(t){return e.textInput=t},onFocus:function(){e.props.model.setLocked(!0),e.setLockedParentIfNeeded(!0)},onBlur:function(){e.props.model.setLocked(!1),e.setLockedParentIfNeeded(!1)},onKeyDown:function(n){"Escape"===n.key?e.props.closeDropDown():"Enter"===n.key&&0===t&&e.addGivenInputElement("P")},placeholder:0!==t?"Add pred/func":"Add predicate",style:{width:(1===this.props.widthOfInputElement?2:this.props.widthOfInputElement)+"ch",height:"20px",border:this.state.badNameForLanguageElement?"1px solid red":"1px solid black"}}),a.createElement(F.a,{className:"btn-graph",variant:this.state.canAddAsPredicate?"outline-success":"outline-danger",disabled:!this.state.canAddAsPredicate,title:this.state.predicateButtonTitle,onClick:function(){e.addGivenInputElement("P")}},"P"),0!==t?a.createElement(F.a,{className:"btn-graph",variant:this.state.canAddAsFunction?"outline-success":"outline-danger",disabled:!this.state.canAddAsFunction,title:this.state.functionButtonTitle,onClick:function(){e.addGivenInputElement("F")}},"F"):null)))))}}]),n}(a.Component);function Dn(){var e=Object(we.a)(["\n\t\twidth: 100%;\n\t\tflex-grow: 1;\n\t\tpadding: 5px 5px;\n\t"]);return Dn=function(){return e},e}function Fn(){var e=Object(we.a)(["\n\t\twidth: 100%;\n\t\tbackground: rgba(256, 256, 256, 0.15);\n\t\tdisplay: flex;\n\t\twhite-space: nowrap;\n\t\tjustify-items: center;\n\t\ttext-align:center;\n\t\tcursor: default;\n\t"]);return Fn=function(){return e},e}function Rn(){var e=Object(we.a)(["\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\tflex: 1 0 0;\n\t"]);return Rn=function(){return e},e}function _n(){var e=Object(we.a)(["\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tflex-grow:1;\n\n\t\t&:first-of-type {\n\t\t\tmargin-right: 10px;\n\t\t}\n\n\t\t&:only-child {\n\t\t\tmargin-right: 0px;\n\t\t}\n\t"]);return _n=function(){return e},e}function Ln(){var e=Object(we.a)(["\n\t\tdisplay: flex;\n\t\tbackground-image: linear-gradient(rgba(256, 256, 256, 0.4), rgba(256, 256, 256, 0.5));\n\t"]);return Ln=function(){return e},e}function In(){var e=Object(we.a)(["\n\t\tmin-width: 2em;\n\t\twidth: 100%;\n\t\theight: 20px;\n\t\tbackground: rgba(white, 0.1);\n\t\tcolor: black;\n\t\ttext-align:center;\n\t"]);return In=function(){return e},e}function Vn(){var e=Object(we.a)(["\n\t\tpointer-events: ",";\n\t\tcursor: ",";\n\t\twidth:100%;\n\t\theight:100%;\n\t\tbackground-color: yellow;\n\t\tborder-radius: 5px;\n\t\tfont-family: sans-serif;\n\t\tcolor: black;\n\t\tborder: solid 2px black;\n\t\toverflow: visible;\n\t\tfont-size: 12px;\n\t\tfont-weight: bold;\n\t"]);return Vn=function(){return e},e}var zn=Pt.default.div(Vn(),(function(e){return e.pointerEvents}),(function(e){return e.cursor})),Bn=Pt.default.div(In()),Un=Pt.default.div(Ln()),Gn=Pt.default.div(_n()),Yn=Pt.default.div(Rn()),Wn=Pt.default.div(Fn()),Qn=Pt.default.div(Dn()),Hn=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).sourceNodeName=void 0,r.targetNodeName=void 0,r.generateElementType=function(e,t){return a.createElement(Yn,{key:e[0]},r.sourceNodeName!==r.targetNodeName?a.createElement(F.a,{className:"btn-graph",variant:"outline-warning",onClick:function(){r.props.model.changeDirectionOfBinaryRelation(e[0],e[1],t),r.props.engine.repaintCanvas()}},a.createElement(_.a,{title:"Smer "+("P"===t?"predik\xe1tu":"funkcie"),name:"B"===e[1]?"fas fa-arrows-alt-h":"F"===e[1]?"fas fa-long-arrow-alt-right":"fas fa-long-arrow-alt-left"})):null,a.createElement(Bn,{title:"P"===t?"Predik\xe1t":"Funkcia"},e[0]),a.createElement(F.a,{className:"btn-graph",variant:"outline-warning",title:"Zmaza\u0165 "+("P"===t?"dan\xfd predik\xe1t":"dan\xfa funkciu")+" z vrcholu",onClick:function(){"P"===t?r.props.model.removePredicate(e[0]):r.props.model.removeFunction(e[0]),r.props.engine.repaintCanvas()}},a.createElement(_.a,{name:"fas fa-trash"})))},r.state={isDropDownMenu:!1,badNameForNewPredicate:!1,inputElementTextLength:0},r.setInputElementTextLength=r.setInputElementTextLength.bind(Object(l.a)(r)),r.closeDropDown=r.closeDropDown.bind(Object(l.a)(r)),r.generateElementType=r.generateElementType.bind(Object(l.a)(r)),r.generatePredicateComponent=r.generatePredicateComponent.bind(Object(l.a)(r)),r.generateFunctionComponent=r.generateFunctionComponent.bind(Object(l.a)(r)),r}return Object(u.a)(n,[{key:"generatePredicateComponent",value:function(e){return this.generateElementType(e,"P")}},{key:"generateFunctionComponent",value:function(e){return this.generateElementType(e,"F")}},{key:"componentDidUpdate",value:function(){this.setIsDropDownMenuAccordingBehaviour()}},{key:"setIsDropDownMenuAccordingBehaviour",value:function(){!this.props.model.getParent().isSelected()&&this.state.isDropDownMenu&&(this.setState({isDropDownMenu:!1}),this.props.model.setLockedParent(!1),this.props.model.setLocked(!1))}},{key:"getWidestElement",value:function(){var e=this.sourceNodeName.length+this.targetNodeName.length,t=tn(this.state.isDropDownMenu,this.state.inputElementTextLength,this.props.model,e,"2","1");return t>e?t:e}},{key:"setInputElementTextLength",value:function(e){this.setState({inputElementTextLength:e})}},{key:"closeDropDown",value:function(){this.setState({isDropDownMenu:!1}),this.props.model.setLocked(!1),this.props.engine.getModel().clearSelection(),this.props.engine.repaintCanvas()}},{key:"render",value:function(){var e=this;this.sourceNodeName=this.props.model.getParent().getSourcePort().getNode().getNodeName(),this.targetNodeName=this.props.model.getParent().getTargetPort().getNode().getNodeName();var t=this.getWidestElement();return a.createElement("div",null,a.createElement(zn,{pointerEvents:this.props.model.editable?"all":"none",cursor:this.props.model.editable?"pointer":"move"},a.createElement(Wn,{title:"Smerovanie predik\xe1tov/funkci\xed (od \u2013 do)"},a.createElement(Qn,null,this.sourceNodeName+" \u2013 "+this.targetNodeName)),a.createElement(Un,null,a.createElement(Gn,null,Bt.a.map(Array.from(this.props.model.getPredicates()),this.generatePredicateComponent),Bt.a.map(Array.from(this.props.model.getFunctions()),this.generateFunctionComponent),a.createElement(vn,{title:"Otvori\u0165/zatvori\u0165 rozba\u013eovaciu ponuku",onClick:function(){e.state.isDropDownMenu?(e.props.engine.getModel().clearSelection(),e.setState({isDropDownMenu:!1}),e.props.engine.repaintCanvas()):(e.props.engine.getModel().clearSelection(),e.props.model.setSelected(!0),e.props.model.getParent().setSelected(!0),e.setState({isDropDownMenu:!0}),e.props.engine.repaintCanvas())},height:20,width:this.props.model.getOptions().name?0:20},this.state.isDropDownMenu?Wt:Yt)))),this.state.isDropDownMenu&&this.props.model.getParent().isSelected()?a.createElement(xn,{model:this.props.model,engine:this.props.engine,badNameForLanguageElement:this.state.badNameForNewPredicate,setStateInputElementTextLength:this.setInputElementTextLength,widthOfInputElement:t,arity:"2",closeDropDown:this.closeDropDown}):null)}}]),n}(a.Component);function Kn(){var e=Object(we.a)(["\n\t\twidth: auto;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tflex: 1 0 0;\n\t"]);return Kn=function(){return e},e}function Jn(){var e=Object(we.a)(["\n\t\tdisplay: flex;\n\t\tbackground-image: linear-gradient(rgba(255, 255, 255, 0.55), rgba(255, 255, 255, 0.65));\n\t"]);return Jn=function(){return e},e}function qn(){var e=Object(we.a)(["\n\t\twidth: 100%;\n\t\tflex-grow: 1;\n\t\tpadding: 5px 5px;\n\t\t\t\t\n\t\t&:hover {\n\t\t\tbackground: rgba(255, 255, 255, 0.7);\n\t\t}\n\t"]);return qn=function(){return e},e}function Xn(){var e=Object(we.a)(["\n\t\twidth: 100%;\n\t\tbackground: rgba(255, 255, 255, 0.45);\n\t\tdisplay: flex;\n\t\twhite-space: nowrap;\n\t\tjustify-items: center;\n\t\ttext-align:center;\n\t"]);return Xn=function(){return e},e}function Zn(){var e=Object(we.a)(["\n\t\twidth: 100%;\n\t\tpointer-events: ",";\n\t\tcursor: ",";\n\t\t/*background-color: ",";*/\n\t\tbackground-color: green;\n\t\tborder-radius: 5px;\n\t\tfont-family: sans-serif;\n\t\tfont-weight: bold;\n\t\tcolor: black;\n\t\toverflow: visible;\n\t\tfont-size: 13px;\n\t\tborder: solid 2px ",";\n\t"]);return Zn=function(){return e},e}var $n=Pt.default.div(Zn(),(function(e){return e.pointerEvents}),(function(e){return e.cursor}),(function(e){return e.background}),(function(e){return e.selected?"rgb(0,192,255)":"black"})),ea=Pt.default.div(Xn()),ta=Pt.default.div(qn()),na=Pt.default.div(Jn()),aa=Pt.default.div(Kn()),ra=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).generatePredicate=function(e){return a.createElement(Yn,{key:e},a.createElement(Bn,null,e),a.createElement(F.a,{className:"btn-graph",variant:"outline-success",onClick:function(){r.props.model.removeUnaryPredicate(e),r.props.engine.repaintCanvas()}},a.createElement(_.a,{name:"fas fa-trash"})))},r.state={renameActive:!1,titleChanged:!1,nodeName:r.props.model.getOptions().name,badName:!1,isDropDownMenu:!1,inputElementTextLength:0},r.setBadNodeNameState=r.setBadNodeNameState.bind(Object(l.a)(r)),r.setInputElementTextLength=r.setInputElementTextLength.bind(Object(l.a)(r)),r.closeDropDown=r.closeDropDown.bind(Object(l.a)(r)),r}return Object(u.a)(n,[{key:"componentDidUpdate",value:function(){this.setIsDropDownMenuAccordingBehaviour()}},{key:"cancelRenameNode",value:function(){this.setState({renameActive:!1,nodeName:this.props.model.getNodeName(),badName:!1}),this.props.model.setLocked(!1)}},{key:"renameNode",value:function(e){this.props.model.setLocked(!1),e!==this.props.model.getNodeName()&&(this.state.badName||(this.props.renameDomainNode(this.props.model.getNodeName(),e),this.props.model.renameNode(e))),this.setState({nodeName:this.props.model.getNodeName()}),this.setState({renameActive:!1}),this.setState({badName:!1})}},{key:"setBadNodeNameState",value:function(e){this.setState({badName:e})}},{key:"setInputElementTextLength",value:function(e){this.setState({inputElementTextLength:e})}},{key:"setIsDropDownMenuAccordingBehaviour",value:function(){!this.props.model.isSelected()&&this.state.isDropDownMenu&&(this.setState({isDropDownMenu:!1}),this.props.model.setLocked(!1))}},{key:"closeDropDown",value:function(){this.state.isDropDownMenu&&(this.setState({isDropDownMenu:!1}),this.props.model.setLocked(!1),this.props.engine.getModel().clearSelection(),this.props.engine.repaintCanvas())}},{key:"getWidestElement",value:function(){var e=this.state.nodeName.length,t=tn(this.state.isDropDownMenu,this.state.inputElementTextLength,this.props.model,e,"1","0");return t>e?t:e}},{key:"render",value:function(){var e=this,t=this.getWidestElement();return a.createElement("div",null,a.createElement($n,{"data-basic-node-name":this.props.name,selected:this.props.model.isSelected(),background:this.props.model.getOptions().color,pointerEvents:this.props.model.isEditable()?"auto":"none",cursor:this.props.model.isEditable()?"pointer":"move",onClick:function(){e.props.model.canSelectNode?qt(e.props.model,e.props.engine):e.props.model.canSelectNode=!0}},a.createElement(ea,{title:"Vytvori\u0165 nov\xfa linku \u0165ahan\xedm/dvojklikom premenova\u0165 n\xe1zov vrcholu"},a.createElement(It.PortWidget,{style:{flexGrow:1},engine:this.props.engine,port:this.props.model.getMainPort()},a.createElement(ta,{onDoubleClick:function(){e.state.isDropDownMenu&&e.setState({isDropDownMenu:!1}),e.state.renameActive||(e.setState({renameActive:!0}),e.props.model.setLocked(!0),e.props.engine.getModel().clearSelection(),e.props.model.setSelected(!0))}},this.state.renameActive?a.createElement("input",{autoFocus:!0,onBlur:function(){var t=e.state.nodeName.replace(/\s/g,"");e.renameNode(t)},onKeyDown:function(t){if("Escape"===t.key)e.cancelRenameNode();else if("Enter"===t.key){var n=e.state.nodeName.replace(/\s/g,"");e.renameNode(n)}},type:"text",style:{width:t+1.5+"ch",height:"20px",border:this.state.badName?"1px solid red":"1px solid black"},name:"",value:this.state.nodeName,onChange:function(t){e.setState({nodeName:t.target.value});var n=t.target.value.replace(/\s/g,"");Zt(e.props.model.getNodeName(),n,e.setBadNodeNameState,e.props.model.getReduxProps(),"unbinary")}}):this.props.model.getNodeName()))),a.createElement(na,null,a.createElement(aa,null,Bt.a.map(Array.from(this.props.model.getUnaryPredicates()),this.generatePredicate),a.createElement(It.PortWidget,{style:{flexGrow:1},engine:this.props.engine,port:this.props.model.getAppendPort()},a.createElement(vn,{title:"Otvori\u0165/zatvori\u0165 rozba\u013eovaciu ponuku",onClick:function(){e.state.isDropDownMenu?(e.setState({isDropDownMenu:!1}),e.props.engine.getModel().clearSelection(),e.props.engine.repaintCanvas()):(e.setState({isDropDownMenu:!0,badNameForNewPredicate:!0}),e.props.engine.getModel().clearSelection(),e.props.model.setSelected(!0),e.props.engine.repaintCanvas())},height:20,width:20*this.props.model.getOptions().name.length},this.state.isDropDownMenu?Wt:Yt))))),this.state.isDropDownMenu&&this.props.model.isSelected()?a.createElement(xn,{widthOfInputElement:t,setStateInputElementTextLength:this.setInputElementTextLength,model:this.props.model,engine:this.props.engine,modelName:this.props.model.getNodeName(),arity:"1",closeDropDown:this.closeDropDown}):null)}}]),n}(a.Component);function oa(){var e=Object(we.a)(["\n\t\tflex-grow: 1;\n\t\tpadding: 10px 10px;\n\t\t\t\t\n\t\t&:hover {\n\t\t\tbackground: rgba(256, 256, 256, 0.4);\n\t\t}\n\t"]);return oa=function(){return e},e}function ia(){var e=Object(we.a)(["\n\t\tbackground: rgba(256, 256, 256, 0.15);\n\t\tdisplay: flex;\n\t\twhite-space: nowrap;\n\t\tjustify-items: center;\n\t\ttext-align:center;\n\t"]);return ia=function(){return e},e}function sa(){var e=Object(we.a)(["\n\t\t/*background-color: ",";*/\n\t\tbackground-color: #a6adbd;\n\t\tpointer-events: ",";\n\t\tcursor: ",";\n\t\tborder-radius: 50%;\n\t\tfont-family: sans-serif;\n\t\tfont-weight:bold;\n\t\tcolor: black;\n\t\tborder: solid 2px black;\n\t\toverflow: hidden;\n\t\tfont-size: 13px;\n\t\tborder: solid 2.5px ",";\n\t\tjustify-items: center;\n\t\ttext-align:center;\n\t"]);return sa=function(){return e},e}var ca=Pt.default.div(sa(),(function(e){return e.background}),(function(e){return e.pointerEvents}),(function(e){return e.cursor}),(function(e){return e.selected?"rgb(0,192,255)":"black"})),ua=Pt.default.div(ia()),la=Pt.default.div(oa()),da=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={renameActive:!1,titleChanged:!1,nodeName:a.props.model.getOptions().name,badName:!1},a.setBadNodeNameState=a.setBadNodeNameState.bind(Object(l.a)(a)),a}return Object(u.a)(n,[{key:"cancelRenameNode",value:function(){this.setState({renameActive:!1,nodeName:this.props.model.getNodeName(),badName:!1}),this.props.model.setLocked(!1)}},{key:"renameNode",value:function(e){this.props.model.setLocked(!1),e!==this.props.model.getNodeName()&&(this.state.badName?this.setState({nodeName:this.props.model.getNodeName()}):(this.props.renameConstantNode(this.props.model.getNodeName(),e),this.props.model.renameNode(e))),this.setState({nodeName:this.props.model.getNodeName()}),this.setState({renameActive:!1}),this.setState({badName:!1})}},{key:"getWidestElement",value:function(){var e=this.props.model.getNodeName().length;return this.state.renameActive,e}},{key:"setBadNodeNameState",value:function(e){this.setState({badName:e})}},{key:"render",value:function(){var e=this,t=this.getWidestElement();return a.createElement(ca,{"data-basic-node-name":this.props.name,selected:this.props.model.isSelected(),background:this.props.model.getOptions().color,pointerEvents:this.props.model.isEditable()?"auto":"none",cursor:this.props.model.isEditable()?"pointer":"move",onClick:function(){qt(e.props.model,e.props.engine)}},a.createElement(ua,null,a.createElement(It.PortWidget,{engine:this.props.engine,port:this.props.model.getMainPort()},a.createElement(la,{onDoubleClick:function(){e.state.renameActive||(e.setState({renameActive:!0}),e.props.model.setLocked(!0),e.props.engine.getModel().clearSelection(),e.props.model.setSelected(!0))}},this.state.renameActive?a.createElement("input",{autoFocus:!0,onBlur:function(){var t=e.state.nodeName.replace(/\s/g,"");e.renameNode(t)},onKeyDown:function(t){if("Escape"===t.key)e.cancelRenameNode();else if("Enter"===t.key){var n=e.state.nodeName.replace(/\s/g,"");e.renameNode(n)}},type:"text",style:{width:t+1.5+"ch",height:"20px",border:this.state.badName?"1px solid red":"1px solid black"},name:"",value:this.state.nodeName,onChange:function(t){e.setState({nodeName:t.target.value});var n=t.target.value.replace(/\s/g,"");Zt(e.props.model.getNodeName(),n,e.setBadNodeNameState,e.props.model.getReduxProps(),"constant")}}):this.props.model.getNodeName()))))}}]),n}(a.Component),ma=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,e)}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return a.createElement(Yn,{key:this.props.elementName},a.createElement(Bn,{title:"P"===this.props.type?"Predik\xe1t":"Funkcia"},this.props.elementName),a.createElement(F.a,{className:"btn-graph",variant:"outline-warning",title:"Zmaza\u0165 "+("P"===this.props.type?"dan\xfd predik\xe1t":"dan\xfa funkciu")+" z vrcholu",onClick:function(){"P"===e.props.type?e.props.model.removePredicate(e.props.elementName):e.props.model.removeFunction(e.props.elementName),e.props.engine.repaintCanvas()}},a.createElement(_.a,{name:"fas fa-trash"})))}}]),n}(a.Component);function pa(){var e=Object(we.a)(["\n\tposition: 'relative';\n\tpointer-events: ",";\n\tcursor: ",";\n\tdisplay:flex;\n\tjustify-content: center;\n\t/*width: ",";*/\n\theight:35px;\n"]);return pa=function(){return e},e}function ha(){var e=Object(we.a)(["\n\t\tdisplay: flex;\n\t\tbackground-image: linear-gradient(rgba(256, 256, 256, 0.4), rgba(256, 256, 256, 0.5));\n\t"]);return ha=function(){return e},e}function ga(){var e=Object(we.a)(["\n\t\tpointer-events: ",";\n\t\tcursor: ",";\n\t\twidth:100%;\n\t\theight:100%;\n\t\tbackground-color: yellow;\n\t\tborder-radius: 5px;\n\t\tfont-family: sans-serif;\n\t\tcolor: black;\n\t\tborder: solid 2px black;\n\t\toverflow: visible;\n\t\tfont-size: 12px;\n\t\tfont-weight: bold;\n\t"]);return ga=function(){return e},e}function fa(){var e=Object(we.a)(["\n\twidth: 16px;\n\theight: 16px;\n\tz-index: 10;\n\tbackground: rgba(0, 0, 0, 0.5);\n\tborder-radius: 8px;\n\tcursor: pointer;\n\n\t&:hover {\n\t\tbackground: rgba(0, 0, 0, 1);\n\t}\n"]);return fa=function(){return e},e}function va(){var e=Object(we.a)(["\n\tdisplay: flex;\n    justify-content: center;\n    flex-direction: column;\n"]);return va=function(){return e},e}var ba=Pt.default.div(va()),ya=Pt.default.div(fa()),Ea=Pt.default.div(ga(),(function(e){return e.pointerEvents}),(function(e){return e.cursor})),Na=Pt.default.div(ha()),ka=Pt.default.div(pa(),(function(e){return e.pointerEvents}),(function(e){return e.cursor}),(function(e){return e.size})),Oa=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.size,n=e.color,r=e.isSelected;return a.createElement("svg",{width:t,height:t},a.createElement("g",{id:"Layer_1"}),a.createElement("g",{id:"Layer_2"},a.createElement("polygon",{points:"5,"+t/2+" "+t/2+",0 "+t+","+t/2+" "+t/2+","+t/2,style:{fill:n,strokeMiterlimit:10,strokeWidth:2.5,stroke:r?"rgb(0,192,255)":"#000000"}})))}}]),n}(a.Component),Pa=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={badName:!1,isDropDownMenu:!1,color:"rgb(255,255,0)",inputElementTextLength:0},a.setInputElementTextLength=a.setInputElementTextLength.bind(Object(l.a)(a)),a.closeDropDown=a.closeDropDown.bind(Object(l.a)(a)),a.generateFunctionComponent=a.generateFunctionComponent.bind(Object(l.a)(a)),a.generatePredicateComponent=a.generatePredicateComponent.bind(Object(l.a)(a)),a}return Object(u.a)(n,[{key:"componentDidUpdate",value:function(){this.setIsDropDownMenuAccordingBehaviour()}},{key:"setInputElementTextLength",value:function(e){this.setState({inputElementTextLength:e})}},{key:"setIsDropDownMenuAccordingBehaviour",value:function(){!this.props.model.isSelected()&&this.state.isDropDownMenu&&(this.setState({isDropDownMenu:!1}),this.props.model.setLocked(!1))}},{key:"closeDropDown",value:function(){this.state.isDropDownMenu&&(this.setState({isDropDownMenu:!1}),this.props.model.setLocked(!1),this.props.engine.getModel().clearSelection(),this.props.engine.repaintCanvas())}},{key:"generatePredicateComponent",value:function(e){return a.createElement(ma,{engine:this.props.engine,model:this.props.model,elementName:e,type:"P",key:e})}},{key:"generateFunctionComponent",value:function(e){return a.createElement(ma,{engine:this.props.engine,model:this.props.model,elementName:e,type:"F",key:e})}},{key:"getWidestElement",value:function(){var e=tn(this.state.isDropDownMenu,this.state.inputElementTextLength,this.props.model,3,"3","2");return e>3?e:3}},{key:"render",value:function(){var e=this,t=this.getWidestElement();return a.createElement(ba,null,a.createElement(ka,{size:this.props.size,pointerEvents:this.props.model.isEditable()?"auto":"none",cursor:this.props.model.isEditable()?"pointer":"move",onClick:function(){qt(e.props.model,e.props.engine)}},a.createElement(Oa,{color:this.state.color,isSelected:this.props.model.isSelected(),size:this.props.size}),a.createElement(It.PortWidget,{style:{top:this.props.size/2-9,left:"50%",marginLeft:"-35px",position:"absolute"},port:this.props.model.getPortByIndex(0),engine:this.props.engine},a.createElement(ya,{title:"Prv\xfd parameter"})),a.createElement(It.PortWidget,{style:{right:"50%",marginRight:"-38px",top:this.props.size/2-10,position:"absolute"},port:this.props.model.getPortByIndex(1),engine:this.props.engine},a.createElement(ya,{title:"Druh\xfd parameter"})),a.createElement(It.PortWidget,{style:{top:-15,position:"absolute"},port:this.props.model.getPortByIndex(2),engine:this.props.engine},a.createElement(ya,{title:"Tret\xed parameter"}))),a.createElement(Ea,{pointerEvents:this.props.model.isEditable()?"auto":"none",cursor:this.props.model.isEditable()?"pointer":"move",s:!0},a.createElement(Na,null,a.createElement(Gn,null,Bt.a.map(Array.from(this.props.model.getPredicates()),this.generatePredicateComponent),Bt.a.map(Array.from(this.props.model.getFunctions()),this.generateFunctionComponent),a.createElement(It.PortWidget,{engine:this.props.engine,port:this.props.model.getAppendPort()},a.createElement(vn,{title:"Otvori\u0165/zatvori\u0165 rozba\u013eovaciu ponuku",onClick:function(){e.state.isDropDownMenu?(e.props.engine.getModel().clearSelection(),e.setState({isDropDownMenu:!1}),e.props.engine.repaintCanvas()):(e.props.engine.getModel().clearSelection(),e.props.model.setSelected(!0),e.setState({isDropDownMenu:!0}),e.props.engine.repaintCanvas())},height:20,width:this.props.model.getOptions().name?0:20},this.state.isDropDownMenu?Wt:Yt))))),this.state.isDropDownMenu&&this.props.model.isSelected()?a.createElement(xn,{widthOfInputElement:t,setStateInputElementTextLength:this.setInputElementTextLength,model:this.props.model,engine:this.props.engine,modelName:this.props.model.getNodeName(),arity:"3",closeDropDown:this.closeDropDown}):null)}}]),n}(a.Component);function Ta(){var e=Object(we.a)(["\n\tposition: 'relative';\n\tpointer-events: ",";\n\tcursor: ",";\n\tdisplay:flex;\n\tjustify-content: center;\n\theight: 60px;\n"]);return Ta=function(){return e},e}function Ca(){var e=Object(we.a)(["\n\twidth: 16px;\n\theight: 16px;\n\tz-index: 10;\n\tbackground: rgba(0, 0, 0, 0.5);\n\tborder-radius: 8px;\n\tcursor: pointer;\n\n\t&:hover {\n\t\tbackground: rgba(0, 0, 0, 1);\n\t}\n"]);return Ca=function(){return e},e}function Sa(){var e=Object(we.a)(["\n\t\tdisplay: flex;\n\t\tbackground-image: linear-gradient(rgba(256, 256, 256, 0.4), rgba(256, 256, 256, 0.5));\n\t"]);return Sa=function(){return e},e}function ja(){var e=Object(we.a)(["\n\tdisplay: flex;\n    justify-content: center;\n    flex-direction: column;\n"]);return ja=function(){return e},e}var Aa=Pt.default.div(ja()),Ma=Pt.default.div(Sa()),wa=Pt.default.div(Ca()),xa=Pt.default.div(Ta(),(function(e){return e.pointerEvents}),(function(e){return e.cursor})),Da=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.size,n=e.color,r=e.isSelected;return a.createElement("svg",{width:t,height:t},a.createElement("g",{id:"Layer_1"}),a.createElement("g",{id:"Layer_2"},a.createElement("polygon",{points:"10,"+this.props.size/2+" "+this.props.size/2+",10 "+(this.props.size-10)+","+this.props.size/2+" "+this.props.size/2+","+(this.props.size-10),style:{fill:n,strokeMiterlimit:10,strokeWidth:2.5,stroke:r?"rgb(0,192,255)":"#000000"}})))}}]),n}(a.Component),Fa=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={badName:!1,isDropDownMenu:!1,color:"rgb(255,255,0)",inputElementTextLength:0},a.setInputElementTextLength=a.setInputElementTextLength.bind(Object(l.a)(a)),a.closeDropDown=a.closeDropDown.bind(Object(l.a)(a)),a.generateFunctionComponent=a.generateFunctionComponent.bind(Object(l.a)(a)),a.generatePredicateComponent=a.generatePredicateComponent.bind(Object(l.a)(a)),a}return Object(u.a)(n,[{key:"componentDidUpdate",value:function(){this.setIsDropDownMenuAccordingBehaviour()}},{key:"setInputElementTextLength",value:function(e){this.setState({inputElementTextLength:e})}},{key:"setIsDropDownMenuAccordingBehaviour",value:function(){!this.props.model.isSelected()&&this.state.isDropDownMenu&&(this.setState({isDropDownMenu:!1}),this.props.model.setLocked(!1))}},{key:"setColor",value:function(e){this.setState({color:e})}},{key:"closeDropDown",value:function(){this.state.isDropDownMenu&&(this.setState({isDropDownMenu:!1}),this.props.model.setLocked(!1),this.props.engine.getModel().clearSelection(),this.props.engine.repaintCanvas())}},{key:"generatePredicateComponent",value:function(e){return a.createElement(ma,{engine:this.props.engine,model:this.props.model,elementName:e,type:"P",key:e})}},{key:"generateFunctionComponent",value:function(e){return a.createElement(ma,{engine:this.props.engine,model:this.props.model,elementName:e,type:"F",key:e})}},{key:"getWidestElement",value:function(){var e=tn(this.state.isDropDownMenu,this.state.inputElementTextLength,this.props.model,3,"4","3");return e>3?e:3}},{key:"render",value:function(){var e=this,t=this.getWidestElement();return a.createElement(Aa,null,a.createElement(xa,{size:this.props.size,pointerEvents:this.props.model.isEditable()?"auto":"none",cursor:this.props.model.isEditable()?"pointer":"move",onClick:function(){qt(e.props.model,e.props.engine)}},a.createElement(Da,{size:this.props.size,color:this.state.color,isSelected:this.props.model.isSelected()}),a.createElement(It.PortWidget,{style:{top:this.props.size/2-9,left:"50%",marginLeft:"-32px",position:"absolute"},port:this.props.model.getPortByIndex(0),engine:this.props.engine},a.createElement(wa,{title:"Prv\xfd parameter"})),a.createElement(It.PortWidget,{style:{top:this.props.size-8,position:"absolute"},port:this.props.model.getPortByIndex(1),engine:this.props.engine},a.createElement(wa,{title:"Druh\xfd parameter"})),a.createElement(It.PortWidget,{style:{right:"50%",marginRight:"-32px",top:this.props.size/2-9,position:"absolute"},port:this.props.model.getPortByIndex(2),engine:this.props.engine},a.createElement(wa,{title:"Tret\xed parameter"})),a.createElement(It.PortWidget,{style:{top:-8,position:"absolute"},port:this.props.model.getPortByIndex(3),engine:this.props.engine},a.createElement(wa,{title:"\u0160tvrt\xfd parameter"}))),a.createElement(Ea,{pointerEvents:this.props.model.isEditable()?"auto":"none",cursor:this.props.model.isEditable()?"pointer":"move",s:!0},a.createElement(Ma,null,a.createElement(Gn,null,Bt.a.map(Array.from(this.props.model.getPredicates()),this.generatePredicateComponent),Bt.a.map(Array.from(this.props.model.getFunctions()),this.generateFunctionComponent),a.createElement(It.PortWidget,{engine:this.props.engine,port:this.props.model.getAppendPort()},a.createElement(vn,{title:"Otvori\u0165/zatvori\u0165 rozba\u013eovaciu ponuku",onClick:function(){e.state.isDropDownMenu?(e.props.engine.getModel().clearSelection(),e.setState({isDropDownMenu:!1}),e.props.engine.repaintCanvas()):(e.props.engine.getModel().clearSelection(),e.props.model.setSelected(!0),e.setState({isDropDownMenu:!0}),e.props.engine.repaintCanvas())},height:20,width:this.props.model.getOptions().name?0:20},this.state.isDropDownMenu?Wt:Yt))))),this.state.isDropDownMenu&&this.props.model.isSelected()?a.createElement(xn,{widthOfInputElement:t,setStateInputElementTextLength:this.setInputElementTextLength,model:this.props.model,engine:this.props.engine,modelName:this.props.model.getNodeName(),arity:"4",closeDropDown:this.closeDropDown}):null)}}]),n}(a.Component),Ra=function(){return a.createElement($n,{style:{pointerEvents:"none"}},a.createElement(ea,null,a.createElement(ta,null,"Node")),a.createElement(na,null,a.createElement(aa,null,a.createElement(vn,null,Yt))))},_a=function(){return a.createElement(ca,{style:{pointerEvents:"none"}},a.createElement(ua,null,a.createElement(la,null,"Const")))},La=function(){return a.createElement(ka,{size:50},a.createElement(Oa,{size:50,color:"rgb(255,255,0)",isSelected:!1}))},Ia=function(){return a.createElement(xa,{size:50},a.createElement(Da,{size:50,color:"rgb(255,255,0)",isSelected:!1}))};function Va(){var e=Object(we.a)(["\n\tdisplay:flex;\n\tflex-direction:row;\n\t\n\t"]);return Va=function(){return e},e}function za(){var e=Object(we.a)(["\n\t\tposition: relative;\n\t\tflex-grow: 1;\n\t"]);return za=function(){return e},e}function Ba(){var e=Object(we.a)(["\n\t\tdisplay: flex;\n\t\tflex-grow: 1;\n\t"]);return Ba=function(){return e},e}function Ua(){var e=Object(we.a)(["\n\t\tflex-grow: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t"]);return Ua=function(){return e},e}var Ga=Pt.default.div(Ua()),Ya=Pt.default.div(Ba()),Wa=Pt.default.div(za()),Qa=Pt.default.div(Va());function Ha(e,t){var n,a,r=0;for("unbinary"===e?(a=t.domainNodes,n="N"):"constant"===e?(a=t.constantNodes,n="C"):"ternary"===e?(a=t.ternaryNodes,n="T"):(a=t.quaternaryNodes,n="Q");a.has(n+r);)r++;return r}function Ka(e,t,n){var a,r,o,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=Ha((a=i?JSON.parse(t):JSON.parse(t.dataTransfer.getData("storm-graph_view-node"))).type,e.props.diagramState);if("unbinary"===a.type)r=new mn("N"+s,"rgb(92,192,125)",n),n.addDomainNode(r.getOptions().name,r);else if("constant"===a.type)r=new on("C"+s,"rgb(92,192,125)",n),n.addConstantNode(r.getOptions().name,r);else if("ternary"===a.type)r=new cn({name:"T"+s,reduxProps:n,numberOfPorts:3}),n.addTernaryNode(r.getOptions().name,r);else{if("quaternary"!==a.type)throw new Error("Node cannot be null, possible leak of unknown type");r=new un({name:"Q"+s,reduxProps:n,numberOfPorts:4}),n.addQuaternaryNode(r.getOptions().name,r)}var c=e.props.diagramState.diagramEngine;if(i){var u=c.getCanvas().clientWidth,l=c.getCanvas().clientHeight;o={x:Math.random()*(u-.2*u)+.05*u,y:Math.random()*(l-.2*l)+.05*l}}else o=c.getRelativeMousePoint(t);r.setPosition(o),c.getModel().addNode(r),e.forceUpdate()}var Ja=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).body=void 0,a.reduxProps=void 0,a.focusOnBodyElement=a.focusOnBodyElement.bind(Object(l.a)(a)),a.clearGraphSelection=a.clearGraphSelection.bind(Object(l.a)(a)),a.reduxProps={addDomainNode:a.props.addDomainNode,addConstantNode:a.props.addConstantNode,addTernaryNode:a.props.addTernaryNode,addQuaternaryNode:a.props.addQuaternaryNode,renameDomainNode:a.props.renameDomainNode,removeDomainNode:a.props.removeDomainNode,renameConstantNode:a.props.renameConstantNode,removeConstantNode:a.props.removeConstantNode,removeTernaryNode:a.props.removeTernaryNode,removeQuaternaryNode:a.props.removeQuaternaryNode,addUnaryPredicate:a.props.addUnaryPredicate,addUnaryFunction:a.props.addUnaryFunction,addBinaryPredicate:a.props.addBinaryPredicate,addBinaryFunction:a.props.addBinaryFunction,addTernaryPredicate:a.props.addTernaryPredicate,addTernaryFunction:a.props.addTernaryFunction,addQuaternaryPredicate:a.props.addQuaternaryPredicate,removeUnaryPredicate:a.props.removeUnaryPredicate,removeUnaryFunction:a.props.removeUnaryFunction,removeBinaryPredicate:a.props.removeBinaryPredicate,removeBinaryFunction:a.props.removeBinaryFunction,removeTernaryPredicate:a.props.removeTernaryPredicate,removeTernaryFunction:a.props.removeTernaryFunction,removeQuaternaryPredicate:a.props.removeQuaternaryPredicate,setConstantValueFromLink:a.props.setConstantValueFromLink,changeDirectionOfBinaryRelation:a.props.changeDirectionOfBinaryRelation,focusOnBodyElement:a.focusOnBodyElement,editable:a.props.diagramState.editableNodes,store:a.props.store},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.diagramState.imported?this.props.store.dispatch(T(this.props.store.getState())):this.props.syncDiagram(this.props,this.focusOnBodyElement),this.focusOnBodyElement()}},{key:"componentDidUpdate",value:function(){this.props.diagramState.imported&&(this.props.store.dispatch(T(Object(Se.a)({},this.props.store.getState(),{},this.reduxProps),this.focusOnBodyElement)),this.focusOnBodyElement()),this.reduxProps.editable=this.props.diagramState.editableNodes}},{key:"focusOnBodyElement",value:function(){this.body&&this.body.focus()}},{key:"clearGraphSelection",value:function(){this.props.diagramState.diagramEngine.getModel().clearSelection(),this.props.diagramState.diagramEngine.repaintCanvas()}},{key:"render",value:function(){var e=this,t=this.props.diagramState.editableNodes,n=this.props.toggleEditableNodes;return a.createElement(Ga,{ref:function(t){return e.body=t},tabIndex:1,onKeyPress:function(e){["input","textarea"].includes(e.target.tagName.toLowerCase())||(";"===e.key||"`"===e.key?n(!t):"p"===e.key.toLowerCase()?n(!1):"e"===e.key.toLowerCase()&&n(!0))},onKeyDown:function(t){if("Escape"===t.key)e.clearGraphSelection();else if("Backspace"===t.key&&e.props.diagramState.diagramEngine.getModel().getSelectedEntities().length>0){["input","textarea"].includes(t.target.tagName.toLowerCase())||t.preventDefault()}}},a.createElement(Ya,null,a.createElement(St,null,a.createElement(Qa,null,a.createElement(F.a,{title:"Pohyb po grafe (P)",variant:"outline-primary",className:t?"":"active",onClick:function(){n(!1)}},a.createElement(_.a,{name:"fas fa-arrows-alt"})),a.createElement(F.a,{title:"Editovanie grafu (E)",variant:"outline-primary",className:t?"active":"",onClick:function(){n(!0)}},a.createElement(_.a,{name:"fas fa-edit"}))),a.createElement(Mt,{model:{type:"unbinary"},clickFunction:Ka,element:this,name:"Pridaj un\xe1rny/bin\xe1rny",color:"rgb(125,192,125)",reduxProps:this.reduxProps,title:"Prida\u0165 vrchol, ktor\xfd predstavuje prvok dom\xe9ny. Tomuto prvku je mo\u017en\xe9 n\xe1sledne prida\u0165 un\xe1rne predik\xe1ty a vytvara\u0165 bin\xe1rne v\xe4zby",children:a.createElement(Ra,null)}),a.createElement(Mt,{model:{type:"constant"},clickFunction:Ka,element:this,name:"Pridaj kon\u0161tantu",color:"rgb(125,192,125)",reduxProps:this.reduxProps,title:"Prida\u0165 vrchol, ktor\xfd predstavuje kon\u0161tanty. Vytvoren\xedm linky prirad\xedme kon\u0161tante prvok dom\xe9ny",children:a.createElement(_a,null)}),a.createElement(Mt,{model:{type:"ternary"},clickFunction:Ka,element:this,name:"Pridaj tern\xe1rny",color:"rgb(128,96,245)",reduxProps:this.reduxProps,title:"Prida\u0165 vrchol, ktor\xfd predstavuje tern\xe1rny vz\u0165ah pre predik\xe1ty a bin\xe1rny vz\u0165ah pre funkcie",children:a.createElement(La,null)}),a.createElement(Mt,{model:{type:"quaternary"},clickFunction:Ka,element:this,name:"Pridaj \u0161tvorn\xe1rny",color:"rgb(128,96,245)",reduxProps:this.reduxProps,title:"Prida\u0165 vrchol, ktor\xfd predstavuje quatern\xe1rny vz\u0165ah pre predik\xe1ty a tern\xe1rny vz\u0165ah pre funkcie",children:a.createElement(Ia,null)})),a.createElement(Wa,{onDrop:function(t){Ka(e,t,e.reduxProps,!1)},onDragOver:function(e){e.preventDefault()}},a.createElement(Ft,null,a.createElement(wt.CanvasWidget,{engine:this.props.diagramState.diagramEngine})))))}}]),n}(a.Component),qa={addDomainNode:function(e,t){return{type:"ADD_DOMAIN_NODE",nodeName:e,nodeObject:t}},addConstantNode:function(e,t){return{type:"ADD_CONSTANT_NODE",nodeName:e,nodeObject:t}},addTernaryNode:function(e,t){return{type:"ADD_TERNARY_NODE",nodeName:e,nodeObject:t}},renameDomainNode:function(e,t){return{type:"RENAME_DOMAIN_NODE",oldName:e,newName:t}},renameConstantNode:function(e,t){return{type:"RENAME_CONSTANT_NODE",oldName:e,newName:t}},removeDomainNode:function(e){return{type:"REMOVE_DOMAIN_NODE",nodeName:e}},removeConstantNode:function(e){return{type:"REMOVE_CONSTANT_NODE",nodeName:e}},removeTernaryNode:function(e){return{type:"REMOVE_TERNARY_NODE",nodeName:e}},removeQuaternaryNode:function(e){return{type:"REMOVE_QUATERNARY_NODE",nodeName:e}},addQuaternaryNode:function(e,t){return{type:"ADD_QUATERNARY_NODE",nodeName:e,nodeObject:t}},addUnaryPredicate:function(e,t){return{type:"ADD_UNARY_PREDICATE",predicateName:e,nodeName:t}},addUnaryFunction:function(e,t,n,a){return{type:"ADD_UNARY_FUNCTION",functionName:e,sourceNodeName:t,targetNodeName:n,direction:a}},addBinaryPredicate:function(e,t,n,a){return{type:"ADD_BINARY_PREDICATE",predicateName:e,sourceNodeName:t,targetNodeName:n,direction:a}},addBinaryFunction:function(e,t){return{type:"ADD_BINARY_FUNCTION",functionName:e,nodeName:t}},addTernaryPredicate:function(e,t){return{type:"ADD_TERNARY_PREDICATE",predicateName:e,nodeName:t}},addTernaryFunction:function(e,t){return{type:"ADD_TERNARY_FUNCTION",functionName:e,nodeName:t}},addQuaternaryPredicate:function(e,t){return{type:"ADD_QUATERNARY_PREDICATE",predicateName:e,nodeName:t}},removeUnaryFunction:function(e,t,n,a){return{type:"REMOVE_UNARY_FUNCTION",functionName:e,sourceNodeName:t,targetNodeName:n,direction:a}},removeUnaryPredicate:function(e,t){return{type:"REMOVE_UNARY_PREDICATE",predicateName:e,nodeName:t}},removeBinaryPredicate:function(e,t,n,a){return{type:"REMOVE_BINARY_PREDICATE",predicateName:e,sourceNodeName:t,targetNodeName:n,direction:a}},removeBinaryFunction:function(e,t){return{type:"REMOVE_BINARY_FUNCTION",functionName:e,nodeName:t}},removeTernaryPredicate:function(e,t){return{type:"REMOVE_TERNARY_PREDICATE",predicateName:e,nodeName:t}},removeTernaryFunction:function(e,t){return{type:"REMOVE_TERNARY_FUNCTION",functionName:e,nodeName:t}},removeQuaternaryPredicate:function(e,t){return{type:"REMOVE_QUATERNARY_PREDICATE",predicateName:e,nodeName:t}},syncDiagram:function(e,t){return{type:"SYNC_DIAGRAM",value:e,focusOnBodyFunc:t}},setConstantValue:h,setPredicateValueText:g,setPredicateValueTable:f,setFunctionValueText:v,setFunctionValueTable:b,toggleTable:O,toggleDatabase:P,lockDomain:y,lockConstantValue:E,lockPredicateValue:N,lockFunctionValue:k,toggleEditableNodes:function(e){return{type:"TOGGLE_EDITABLE_NODES",value:e}},setConstantValueFromLink:function(e,t){return{type:"SET_CONSTANT_VALUE_FROM_LINK",constantNodeName:e,domainNodeName:t}},changeDirectionOfBinaryRelation:function(e,t,n,a,r){return{type:"CHANGE_DIRECTION_OF_BINARY_RELATION",languageElementName:e,sourceNodeName:t,targetNodeName:n,direction:a,langType:r}}},Xa=Object(s.b)((function(e,t){return{structure:e.structure,structureObject:Pe(e),diagramState:e.diagramState,store:t.store}}),qa)(Ja),Za=n(312),$a=n.n(Za),er=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,e)}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(p.a,{className:$a.a.reactDiagram},r.a.createElement(B.a,{sm:12},r.a.createElement(Xa,{store:this.props.store}))),r.a.createElement(p.a,null,r.a.createElement(B.a,{sm:12},r.a.createElement(ut,{diagramModel:this.props.diagramModel}))))}}]),n}(r.a.Component);function tr(e){var t,n=new Map([["domainNodes",e.domainNodes],["constantNodes",e.constantNodes],["ternaryNodes",e.ternaryNodes],["quaternaryNodes",e.quaternaryNodes]]),a={},r=Object(Rt.a)(n.keys());try{for(r.s();!(t=r.n()).done;){var o,i=t.value,s=Object(Rt.a)(n.get(i).entries());try{for(s.s();!(o=s.n()).done;){var c=Object(x.a)(o.value,2),u=c[0],l=c[1];a.hasOwnProperty(i)||(a[i]={});var d="domainNodes"===i||"constantNodes"===i?u:l.getNodeNameCombination();d&&(a[i][d]={x:l.position.x,y:l.position.y})}}catch(m){s.e(m)}finally{s.f()}}}catch(m){r.e(m)}finally{r.f()}return a}var nr=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={modalShow:!1,diagramToggled:!1,exerciseName:""},a.exportState=a.exportState.bind(Object(l.a)(a)),a.importState=a.importState.bind(Object(l.a)(a)),a.setModelShowState=a.setModelShowState.bind(Object(l.a)(a)),a.setDiagramToggledState=a.setDiagramToggledState.bind(Object(l.a)(a)),a.setTeacherModeState=a.setTeacherModeState.bind(Object(l.a)(a)),a.setExerciseNameState=a.setExerciseNameState.bind(Object(l.a)(a)),a.clearGraphSelection=a.clearGraphSelection.bind(Object(l.a)(a)),a}return Object(u.a)(n,[{key:"exportState",value:function(){var e=function(e){return JSON.stringify({common:e.common,language:e.language,structure:e.structure,expressions:e.expressions,diagramCordState:tr(e.diagramState)})}(this.props.store.getState());return{mime:"application/json",filename:0===this.state.exerciseName.length?"structure.json":this.state.exerciseName+".json",contents:e}}},{key:"importState",value:function(e){var t=e.target.files[0],n=new FileReader,a=this.props.store;n.onload=function(e){var t,n;a.dispatch((t=e.target.result,n=a.getState().diagramState,{type:"IMPORT_APP",content:t,diagramState:n}))},n.readAsText(t)}},{key:"setModelShowState",value:function(e){this.setState({modalShow:e})}},{key:"setDiagramToggledState",value:function(e){this.setState({diagramToggled:e})}},{key:"setExerciseNameState",value:function(e){this.setState({exerciseName:e})}},{key:"setTeacherModeState",value:function(){this.props.toggleTeacherMode()}},{key:"clearGraphSelection",value:function(){this.props.store.dispatch({type:"CLEAR_GRAPH_SELECTION"})}},{key:"render",value:function(){return r.a.createElement(s.a,{store:this.props.store},r.a.createElement("div",{className:"app"},r.a.createElement(p.a,{className:"navbar"},r.a.createElement(Ot,{clearGraphSelection:this.clearGraphSelection,exportState:this.exportState,setExerciseNameState:this.setExerciseNameState,modalShowState:this.state.modalShow,diagramToggledState:this.state.diagramToggled,teacherModeState:this.props.teacherMode,setTeacherModeState:this.setTeacherModeState,setDiagramToggledState:this.setDiagramToggledState,setModelShowState:this.setModelShowState,importState:this.importState})),this.state.diagramToggled?r.a.createElement(er,{store:this.props.store,diagramModel:this.props.store.getState().diagramState.diagramModel}):r.a.createElement(gt,{diagramModel:this.props.store.getState().diagramState.diagramModel})))}}]),n}(r.a.Component),ar={toggleTeacherMode:function(){return{type:"TOGGLE_TEACHER_MODE"}}},rr=Object(s.b)((function(e){return{teacherMode:e.common.teacherMode}}),ar)(nr),or=n(146);function ir(e){e.constants.errorMessage||e.constants.parsed.forEach((function(t){e.functions.parsed&&e.functions.parsed.some((function(e){return e.name===t}))?e.constants.errorMessage="".concat(ye," ").concat(t):e.predicates.parsed&&e.predicates.parsed.some((function(e){return e.name===t}))?e.constants.errorMessage="".concat(Ee," ").concat(t):e.constants.parsed.filter((function(e){return e===t})).length>1&&(e.constants.errorMessage="".concat(be,"  ").concat(t))}))}function sr(e){e.predicates.errorMessage||e.predicates.parsed.forEach((function(t){e.constants.parsed&&e.constants.parsed.some((function(e){return e===t.name}))?e.predicates.errorMessage="".concat(be," ").concat(t.name):e.functions.parsed&&e.functions.parsed.some((function(e){return e.name===t.name}))?e.predicates.errorMessage="".concat(ye," ").concat(t.name):e.predicates.parsed.filter((function(e){return e.name===t.name})).length>1&&(e.predicates.errorMessage="".concat(Ee," ").concat(t.name))}))}function cr(e){e.functions.errorMessage||e.functions.parsed.forEach((function(t){e.constants.parsed&&e.constants.parsed.some((function(e){return e===t.name}))?e.functions.errorMessage="".concat(be," ").concat(t.name):e.predicates.parsed&&e.predicates.parsed.some((function(e){return e.name===t.name}))?e.functions.errorMessage="".concat(Ee," ").concat(t.name):e.functions.parsed.filter((function(e){return e.name===t.name})).length>1&&(e.functions.errorMessage="".concat(ye," ").concat(t.name))}))}var ur=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"toString",value:function(){return""}},{key:"createCopy",value:function(){return new n}},{key:"substitute",value:function(e,t,n){}},{key:"getVariables",value:function(){return[]}}]),n}(Xe),lr=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this)).name=e,a}return Object(u.a)(n,[{key:"eval",value:function(e,t){if(!t.has(this.name))throw"The variable\xa0".concat(this.name," is free,\n        but it is not assigned any value by the variable assignment \ud835\udc52.");return t.get(this.name)}},{key:"toString",value:function(){return this.name}},{key:"createCopy",value:function(){return new n(this.name)}},{key:"substitute",value:function(e,t,a){if(this.name===e){if(a&&a.has(t))throw"The variable\xa0".concat(t," cannot be substituted\n          for the variable\xa0").concat(this.name," occuring\n          in the scope of a quantifier that binds\xa0").concat(t,".");return new n(t)}return this.createCopy()}},{key:"getVariables",value:function(){return[this.name]}}]),n}(ur),dr=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this)).name=e,a}return Object(u.a)(n,[{key:"eval",value:function(e,t){if(void 0===e.iConstant.get(this.name)||null===e.iConstant.get(this.name)||""===e.iConstant.get(this.name))throw"The interpretation of the constant ".concat(this.name," is not defined");return e.iConstant.get(this.name)}},{key:"toString",value:function(){return this.name}},{key:"createCopy",value:function(){return new n(this.name)}},{key:"substitute",value:function(e,t,n){return this.createCopy()}},{key:"getVariables",value:function(){return[this.name]}}]),n}(ur),mr=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e,a){var r;return Object(c.a)(this,n),(r=t.call(this)).name=e,r.terms=a,r}return Object(u.a)(n,[{key:"eval",value:function(e,t){var n=[];if(this.terms.forEach((function(a){n.push(a.eval(e,t))})),!e.iFunction.get(this.name+"/"+e.language.functions.get(this.name))[JSON.stringify(n)])throw"The interpretation of the function symbol ".concat(this.name," for ").concat(n.length>1?"(".concat(n,")"):n," is not defined");return e.iFunction.get(this.name+"/"+e.language.functions.get(this.name))[JSON.stringify(n)]}},{key:"toString",value:function(){for(var e=this.name+"(",t=0;t<this.terms.length;t++)t>0&&(e+=", "),e+=this.terms[t].toString();return e+=")"}},{key:"createCopy",value:function(){return new n(this.name,this.terms.map((function(e){return e.createCopy()})))}},{key:"substitute",value:function(e,t,a){return new n(this.name,this.terms.map((function(n){return n.substitute(e,t,a)})))}},{key:"getVariables",value:function(){return this.terms.flatMap((function(e){return e.getVariables()}))}}]),n}(ur),pr=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e,a){var r;return Object(c.a)(this,n),(r=t.call(this)).subLeft=e,r.subRight=a,r}return Object(u.a)(n,[{key:"eval",value:function(e,t){return this.subLeft.eval(e,t)==this.subRight.eval(e,t)}},{key:"toString",value:function(){return"".concat(this.subLeft.toString()," = ").concat(this.subRight.toString())}},{key:"createCopy",value:function(){return new n(this.subLeft.createCopy(),this.subRight.createCopy())}},{key:"getType",value:function(e){return"ATOM"}},{key:"getSubFormulas",value:function(){return[]}},{key:"substitute",value:function(e,t,a){return new n(this.subLeft.substitute(e,t,a),this.subRight.substitute(e,t,a))}},{key:"getSubFormulasCommitment",value:function(e){return[]}},{key:"getVariables",value:function(){return this.subLeft.getVariables().concat(this.subRight.getVariables())}}]),n}(Ze),hr=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this)).subFormula=e,a}return Object(u.a)(n,[{key:"eval",value:function(e,t){return!this.subFormula.eval(e,t)}},{key:"toString",value:function(){return"\xac".concat(this.subFormula.toString())}},{key:"createCopy",value:function(){return new n(this.subFormula.createCopy())}},{key:"getType",value:function(e){return"GAME_OPERATOR"}},{key:"getSubFormulas",value:function(){return[this.subFormula]}},{key:"substitute",value:function(e,t,a){return new n(this.subFormula.substitute(e,t,a))}},{key:"getSubFormulasCommitment",value:function(e){return[!e]}},{key:"getVariables",value:function(){return this.subFormula.getVariables()}}]),n}(Ze),gr=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e,a){var r;return Object(c.a)(this,n),(r=t.call(this)).subLeft=e,r.subRight=a,r}return Object(u.a)(n,[{key:"eval",value:function(e,t){var n=this.subLeft.eval(e,t),a=this.subRight.eval(e,t);return n&&a}},{key:"toString",value:function(){return"(".concat(this.subLeft.toString()," \u2227 ").concat(this.subRight.toString(),")")}},{key:"createCopy",value:function(){return new n(this.subLeft.createCopy(),this.subRight.createCopy())}},{key:"getType",value:function(e){return e?"GAME_OPERATOR":"PLAYER_OPERATOR"}},{key:"getSubFormulas",value:function(){return[this.subLeft,this.subRight]}},{key:"substitute",value:function(e,t,a){return new n(this.subLeft.substitute(e,t,a),this.subRight.substitute(e,t,a))}},{key:"getSubFormulasCommitment",value:function(e){return[e,e]}},{key:"getVariables",value:function(){return this.subLeft.getVariables().concat(this.subRight.getVariables())}}]),n}(Ze),fr=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e,a){var r;return Object(c.a)(this,n),(r=t.call(this)).subLeft=e,r.subRight=a,r}return Object(u.a)(n,[{key:"eval",value:function(e,t){var n=this.subLeft.eval(e,t),a=this.subRight.eval(e,t);return n||a}},{key:"toString",value:function(){return"(".concat(this.subLeft.toString()," \u2228 ").concat(this.subRight.toString(),")")}},{key:"createCopy",value:function(){return new n(this.subLeft.createCopy(),this.subRight.createCopy())}},{key:"getType",value:function(e){return e?"PLAYER_OPERATOR":"GAME_OPERATOR"}},{key:"getSubFormulas",value:function(){return[this.subLeft,this.subRight]}},{key:"substitute",value:function(e,t,a){return new n(this.subLeft.substitute(e,t,a),this.subRight.substitute(e,t,a))}},{key:"getSubFormulasCommitment",value:function(e){return[e,e]}},{key:"getVariables",value:function(){return this.subLeft.getVariables().concat(this.subRight.getVariables())}}]),n}(Ze),vr=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e,a){var r;return Object(c.a)(this,n),(r=t.call(this)).variableName=e,r.subFormula=a,r}return Object(u.a)(n,[{key:"eval",value:function(e,t){var n,a=new Map(t),r=Object(Rt.a)(e.domain);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(a.set(this.variableName,o),this.subFormula.eval(e,a))return!0}}catch(i){r.e(i)}finally{r.f()}return!1}},{key:"toString",value:function(){return"\u2203".concat(this.variableName," ").concat(this.subFormula.toString())}},{key:"createCopy",value:function(){return new n(this.variableName,this.subFormula.createCopy())}},{key:"getType",value:function(e){return e?"PLAYER_QUANTIFIER":"GAME_QUANTIFIER"}},{key:"getSubFormulas",value:function(){return[this.subFormula]}},{key:"substitute",value:function(e,t,a){return this.variableName!==e?new n(this.variableName,this.subFormula.substitute(e,t,new Set([this.variableName].concat(Object(oe.a)(null!==a&&void 0!==a?a:[]))))):this.createCopy()}},{key:"getSubFormulasCommitment",value:function(e){return[e]}},{key:"getVariables",value:function(){var e=this.subFormula.getVariables();return e.push(this.variableName),e}}]),n}(Ze),br=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e,a){var r;return Object(c.a)(this,n),(r=t.call(this)).variableName=e,r.subFormula=a,r}return Object(u.a)(n,[{key:"eval",value:function(e,t){var n,a=new Map(t),r=Object(Rt.a)(e.domain);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(a.set(this.variableName,o),!this.subFormula.eval(e,a))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}},{key:"toString",value:function(){return"\u2200".concat(this.variableName," ").concat(this.subFormula.toString())}},{key:"createCopy",value:function(){return new n(this.variableName,this.subFormula.createCopy())}},{key:"getType",value:function(e){return e?"GAME_QUANTIFIER":"PLAYER_QUANTIFIER"}},{key:"getSubFormulas",value:function(){return[this.subFormula]}},{key:"substitute",value:function(e,t,a){return this.variableName!==e?new n(this.variableName,this.subFormula.substitute(e,t,new Set([this.variableName].concat(Object(oe.a)(null!==a&&void 0!==a?a:[]))))):this.createCopy()}},{key:"getSubFormulasCommitment",value:function(e){return[e]}},{key:"getVariables",value:function(){var e=this.subFormula.getVariables();return e.push(this.variableName),e}}]),n}(Ze),yr=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e,a){var r;return Object(c.a)(this,n),(r=t.call(this)).subLeft=e,r.subRight=a,r}return Object(u.a)(n,[{key:"eval",value:function(e,t){return this.subLeft.eval(e,t)==this.subRight.eval(e,t)}},{key:"toString",value:function(){return"(".concat(this.subLeft.toString()," \u2194 ").concat(this.subRight.toString(),")")}},{key:"createCopy",value:function(){return new n(this.subLeft.createCopy(),this.subRight.createCopy())}},{key:"getType",value:function(e){return e?"GAME_OPERATOR":"PLAYER_OPERATOR"}},{key:"getSubFormulas",value:function(){return[new et(this.subLeft,this.subRight),new et(this.subRight,this.subLeft)]}},{key:"substitute",value:function(e,t,a){return new n(this.subLeft.substitute(e,t,a),this.subRight.substitute(e,t,a))}},{key:"getSubFormulasCommitment",value:function(e){return[e,e]}},{key:"getVariables",value:function(){return this.subLeft.getVariables().concat(this.subRight.getVariables())}}]),n}(Ze);function Er(e,t,n){e.value=t,e.errorMessage="";try{switch(n){case"CONSTANT":e.parsed=Object(Ht.parseConstants)(t);break;case S:e.parsed=Object(Ht.parsePredicates)(t);break;case C:e.parsed=Object(Ht.parseFunctions)(t)}}catch(a){return e.errorMessage=a.message,!1}return!0}function Nr(e,t,n,a){e.value=t,e.errorMessage="";try{switch(a){case"DOMAIN":e.parsed=Object(Ht.parseDomain)(t);break;case S:case C:e.parsed=Object(Ht.parseTuples)(t);break;case"VARIABLE":e.parsed=Object(Ht.parseValuation)(t,Oe(n).getLanguage())}}catch(r){e.errorMessage=r.message}}function kr(e,t,n,a){var r=Oe(n);e.value=t,e.errorMessage="";try{if(a===A){var o=Or(r);e.parsed=Object(Ht.parseTerm)(t,r.getLanguage(),o)}else{var i=function(e){return Object(Se.a)({},Or(e),{},{predicateAtom:function(t,n,a){return e.checkPredicateArity(t,n,a),new $e(t,n)},equalityAtom:function(e,t,n){return new pr(e,t)},negation:function(e,t){return new hr(e)},conjunction:function(e,t,n){return new gr(e,t)},disjunction:function(e,t,n){return new fr(e,t)},implication:function(e,t,n){return new et(e,t)},equivalence:function(e,t,n){return new yr(e,t)},existentialQuant:function(e,t,n){return new vr(e,t)},universalQuant:function(e,t,n){return new br(e,t)}})}(r);e.parsed=Object(Ht.parseFormulaWithPrecedence)(t,r.getLanguage(),i)}}catch(s){e.errorMessage=s.message,e.parsed=null}}function Or(e){return{variable:function(e,t){return new lr(e)},constant:function(e,t){return new dr(e)},functionApplication:function(t,n,a){return e.checkFunctionArity(t,n,a),new mr(t,n)}}}var Pr=n(61);function Tr(e,t,n){e.predicates.parsed.some((function(e){return t===e.name&&n===e.arity}))||(e.predicates.parsed.push({name:t,arity:n}),e.predicates.value=e.predicates.parsed.map((function(e){return e.name+"/"+e.arity})).join(","),sr(e))}function Cr(e,t,n){e.functions.parsed.some((function(e){return t===e.name&&n===e.arity}))||(e.functions.parsed.push({name:t,arity:n}),e.functions.value=e.functions.parsed.map((function(e){return e.name+"/"+e.arity})).join(","),cr(e))}function Sr(e){Er(e.constants,e.constants.value,"CONSTANT")&&ir(e)}function jr(e){Er(e.predicates,e.predicates.value,S)&&sr(e)}function Ar(e){Er(e.functions,e.functions.value,C)&&cr(e)}var Mr=Object(Pr.a)((function(e,t){switch(t.type){case"SET_CONSTANTS":return Er(e.constants,t.value,"CONSTANT"),ir(e),jr(e),void Ar(e);case"SET_PREDICATES":return Er(e.predicates,t.value,S),sr(e),Sr(e),void Ar(e);case"SET_FUNCTIONS":return Er(e.functions,t.value,C),cr(e),jr(e),void Sr(e);case"ADD_UNARY_PREDICATE":return void Tr(e,t.predicateName,1);case"ADD_BINARY_PREDICATE":return void Tr(e,t.predicateName,2);case"ADD_TERNARY_PREDICATE":return void Tr(e,t.predicateName,3);case"ADD_QUATERNARY_PREDICATE":return void Tr(e,t.predicateName,4);case"ADD_UNARY_FUNCTION":return void Cr(e,t.functionName,1);case"ADD_BINARY_FUNCTION":return void Cr(e,t.functionName,2);case"ADD_TERNARY_FUNCTION":return void Cr(e,t.functionName,3);case"ADD_CONSTANT_NODE":return e.constants.parsed.push(t.nodeName),e.constants.value=e.constants.parsed.join(", "),void ir(e);case"RENAME_DOMAIN_NODE":case"REMOVE_DOMAIN_NODE":return Er(e.constants,function(e){return e.constants.parsed.join(", ")}(e),"CONSTANT"),ir(e),Er(e.predicates,function(e){return e.predicates.parsed.map((function(e){return e.name+"/"+e.arity})).join(", ")}(e),S),sr(e),Er(e.functions,function(e){return e.functions.parsed.map((function(e){return e.name+"/"+e.arity})).join(", ")}(e),C),void cr(e);case"REMOVE_CONSTANT_NODE":return e.constants.parsed=e.constants.parsed.filter((function(e){return e!=t.nodeName})),e.constants.value=e.constants.parsed.join(", "),void ir(e);case"RENAME_CONSTANT_NODE":return e.constants.parsed=e.constants.parsed.map((function(e){return e===t.oldName?t.newName:e})),e.constants.value=e.constants.parsed.join(", "),void ir(e);case"LOCK_CONSTANTS":return void(e.constants.locked=!e.constants.locked);case"LOCK_PREDICATES":return void(e.predicates.locked=!e.predicates.locked);case"LOCK_FUNCTIONS":return void(e.functions.locked=!e.functions.locked);case"LOCK_LANGUAGE_COMPONENT":return void(e.lockedComponent=!e.lockedComponent);case"IMPORT_APP":return ir(e),sr(e),void cr(e);default:return}})),wr=function(){return Object(Se.a)({},{value:"",locked:!1,errorMessage:"",parsed:[]},{tableEnabled:!1})};function xr(e,t){return"B"===t?e[0]===e[1]?[[e[0],e[1]]]:[[e[0],e[1]],[e[1],e[0]]]:"F"===t?[[e[0],e[1]]]:[[e[1],e[0]]]}function Dr(e,t,n,a,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",i=n+"/"+a;if(Gr(e,t),null!==r)if(""!==o){var s=xr(r,o);s.forEach((function(t){e.predicates[i].parsed.some((function(e){return Jr(e,t)}))||e.predicates[i].parsed.push(t)}))}else e.predicates[i].parsed.push(r);e.predicates[i].value=Kr(e.predicates[i].parsed),Qr(e,i)}function Fr(e,t,n,a,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",i=n+"/"+a;if(Gr(e,t),null!==r)if(""!==o){var s=xr(r,o);s.forEach((function(t){e.functions[i].parsed.some((function(e){return Jr(e,t)}))||e.functions[i].parsed.push(t)}))}else e.functions[i].parsed.push(r);e.functions[i].value=Kr(e.functions[i].parsed),Hr(e,i)}function Rr(e,t,n,a){var r=t+"/"+n,o=JSON.stringify(a);e.predicates[r].parsed=e.predicates[r].parsed.filter((function(e){return JSON.stringify(e)!==o})),e.predicates[r].value=Kr(e.predicates[r].parsed),Qr(e,r)}function _r(e,t,n,a){var r=t+"/"+n,o=JSON.stringify(a);e.functions[r].parsed=e.functions[r].parsed.filter((function(e){return JSON.stringify(e)!==o})),e.functions[r].value=Kr(e.functions[r].parsed),Hr(e,r)}function Lr(e){e.domain.parsed&&0===e.domain.parsed.length&&""===e.domain.errorMessage&&(e.domain.errorMessage="Domain cannot be empty")}function Ir(e){Object.keys(e.constants).forEach((function(t){Wr(e,t,e.constants[t].value)}))}function Vr(e){Object.keys(e.predicates).forEach((function(t){Qr(e,t)}))}function zr(e){Object.keys(e.functions).forEach((function(t){Hr(e,t)}))}function Br(e,t){Ur(e,t),Gr(e,t)}function Ur(e,t){Object.keys(e.constants).forEach((function(n){t.constants.parsed.some((function(e){return e===n}))||delete e.constants[n]})),Object.keys(e.predicates).forEach((function(n){t.predicates.parsed.some((function(e){return e.name+"/"+e.arity===n}))||delete e.predicates[n]})),Object.keys(e.functions).forEach((function(n){t.functions.parsed.some((function(e){return e.name+"/"+e.arity===n}))||delete e.functions[n]}))}function Gr(e,t){t.constants.parsed.forEach((function(t){e.constants[t]||(e.constants[t]=Object(Se.a)({},{value:"",locked:!1,errorMessage:"",parsed:[]},{errorMessage:"An interpretation of this constant must be defined"}))})),t.predicates.parsed.forEach((function(t){var n=t.name+"/"+t.arity;e.predicates[n]||(e.predicates[n]=wr())})),t.functions.parsed.forEach((function(t){var n=t.name+"/"+t.arity;e.functions[n]||(e.functions[n]=wr(),Hr(e,n))}))}function Yr(e,t){if(e.variables.parsed&&""===e.variables.errorMessage){var n="";e.variables.parsed.forEach((function(a){var r=a[0],o=a[1];t.constants.parsed.some((function(e){return e===r}))||t.functions.parsed.some((function(e){return e.name+"/"+e.arity===r}))||t.predicates.parsed.some((function(e){return e.name+"/"+e.arity===r}))?n="Language \ud835\udcdb already contains the symbol ".concat(r):e.domain.parsed.some((function(e){return e===o}))||(n=function(e){return"".concat(e," is not an element of the domain")}(o))})),e.variables.errorMessage=n}}function Wr(e,t,n){try{!function(e,t,n,a){if(!n[e])throw"Jazyk neobsahuje kon\u0161tantu ".concat(e);if(!a.includes(t))throw"An interpretation of this constant must be defined"}(t,n,e.constants,e.domain.parsed),e.constants[t].value=n,e.constants[t].errorMessage=""}catch(a){console.error(a),e.constants[t].errorMessage=a,e.constants[t].value=""}}function Qr(e,t){if(""===e.predicates[t].errorMessage){var n=t.split("/")[1];e.predicates[t].errorMessage=function(e,t,n){var a="";return e.forEach((function(r){if(r.length===parseInt(n))if(e.filter((function(e){return JSON.stringify(e)===JSON.stringify(r)})).length>1)a="N-tica ".concat(r," sa v predik\xe1te u\u017e nach\xe1dza");else{var o=r.filter((function(e){return!t.includes(e)}));o.length>0&&(a="Prvok ".concat(o[0]," nie je v dom\xe9ne \u0161trukt\xfary"))}else a="N-tica ".concat(r," nem\xe1 povolen\xfd po\u010det prvkov")})),a}(e.predicates[t].parsed,e.domain.parsed,n)}}function Hr(e,t){var n=t.split("/")[1];e.functions[t].errorMessage=function(e,t,n){var a="",r=[];return n=parseInt(n),e.forEach((function(e){var o=e.slice(0,e.length-1),i=o.join(",");if(r.includes(i))a=function(e){return"Multiple function values are assigned to ".concat(e)}(o);else if(o.length===n){var s=e.filter((function(e){return!t.includes(e)}));s.length>0?a="Prvok ".concat(s[0]," nie je v dom\xe9ne \u0161trukt\xfary"):r.push(i)}else a="Prvok ".concat(1==e.length?e:"(".concat(e,")")," nezodpoved\xe1 arite funk\u010dn\xe9ho symbolu, prvky interpret\xe1cie musia by\u0165 ").concat(n+1,"-tice")})),""===a&&e.length!==Math.pow(t.length,n)&&(a="Function is not total (i.e., defined for all domain elements or tuples)"),a}(e.functions[t].parsed,e.domain.parsed,n)}function Kr(e){return void 0===e||0===e.length?"":e.map((function(e){return 0===(t=e).length?"":1===t.length?t[0]:"("+t.join(", ")+")";var t})).join(", ")}function Jr(e,t){return e.length==t.length&&e.every((function(e,n){return e===t[n]}))}var qr=Object(Pr.a)((function(e,t,n){switch(t.type){case"SET_CONSTANTS":case"SET_PREDICATES":case"SET_FUNCTIONS":return Br(e,n.language),void Yr(e,n.language);case"ADD_CONSTANT_NODE":return void Gr(e,n.language);case"REMOVE_CONSTANT_NODE":return void Ur(e,n.language);case"SET_CONSTANT_VALUE_FROM_LINK":return void Wr(e,t.constantNodeName,t.domainNodeName);case"RENAME_CONSTANT_NODE":var a=Object.keys(e.constants).map((function(n){var a=n===t.oldName?t.newName:n;return Object(je.a)({},a,e.constants[n])}));return e.constants=Object.assign.apply(Object,[{}].concat(Object(oe.a)(a))),void Br(e,n.language);case"ADD_UNARY_PREDICATE":return void Dr(e,n.language,t.predicateName,1,[t.nodeName]);case"ADD_BINARY_PREDICATE":return void Dr(e,n.language,t.predicateName,2,[t.sourceNodeName,t.targetNodeName],t.direction);case"ADD_TERNARY_PREDICATE":return void Dr(e,n.language,t.predicateName,3,t.nodeName);case"ADD_QUATERNARY_PREDICATE":return void Dr(e,n.language,t.predicateName,4,t.nodeName);case"ADD_BINARY_FUNCTION":return void Fr(e,n.language,t.functionName,2,t.nodeName);case"ADD_TERNARY_FUNCTION":return void Fr(e,n.language,t.functionName,3,t.nodeName);case"REMOVE_UNARY_PREDICATE":return void Rr(e,t.predicateName,1,[t.nodeName]);case"REMOVE_BINARY_PREDICATE":return void function(e,t,n,a,r){var o=[a,r];n===Qt?o=[r,a]:Rr(e,t,2,[r,a]);Rr(e,t,2,o)}(e,t.predicateName,t.direction,t.sourceNodeName,t.targetNodeName);case"REMOVE_TERNARY_PREDICATE":return void Rr(e,t.predicateName,3,t.nodeName);case"REMOVE_QUATERNARY_PREDICATE":return void Rr(e,t.predicateName,4,t.nodeName);case"REMOVE_BINARY_FUNCTION":return void _r(e,t.functionName,2,t.nodeName);case"REMOVE_TERNARY_FUNCTION":return void _r(e,t.functionName,3,t.nodeName);case"CHANGE_DIRECTION_OF_BINARY_RELATION":var r,o="P"===t.langType?2:1;return"F"===t.direction?r=[t.targetNodeName,t.sourceNodeName]:t.direction===Qt&&(r=[t.sourceNodeName,t.targetNodeName]),void("P"===t.langType?(Rr(e,t.languageElementName,o,r),Dr(e,n.language,t.languageElementName,o,[t.sourceNodeName,t.targetNodeName],t.direction)):(_r(e,t.languageElementName,o,r),Fr(e,n.language,t.languageElementName,o,[t.sourceNodeName,t.targetNodeName],t.direction)));case"ADD_UNARY_FUNCTION":return void Fr(e,n.language,t.functionName,1,[t.sourceNodeName,t.targetNodeName],t.direction);case"REMOVE_UNARY_FUNCTION":return void function(e,t,n,a,r){var o=[a,r];n===Qt?o=[r,a]:_r(e,t,1,[r,a]);_r(e,t,1,o)}(e,t.functionName,t.direction,t.sourceNodeName,t.targetNodeName);case"SET_CONSTANT_VALUE":return void Wr(e,t.constantName,t.value);case"SET_PREDICATE_VALUE_TEXT":return Nr(e.predicates[t.predicateName],t.value,n,S),void Qr(e,t.predicateName);case"SET_PREDICATE_VALUE_TABLE":if(t.checked){if(e.predicates[t.predicateName].parsed.some((function(e){return JSON.stringify(e)===JSON.stringify(t.value)})))return;e.predicates[t.predicateName].parsed.push(t.value)}else{var i=0;e.predicates[t.predicateName].parsed.forEach((function(n){JSON.stringify(n)!==JSON.stringify(t.value)?i++:e.predicates[t.predicateName].parsed.splice(i,1)}))}return e.predicates[t.predicateName].value=Kr(e.predicates[t.predicateName].parsed),void Qr(e,t.predicateName);case"SET_FUNCTION_VALUE_TEXT":return Nr(e.functions[t.functionName],t.value,n,C),void Hr(e,t.functionName);case"SET_FUNCTION_VALUE_TABLE":var s=t.value.slice(0,t.value.length-1),c=t.value[t.value.length-1],u=0;return e.functions[t.functionName].parsed.forEach((function(n){JSON.stringify(n.slice(0,n.length-1))!==JSON.stringify(s)?u++:e.functions[t.functionName].parsed.splice(u,1)})),""!==c&&e.functions[t.functionName].parsed.push(t.value),e.functions[t.functionName].value=Kr(e.functions[t.functionName].parsed),void Hr(e,t.functionName);case"SET_VARIABLES_VALUE":return Nr(e.variables,t.value,n,"VARIABLE"),void Yr(e,n.language);case"RENAME_DOMAIN_NODE":return Br(e,n.language),e.domain.parsed=e.domain.parsed.map((function(e){return e===t.oldName?t.newName:e})),e.domain.value=e.domain.parsed.join(", "),Lr(e),0!==e.domain.parsed.length&&(e.domain.errorMessage=""),Object.keys(e.constants).forEach((function(n){e.constants[n].value===t.oldName&&(e.constants[n].value=t.newName)})),Ir(e),void function(e,t,n,a){t.predicates.parsed.forEach((function(t){var r=t.name+"/"+t.arity;e.predicates[r].parsed=e.predicates[r].parsed.map((function(e){return e.map((function(e){return e===n?a:e}))})),e.predicates[r].value=Kr(e.predicates[r].parsed)}))}(e,n.language,t.oldName,t.newName);case"ADD_DOMAIN_NODE":return e.domain.parsed.push(t.nodeName),e.domain.value=e.domain.parsed.join(", "),Lr(e),void(0!==e.domain.parsed.length&&(e.domain.errorMessage=""));case"REMOVE_DOMAIN_NODE":return e.domain.parsed=e.domain.parsed.filter((function(e){return e!==t.nodeName})),e.domain.value=e.domain.parsed.join(", "),Lr(e),0!==e.domain.parsed.length&&(e.domain.errorMessage=""),n.language.constants.parsed.forEach((function(n){e.constants[n].value===t.oldName&&(e.constants[n].value="")})),void Ir(e);case"SET_DOMAIN":return Nr(e.domain,t.value,n,"DOMAIN"),Lr(e),Ir(e),Vr(e),zr(e),void Yr(e,n.language);case"TOGGLE_EDIT_TABLE":return void(t.itemType===S?(e.predicates[t.name].tableEnabled=!e.predicates[t.name].tableEnabled,e.predicates[t.name].tableEnabled&&(e.predicates[t.name].databaseEnabled=!1)):t.itemType===C&&(e.functions[t.name].tableEnabled=!e.functions[t.name].tableEnabled,e.functions[t.name].tableEnabled&&(e.functions[t.name].databaseEnabled=!1)));case"TOGGLE_EDIT_DATABASE":return void(t.itemType===S?(e.predicates[t.name].databaseEnabled=!e.predicates[t.name].databaseEnabled,e.predicates[t.name].databaseEnabled&&(e.predicates[t.name].tableEnabled=!1)):t.itemType===C&&(e.functions[t.name].databaseEnabled=!e.functions[t.name].databaseEnabled,e.functions[t.name].databaseEnabled&&(e.functions[t.name].tableEnabled=!1)));case"LOCK_DOMAIN":return void(e.domain.locked=!e.domain.locked);case"LOCK_CONSTANT_VALUE":return void(e.constants[t.constantName].locked=!e.constants[t.constantName].locked);case"LOCK_PREDICATE_VALUE":return void(e.predicates[t.predicateName].locked=!e.predicates[t.predicateName].locked);case"LOCK_FUNCTION_VALUE":return void(e.functions[t.functionName].locked=!e.functions[t.functionName].locked);case"LOCK_VARIABLES":return void(e.variables.locked=!e.variables.locked);case"IMPORT_APP":return Lr(e),Ir(e),Vr(e),zr(e),void Yr(e,n.language);default:return}})),Xr=Object(ve.a)([function(e){return e.structure.variables.parsed}],(function(e){return new Map(e)}));function Zr(e){e.gameHistory=new Array,e.showVariables=!1,e.gameEnabled=!1,e.variableIndex=1}function $r(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.formulas.forEach((function(e){a&&kr(e,e.value,t,j),eo(t,e,n)})),e.terms.forEach((function(e){a&&kr(e,e.value,t,A),eo(t,e,n)}))}function eo(e,t,n){if(t.parsed&&0!==t.parsed.length){t.errorMessage="";try{t.expressionValue=t.parsed.eval(Pe(e),n)}catch(a){t.errorMessage=a,t.expressionValue=null}}}function to(e,t,n,a,r,o,i){e.gameHistory.push(function(e,t,n,a,r,o){return{gameCommitment:e,currentFormula:n,nextMove:a,gameVariables:t,gameMessages:r,userMessages:o}}(n,r,t.createCopy(),a,o,i))}function no(e,t,n,a,r){if("GAME_OPERATOR"===e.getType(t)){for(var o=e.getSubFormulas(),i=o.map((function(e){return e.eval(n,a)})),s=e.getSubFormulasCommitment(t),c=Math.floor(Math.random()*o.length),u=0;u<o.length;u++)if(s[u]!==i[u])return{formula:o[u],commitment:s[u],variables:a};return{formula:o[c],commitment:s[c],variables:a}}if("GAME_QUANTIFIER"===e.getType(t)){var l=Array.from(n.domain),d=new Map(a),m="n"+r.variableIndex;console.log(e);var p=e.subFormula.substitute(e.variableName,m);console.log(p),r.variableIndex=ao(p,r.variableIndex,d);for(var h=0,g=l;h<g.length;h++){var f=g[h];if(d.set(m,f),p.eval(n,d)!==t)return{formula:p,commitment:t,variables:[m,f]}}return{formula:p,commitment:t,variables:[m,l[Math.floor(Math.random()*l.length)]]}}return null}function ao(e,t,n){for(var a=e.getVariables();a.includes("n"+t)||n.has("n"+t);)t++;return t}var ro=Object(Pr.a)((function(e,t,n){var a=Xr(n);switch(t.type){case"SET_CONSTANTS":case"SET_PREDICATES":case"SET_FUNCTIONS":return void $r(e,n,a,!0);case"IMPORT_APP":return $r(e,n,a,!0),void e.formulas.forEach((function(e){return Zr(e)}));case"SET_CONSTANT_VALUE":case"SET_PREDICATE_VALUE_TEXT":case"SET_PREDICATE_VALUE_TABLE":case"SET_FUNCTION_VALUE_TEXT":case"SET_FUNCTION_VALUE_TABLE":case"SET_VARIABLES_VALUE":return void $r(e,n,a);case"ADD_EXPRESSION":return void function(e,t){t===j?e.formulas.push(Object(Se.a)({},{value:"",expressionValue:null,answerValue:"",errorMessage:"",inputLocked:!1,answerLocked:!1,parsed:null},{},{gameHistory:new Array,showVariables:!1,gameEnabled:!1,variableIndex:1})):t===A&&e.terms.push({value:"",expressionValue:null,answerValue:"",errorMessage:"",inputLocked:!1,answerLocked:!1,parsed:null})}(e,t.expressionType);case"REMOVE_EXPRESSION":return void function(e,t,n){t===j&&n<e.formulas.length?e.formulas.splice(n,1):t===A&&n<e.terms.length&&e.terms.splice(n,1)}(e,t.expressionType,t.index);case"SET_EXPRESSION_ANSWER":return void function(e,t,n,a){if(t===j&&n<e.formulas.length){var r="true"===a;""===a&&(r=""),e.formulas[n].answerValue=r}else t===A&&n<e.terms.length&&(e.terms[n].answerValue=a)}(e,t.expressionType,t.index,t.answer);case"LOCK_EXPRESSION_VALUE":return void function(e,t,n){t===j&&n<e.formulas.length?e.formulas[n].inputLocked=!e.formulas[n].inputLocked:t===A&&n<e.terms.length&&(e.terms[n].inputLocked=!e.terms[n].inputLocked)}(e,t.expressionType,t.expressionIndex);case"LOCK_EXPRESSION_ANSWER":return void function(e,t,n){t===j&&n<e.formulas.length?e.formulas[n].answerLocked=!e.formulas[n].answerLocked:t===A&&n<e.terms.length&&(e.terms[n].answerLocked=!e.terms[n].answerLocked)}(e,t.expressionType,t.expressionIndex);case"CHECK_SYNTAX":return void function(e,t,n,a){var r=n.value,o=e.terms[n.index];n.expressionType===j&&(o=e.formulas[n.index]);kr(o,r,t,n.expressionType),o.value=n.value,n.expressionType===j&&Zr(o);0===o.errorMessage.length?(o.validSyntax=!0,eo(t,o,a)):o.validSyntax=!1}(e,n,t,a);case"ADD_DOMAIN_NODE":case"RENAME_DOMAIN_NODE":case"REMOVE_DOMAIN_NODE":case"ADD_CONSTANT_NODE":case"RENAME_CONSTANT_NODE":case"REMOVE_CONSTANT_NODE":case"ADD_UNARY_PREDICATE":case"REMOVE_UNARY_PREDICATE":case"ADD_UNARY_FUNCTION":case"REMOVE_UNARY_FUNCTION":case"ADD_BINARY_PREDICATE":case"REMOVE_BINARY_PREDICATE":case"ADD_TERNARY_PREDICATE":case"REMOVE_TERNARY_PREDICATE":case"ADD_QUATERNARY_PREDICATE":case"REMOVE_QUATERNARY_PREDICATE":case"ADD_BINARY_FUNCTION":case"REMOVE_BINARY_FUNCTION":case"ADD_TERNARY_FUNCTION":case"REMOVE_TERNARY_FUNCTION":case"REMOVE_TERNARY_NODE":case"REMOVE_QUATERNARY_NODE":case"SET_CONSTANT_VALUE_FROM_LINK":case"IMPORT_DIAGRAM_STATE":case"CHANGE_DIRECTION_OF_BINARY_RELATION":return void $r(e,n,a,!0);case"INITIATE_GAME":case"SET_GAME_COMMITMENT":case"CONTINUE_GAME":case"SET_GAME_DOMAIN_CHOICE":case"SET_GAME_NEXT_FORMULA":case"END_GAME":case"GET_VARIABLES":case"GO_BACK":return void function(e,t,n,a){var r=e.gameHistory.length>0?e.gameHistory[e.gameHistory.length-1]:null;switch(t.type){case"INITIATE_GAME":if(e.parsed){e.gameEnabled=!e.gameEnabled,e.gameHistory=new Array;var o=new Map(a);e.variableIndex=ao(e.parsed,1,o),to(e,e.parsed,null,null,o,[],[])}return;case"SET_GAME_COMMITMENT":var i=no(r.currentFormula,t.commitment,Pe(n),r.gameVariables,e);return void to(e,r.currentFormula,t.commitment,i,r.gameVariables,t.gameMessages,t.userMessages);case"CONTINUE_GAME":var s=new Map(r.gameVariables);if(!r)return;"GAME_QUANTIFIER"===r.currentFormula.getType(r.gameCommitment)&&s.set(r.nextMove.variables[0],r.nextMove.variables[1]);var c=no(r.nextMove.formula,r.nextMove.commitment,Pe(n),s,e);return void to(e,r.nextMove.formula,r.nextMove.commitment,c,s,t.gameMessages,t.userMessages);case"SET_GAME_DOMAIN_CHOICE":if(!r)return;var u=new Map(r.gameVariables),l="n"+e.variableIndex;u.set(l,t.value),console.log(r.currentFormula),console.log(l);var d=r.currentFormula.subFormula.substitute(r.currentFormula.variableName,l);console.log(d),e.variableIndex=ao(d,e.variableIndex,u);var m=no(d,r.gameCommitment,Pe(n),u,e);return void to(e,d,r.gameCommitment,m,u,t.gameMessages,t.userMessages);case"SET_GAME_NEXT_FORMULA":var p=t.formula.createCopy(),h=no(p,t.commitment,Pe(n),r.gameVariables,e);return void to(e,p,t.commitment,h,r.gameVariables,t.gameMessages,t.userMessages);case"END_GAME":return void Zr(e);case"GET_VARIABLES":return void(e.showVariables=!e.showVariables);case"GO_BACK":return void(e.gameHistory=e.gameHistory.slice(0,t.historyIndex));default:;}}(e.formulas[t.index],t,n,a);default:return}})),oo=Object(Pr.a)((function(e,t){return"TOGGLE_TEACHER_MODE"===t.type?void(e.teacherMode=!e.teacherMode):void 0})),io=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.call(this,"unbinary")}return Object(u.a)(n,[{key:"generateReactWidget",value:function(e){var t=e.model.getReduxProps();return a.createElement(ra,{removeDomainNode:t.removeDomainNode,renameDomainNode:t.renameDomainNode,engine:this.engine,size:50,model:e.model})}},{key:"generateModel",value:function(e){return new mn}}]),n}(wt.AbstractReactFactory),so=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.call(this,"constant")}return Object(u.a)(n,[{key:"generateReactWidget",value:function(e){var t=e.model.options.reduxProps;return a.createElement(da,{removeConstantNode:t.removeConstantNode,renameConstantNode:t.renameConstantNode,engine:this.engine,size:50,model:e.model})}},{key:"generateModel",value:function(e){return new on}}]),n}(wt.AbstractReactFactory),co=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.call(this,"binary")}return Object(u.a)(n,[{key:"generateReactWidget",value:function(e){return a.createElement(Hn,{model:e.model,engine:this.engine})}},{key:"generateModel",value:function(e){return new nn}}]),n}(wt.AbstractReactFactory),uo=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e,a){var r;return Object(c.a)(this,n),(r=t.call(this,e)).cb=void 0,r.cb=a,r}return Object(u.a)(n,[{key:"generateModel",value:function(e){return this.cb(e.initialConfig)}}]),n}(wt.AbstractModelFactory);function lo(){var e=Object(we.a)(["\n\t\tpointer-events: all;\n\t"]);return lo=function(){return e},e}var mo=Pt.default.circle(lo()),po=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={selected:!1},a}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.props.point;return a.createElement("g",null,a.createElement("circle",{cx:t.getPosition().x,cy:t.getPosition().y,r:5,fill:this.state.selected||this.props.point.isSelected()?this.props.colorSelected:this.props.color}),a.createElement(mo,{className:"point",onMouseLeave:function(){e.setState({selected:!1})},onMouseEnter:function(){e.setState({selected:!0})},"data-id":t.getID(),"data-linkid":t.getLink().getID(),cx:t.getPosition().x,cy:t.getPosition().y,r:15,opacity:0}))}}]),n}(a.Component),ho=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=a.cloneElement(this.props.factory.generateLinkSegment(this.props.link,this.props.selected||this.props.link.isSelected(),this.props.path),{ref:this.props.forwardRef}),n=a.cloneElement(t,Object(Se.a)({strokeLinecap:"round",onMouseLeave:function(){e.props.onSelection(!1)},onMouseEnter:function(){e.props.onSelection(!0)}},this.props.extras,{ref:null,"data-linkid":this.props.link.getID(),strokeOpacity:this.props.selected?.1:0,strokeWidth:20,fill:"none",onContextMenu:function(t){e.props.link.isLocked()||(t.preventBinary(),e.props.link.remove())}}));return a.createElement("g",null,t,n)}}]),n}(a.Component),go=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).refPaths=void 0,a.refPaths=[],a.state={selected:!1},a}return Object(u.a)(n,[{key:"componentDidUpdate",value:function(){this.setRenderedLinkPath()}},{key:"componentDidMount",value:function(){this.setRenderedLinkPath(),function(e,t){var n,a=t.getModel().getSelectedEntities(),r=Object(Rt.a)(a);try{for(r.s();!(n=r.n()).done;){var o=n.value;o!==e&&o.setSelected(!1)}}catch(i){r.e(i)}finally{r.f()}t.repaintCanvas()}(this.props.link,this.props.diagramEngine)}},{key:"setRenderedLinkPath",value:function(){this.props.link.setRenderedPaths(this.refPaths.map((function(e){return e.current})))}},{key:"componentWillUnmount",value:function(){this.props.link.setRenderedPaths([])}},{key:"addPointToLink",value:function(e,t){var n=this;if(e.shiftKey&&this.props.link.getSourcePort().getNode().isEditable()&&!this.props.link.isLocked()&&this.props.link.getPoints().length-1<=this.props.diagramEngine.getMaxNumberPointsPerLink()){var a=new Ut.PointModel({link:this.props.link,position:this.props.diagramEngine.getRelativeMousePoint(e)});this.props.link.addPoint(a,t),e.persist(),e.stopPropagation(),this.forceUpdate((function(){n.props.diagramEngine.getActionEventBus().fireAction({event:e,model:a})}))}}},{key:"generatePoint",value:function(e){return a.createElement(po,{key:e.getID(),point:e,colorSelected:this.props.link.getOptions().selectedColor,color:this.props.link.getOptions().color})}},{key:"generateLink",value:function(e,t,n){var r=this,o=a.createRef();return this.refPaths.push(o),a.createElement(ho,{key:"link-".concat(n),path:e,selected:this.state.selected,diagramEngine:this.props.diagramEngine,factory:this.props.diagramEngine.getFactoryForLink(this.props.link),link:this.props.link,forwardRef:o,onSelection:function(e){r.setState({selected:e})},extras:t})}},{key:"render",value:function(){var e=this,t=this.props.link.getPoints(),n=[];if(this.refPaths=[],2===t.length)n.push(this.generateLink(this.props.link.getSVGPath(),{onMouseDown:function(t){e.addPointToLink(t,1)}},"0")),null==this.props.link.getTargetPort()&&n.push(this.generatePoint(t[1]));else{for(var r=function(a){n.push(e.generateLink(Ut.LinkWidget.generateLinePath(t[a],t[a+1]),{"data-linkid":e.props.link.getID(),"data-point":a,onMouseDown:function(t){e.addPointToLink(t,a+1)}},a))},o=0;o<t.length-1;o++)r(o);for(var i=1;i<t.length-1;i++)n.push(this.generatePoint(t[i]));null==this.props.link.getTargetPort()&&n.push(this.generatePoint(t[t.length-1]))}return a.createElement("g",{"data-binary-link-test":this.props.link.getOptions().testName},n)}}]),n}(a.Component),fo=n(74);function vo(){var e=Object(we.a)(["\n\t\t",";\n\t\tfill: none;\n\t\tpointer-events: all;\n\t"]);return vo=function(){return e},e}function bo(){var e=Object(we.a)(["\n\t\tstroke-dasharray: 10, 2;\n\t\tanimation: "," 1s linear infinite;\n\t"]);return bo=function(){return e},e}function yo(){var e=Object(we.a)(["\n\t\tfrom {\n\t\t\tstroke-dashoffset: 24;\n\t\t}\n\t\tto {\n\t\t\tstroke-dashoffset: 0;\n\t\t}\n\t"]);return yo=function(){return e},e}var Eo=Object(fo.keyframes)(yo()),No=Object(fo.css)(bo(),Eo),ko=Pt.default.path(vo(),(function(e){return e.selected&&No})),Oo=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"binary";return Object(c.a)(this,n),t.call(this,e)}return Object(u.a)(n,[{key:"generateReactWidget",value:function(e){return a.createElement(go,{link:e.model,diagramEngine:this.engine})}},{key:"generateModel",value:function(e){return new ln}},{key:"generateLinkSegment",value:function(e,t,n){return a.createElement(ko,{selected:t,stroke:t?e.getOptions().selectedColor:e.getOptions().color,strokeWidth:e.getOptions().width,d:n})}}]),n}(wt.AbstractReactFactory),Po=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.call(this,"quaternary")}return Object(u.a)(n,[{key:"generateReactWidget",value:function(e){return a.createElement(Fa,{engine:this.engine,size:50,model:e.model})}},{key:"generateModel",value:function(e){return new un}}]),n}(wt.AbstractReactFactory),To=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.call(this,"ternary")}return Object(u.a)(n,[{key:"generateReactWidget",value:function(e){return a.createElement(Pa,{engine:this.engine,size:50,model:e.model})}},{key:"generateModel",value:function(e){return new cn}}]),n}(wt.AbstractReactFactory),Co=function(){function e(t){Object(c.a)(this,e),this.activeModel=void 0,this.diagramEngine=void 0,this.diagramEngine=Vt()(),this.setState(),this.setModel(t),this.diagramEngine.getPortFactories().registerFactory(new uo("nary",(function(e){return new an}))),this.diagramEngine.getNodeFactories().registerFactory(new Po),this.diagramEngine.getNodeFactories().registerFactory(new io),this.diagramEngine.getNodeFactories().registerFactory(new so),this.diagramEngine.getNodeFactories().registerFactory(new To),this.diagramEngine.getLinkFactories().registerFactory(new Oo),this.diagramEngine.getLabelFactories().registerFactory(new co)}return Object(u.a)(e,[{key:"setState",value:function(){var e=this.diagramEngine.getStateMachine().getCurrentState();e instanceof It.DefaultDiagramState&&(e.dragNewLink.config.allowLooseLinks=!1)}},{key:"setModel",value:function(e){this.diagramEngine.setModel(e),this.activeModel=e}},{key:"getActiveModel",value:function(){return this.activeModel}},{key:"getDiagramEngine",value:function(){return this.diagramEngine}}]),e}();function So(){var e=new It.DiagramModel;return{diagramModel:e,diagramEngine:new Co(e).diagramEngine,domainNodes:new Map,constantNodes:new Map,ternaryNodes:new Map,quaternaryNodes:new Map,editableNodes:!1}}function jo(e,t){for(var n=e.diagramModel.getNodes(),a=0;a<n.length;a++)n[a].changeEditableState(t);for(var r=e.diagramModel.getLinks(),o=0;o<r.length;o++)for(var i=r[o].getLabels(),s=0;s<i.length;s++)i[s].changeEditableState(t);e.diagramEngine.repaintCanvas()}function Ao(e){for(var t=e.diagramModel.getLinks(),n=0;n<t.length;n++)t[n].label&&0===t[n].getLabels().length&&t[n].addLabel(t[n].label)}function Mo(e,t,n,a,r){var o=r.clientWidth,i=r.clientHeight;e.setPosition(Math.random()*(o-.2*o)+.05*o,Math.random()*(i-.2*i)+.05*i),function(e,t,n){n.set(e,t)}(t,e,n),a.addNode(e)}function wo(e,t,n){var a=new ln({},!1);return a.setSourcePort(e),a.setTargetPort(t),n.addAll(a),a}function xo(e){if(null!==e.structure.constants){var t,n=new Map(Object.entries(e.structure.constants)),a=e.diagramState.constantNodes,r=e.diagramState.domainNodes,o=e.diagramState.diagramModel,i=e.diagramState.diagramEngine.getCanvas(),s=Object(Rt.a)(a.entries());try{for(s.s();!(t=s.n()).done;){var c=Object(x.a)(t.value,2),u=c[0],l=c[1];n.has(u)||(Fo(u,a),Qo(l,o))}}catch(b){s.e(b)}finally{s.f()}var d,m=Object(Rt.a)(n.entries());try{for(m.s();!(d=m.n()).done;){var p=Object(x.a)(d.value,2),h=p[0],g=p[1];if(a.has(h)){var f=a.get(h);Do(f.getMainPort()),f.removeAllLinks(),0!==g.value.length&&wo(f.getMainPort(),r.get(g.value).getMainPort(),o)}else{var v=new on(h,"rgb(92,192,125)",{addConstantNode:e.addConstantNode,renameConstantNode:e.renameConstantNode,removeConstantNode:e.removeConstantNode,setConstantValueFromLink:e.setConstantValueFromLink,focusOnBodyElement:e.focusOnBodyFunc,store:e.store});Mo(v,h,a,o,i),0!==g.value.length&&wo(v.getMainPort(),r.get(g.value).getMainPort(),o)}}}catch(b){m.e(b)}finally{m.f()}}}function Do(e){var t,n=Object(Rt.a)(Bt.a.values(e.getLinks()));try{for(n.s();!(t=n.n()).done;){var a=t.value;a instanceof ln&&a.setCallReduxFunc(!1)}}catch(r){n.e(r)}finally{n.f()}}function Fo(e,t){t.delete(e)}function Ro(e,t,n){var a=Pe(n),r="P"===t?a.iPredicate:a.iFunction,o=new Map([["1",new Map],["2",new Map],["3",new Map],["4",new Map]]);if(r&&r.size>0){var i,s=Object(Rt.a)(r.entries());try{for(s.s();!(i=s.n()).done;){var c=Object(x.a)(i.value,2),u=c[0],l=c[1],d=u.split("/")[0],m=u.split("/")[1],p=o.get(m);"P"===t?_o(p,l,d):Lo(p,l,d)}}catch(h){s.e(h)}finally{s.f()}}return o}function _o(e,t,n){var a,r=Object(Rt.a)(t);try{for(r.s();!(a=r.n()).done;){var o=a.value;o=o.join(","),e.has(o)||e.set(o,new Set),e.get(o).add(n)}}catch(i){r.e(i)}finally{r.f()}}function Lo(e,t,n){for(var a in t)if(t.hasOwnProperty(a)){var r=JSON.parse(a).join(",")+","+t[a];e.has(r)||e.set(r,new Set),e.get(r).add(n)}}function Io(e,t){var n=Ro(0,"P",t);!function(e,t){var n,a=Object(Rt.a)(t.entries());try{for(a.s();!(n=a.n()).done;){var r=Object(x.a)(n.value,2),o=r[0],i=r[1],s=e.get(o);if(e.has(o)){var c,u=i.getUnaryPredicates(),l=Object(Rt.a)(s);try{for(l.s();!(c=l.n()).done;){var d=c.value;u.has(d)||i.addUnaryPredicateToSet(d)}}catch(g){l.e(g)}finally{l.f()}var m,p=Object(Rt.a)(u);try{for(p.s();!(m=p.n()).done;){var h=m.value;s.has(h)||i.removeUnaryPredicateFromSet(h)}}catch(g){p.e(g)}finally{p.f()}}else i.clearPredicates()}}catch(g){a.e(g)}finally{a.f()}}(n.get("1"),e.diagramState.domainNodes),Yo(n.get("2"),e.diagramState,"P"),Vo(n.get("3"),e,"T","P"),Vo(n.get("4"),e,"Q","P")}function Vo(e,t,n,a){var r,o=new Map,i=t.diagramState,s="T"===n?i.ternaryNodes:i.quaternaryNodes,c=Object(Rt.a)(s.values());try{for(c.s();!(r=c.n()).done;){var u=r.value,l=u.getNodeNameCombination();l&&("P"===a?u.clearPredicates():u.clearFunctions(),o.set(l.join(","),u))}}catch(O){c.e(O)}finally{c.f()}var d,m={addTernaryNode:t.addTernaryNode,removeTernaryNode:t.removeTernaryNode,addQuaternaryNode:t.addQuaternaryNode,removeQuaternaryNode:t.removeQuaternaryNode,addBinaryFunction:t.addBinaryFunction,removeBinaryFunction:t.removeBinaryFunction,addTernaryPredicate:t.addTernaryPredicate,removeTernaryPredicate:t.removeTernaryPredicate,addTernaryFunction:t.addTernaryFunction,removeTernaryFunction:t.removeTernaryFunction,addQuaternaryPredicate:t.addQuaternaryPredicate,removeQuaternaryPredicate:t.removeQuaternaryPredicate,focusOnBodyElement:t.focusOnBodyFunc,editable:t.diagramState.editableNodes,store:t.store},p=Object(Rt.a)(e.entries());try{for(p.s();!(d=p.n()).done;){var h=Object(x.a)(d.value,2),g=h[0],f=h[1],v=Bo(s,n);if(!o.has(g)){var b="T"===n?new cn({name:v,reduxProps:m,numberOfPorts:3}):new un({name:v,reduxProps:m,numberOfPorts:4});Mo(b,v,s,i.diagramModel,i.diagramEngine.getCanvas()),zo(b,g.split(","),i.domainNodes,i.diagramModel),o.set(g,b)}var y,E=o.get(g),N=Object(Rt.a)(f);try{for(N.s();!(y=N.n()).done;){var k=y.value;"P"===a?E.addPredicateToSet(k):E.addFunctionToSet(k)}}catch(O){N.e(O)}finally{N.f()}}}catch(O){p.e(O)}finally{p.f()}}function zo(e,t,n,a){for(var r=0;r<e.getNumberOfPorts();r++)wo(e.getPortByIndex(r),n.get(t[r]).getMainPort(),a)}function Bo(e,t){for(var n=t,a=0;e.has(n+a);)a++;return n+a}function Uo(e,t){var n=Ro(0,"F",t);Yo(n.get("1"),e.diagramState,"F"),Vo(n.get("2"),e,"T","F"),Vo(n.get("3"),e,"Q","F")}function Go(e,t,n,a,r){if(e.has(t)){var o,i=Object(Rt.a)(e.get(t));try{for(i.s();!(o=i.n()).done;){var s=o.value;"P"===r?a.addBinaryPredicateToSetWithDirection(s,"F"):a.addUnaryFunctionToSetWithDirection(s,"F")}}catch(d){i.e(d)}finally{i.f()}}if(e.has(n)){var c,u=Object(Rt.a)(e.get(n));try{for(u.s();!(c=u.n()).done;){var l=c.value;("P"===r?a.getPredicates():a.getFunctions()).has(l)?"P"===r?a.addBinaryPredicateToSetWithDirection(l,"B"):a.addUnaryFunctionToSetWithDirection(l,"B"):"P"===r?a.addBinaryPredicateToSetWithDirection(l,Qt):a.addUnaryFunctionToSetWithDirection(l,Qt)}}catch(d){u.e(d)}finally{u.f()}}}function Yo(e,t,n){var a,r=new Set,o=new Set,i=Object(Rt.a)(t.diagramModel.getLinks());try{for(i.s();!(a=i.n()).done;){var s=a.value,c=s.getLabel();if(c){var u="P"===n?c.getPredicates():c.getFunctions();"P"===n?c.clearPredicates():c.clearFunctions();var l=c.getNodeCombinationKey(),d=c.getReversedNodeCombinationKey();o.add(l),o.add(d),Go(e,l,d,c,n),0===u.size&&r.add(s)}}}catch(f){i.e(f)}finally{i.f()}var m,p=function(e,t,n){var a,r=new Set,o=Object(Rt.a)(e.keys());try{for(o.s();!(a=o.n()).done;){var i=a.value,s=i.split(",")[0],c=i.split(",")[1],u=i.split(",")[1]+","+i.split(",")[0];if(!t.has(i)&&!t.has(u)){if(!n.domainNodes.has(s)||!n.domainNodes.has(c))break;var l=n.domainNodes.get(s).getMainPort(),d=n.domainNodes.get(c).getMainPort();l===d?r.add(wo(l,l.getNode().getAppendPort(),n.diagramModel)):r.add(wo(l,d,n.diagramModel)),t.add(i),t.add(u)}}}catch(f){o.e(f)}finally{o.f()}return r}(e,o,t),h=Object(Rt.a)(p);try{for(h.s();!(m=h.n()).done;){var g=m.value.getLabel();Go(e,g.getNodeCombinationKey(),g.getReversedNodeCombinationKey(),g,n)}}catch(f){h.e(f)}finally{h.f()}return r}function Wo(e){var t=e.structure.domain.parsed,n=e.diagramState.domainNodes,a=e.diagramState.diagramModel,r=e.diagramState.diagramEngine.getCanvas();if(null!=t&&0!==t.length){var o,i=[],s=Object(Rt.a)(n.entries());try{for(s.s();!(o=s.n()).done;){var c=Object(x.a)(o.value,2),u=c[0],l=c[1];t.includes(u)?i.push(u):(Fo(u,n),Qo(l,a))}}catch(f){s.e(f)}finally{s.f()}var d,m=Object(Rt.a)(t);try{for(m.s();!(d=m.n()).done;){var p=d.value;if(!i.includes(p))Mo(new mn(p,"rgb(92,192,125)",{addDomainNode:e.addDomainNode,renameDomainNode:e.renameDomainNode,removeDomainNode:e.removeDomainNode,addUnaryPredicate:e.addUnaryPredicate,removeUnaryPredicate:e.removeUnaryPredicate,addUnaryFunction:e.addUnaryFunction,removeUnaryFunction:e.removeUnaryFunction,addBinaryPredicate:e.addBinaryPredicate,removeBinaryPredicate:e.removeBinaryPredicate,changeDirectionOfBinaryRelation:e.changeDirectionOfBinaryRelation,focusOnBodyElement:e.focusOnBodyFunc,editable:e.diagramState.editableNodes,store:e.store}),p,n,a,r)}}catch(f){m.e(f)}finally{m.f()}}else{var h,g=Object(Rt.a)(n.values());try{for(g.s();!(h=g.n()).done;){Qo(h.value,a)}}catch(f){g.e(f)}finally{g.f()}n.clear()}}function Qo(e,t){for(var n=0,a=Object.values(e.getPorts());n<a.length;n++){var r=a[n];Do(r),e.removePort(r)}t.removeNode(e)}var Ho=function(e,t,n){switch(t.type){case"SET_DIAGRAM":return e.diagramModel=t.diagramModel,e;case"SYNC_DIAGRAM":var a=Object(Se.a)({},t.value,{focusOnBodyFunc:t.focusOnBodyFunc});return Wo(a),Ao(e),Io(a,n),Uo(a,n),xo(a),e;case"ADD_DOMAIN_NODE":return e.domainNodes.set(t.nodeName,t.nodeObject),e;case"RENAME_DOMAIN_NODE":return e.domainNodes.set(t.newName,e.domainNodes.get(t.oldName)),e.domainNodes.delete(t.oldName),e;case"REMOVE_DOMAIN_NODE":return e.domainNodes.delete(t.nodeName),e;case"ADD_CONSTANT_NODE":return e.constantNodes.set(t.nodeName,t.nodeObject),e;case"RENAME_CONSTANT_NODE":return e.constantNodes.set(t.newName,e.constantNodes.get(t.oldName)),e.constantNodes.delete(t.oldName),e;case"REMOVE_CONSTANT_NODE":return e.constantNodes.delete(t.nodeName),e;case"ADD_TERNARY_NODE":return e.ternaryNodes.set(t.nodeName,t.nodeObject),e;case"REMOVE_TERNARY_NODE":return e.ternaryNodes.delete(t.nodeName),e;case"ADD_QUATERNARY_NODE":return e.quaternaryNodes.set(t.nodeName,t.nodeObject),e;case"REMOVE_QUATERNARY_NODE":return e.quaternaryNodes.delete(t.nodeName),e;case"SYNC_MATH_STATE":return function(e){for(var t=e.diagramModel.getLinks(),n=0;n<t.length;n++)t[n]instanceof ln&&t[n].clearLabels()}(e),e;case"TOGGLE_EDITABLE_NODES":return jo(e,t.value),Object(Se.a)({},e,{editableNodes:t.value});case"IMPORT_APP":var r=new It.DiagramModel;return e.diagramEngine.setModel(r),(i=e).domainNodes.clear(),i.constantNodes.clear(),i.ternaryNodes.clear(),i.quaternaryNodes.clear(),Object(Se.a)({},e,{diagramModel:r,diagramCordState:JSON.parse(t.content).diagramCordState,imported:!0});case"IMPORT_DIAGRAM_STATE":var o=Object(Se.a)({},t.state,{focusOnBodyFunc:t.focusOnBodyFunc});return Wo(o),Ao(o.diagramState),Io(o,n),Uo(o,n),xo(o),function(e){var t=new Map([["domainNodes",e.domainNodes],["constantNodes",e.constantNodes],["ternaryNodes",e.ternaryNodes],["quaternaryNodes",e.quaternaryNodes]]),n=e.diagramCordState;if(!n)return;var a,r=new Map,o=Object(Rt.a)(t.values());try{for(o.s();!(a=o.n()).done;){var i=a.value;if("ternaryNodes"===i||"quaternaryNodes"===i){var s,c=Object(Rt.a)(i.values());try{for(c.s();!(s=c.n()).done;){var u=s.value,l=u.getNodeNameCombination();l&&r.set(l.join(","),u)}}catch(N){c.e(N)}finally{c.f()}}}}catch(N){o.e(N)}finally{o.f()}var d,m=Object(Rt.a)(t.keys());try{for(m.s();!(d=m.n()).done;){var p,h=d.value,g=Object(Rt.a)(t.get(h).entries());try{for(g.s();!(p=g.n()).done;){var f=Object(x.a)(p.value,2),v=f[0],b=f[1];if(n.hasOwnProperty(h)){var y="domainNodes"===h||"constantNodes"===h?v:b.getNodeNameCombination();if(n[h].hasOwnProperty(y)){var E=n[h][y];b.setPosition(E.x,E.y)}}}}catch(N){g.e(N)}finally{g.f()}}}catch(N){m.e(N)}finally{m.f()}e.diagramEngine.repaintCanvas()}(o.diagramState),jo(e,e.editableNodes),function(e,t){var n,a=Object(Rt.a)(e.getLinks());try{for(a.s();!(n=a.n()).done;){n.value.setCallReduxFunc(t)}}catch(r){a.e(r)}finally{a.f()}}(e.diagramModel,!0),Object(Se.a)({},e,{imported:!1});case"CLEAR_GRAPH_SELECTION":return e.diagramModel.clearSelection(),e;default:return e}var i};function Ko(){return{common:{teacherMode:!1},language:{constants:{value:"",locked:!1,errorMessage:"",parsed:[]},predicates:{value:"",locked:!1,errorMessage:"",parsed:[]},functions:{value:"",locked:!1,errorMessage:"",parsed:[]},lockedComponent:!1},structure:{constants:{},predicates:{},functions:{},variables:Object(Se.a)({},{value:"",locked:!1,errorMessage:"",parsed:[]}),domain:Object(Se.a)({},{value:"",locked:!1,errorMessage:"",parsed:[]},{errorMessage:"Domain cannot be empty"})},expressions:{formulas:[],terms:[]},diagramState:So()}}function Jo(e){if(!e.common||!e.language||!e.structure)throw"State is not valid!";if(!e.language.constants||!e.language.predicates||!e.language.functions)throw"State is not valid!"}var qo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ko(),t=arguments.length>1?arguments[1]:void 0;if("IMPORT_APP"===t.type)try{var n=JSON.parse(t.content);Jo(n),(e=n).diagramState=t.diagramState?t.diagramState:So()}catch(c){console.error(c)}var a=oo(e.common,t),r=Mr(e.language,t),o=qr(e.structure,t,{language:r}),i=ro(e.expressions,t,{language:r,structure:o}),s=Ho(e.diagramState,t,e);return{common:a,language:r,structure:o,expressions:i,diagramState:s}};Object(Pr.b)();var Xo=Object(or.b)(qo,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),Zo=function(){return r.a.createElement("main",{className:"container-fluid"},r.a.createElement(rr,{store:Xo}))};i.a.render(r.a.createElement(Zo,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[313,1,2]]]);
//# sourceMappingURL=main.2ad6c520.chunk.js.map